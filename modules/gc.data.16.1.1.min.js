/*!
 * 
 * SpreadJS Library 16.1.1
 *
 * Copyright(c) GrapeCity, Inc.  All rights reserved.
 *
 * Licensed under the SpreadJS Commercial License.
 * us.sales@grapecity.com
 * http://www.grapecity.com/en/licensing/grapecity/
 *
 *
 */
var GC;!function(){var i,r,t;function e(t){var n,n,n=r[t];return void 0!==n||(n=r[t]={exports:{}},i[t](n,n.exports,e)),n.exports}i={"./node_modules_local/@grapecity/js-data-manager/dist/gc.data.js":function(t,n,i){var r,e,u,o;function s(t){var n,n,n=u[t];return void 0!==n||(n=u[t]={exports:{}},e[t].call(n.exports,n,n.exports,s)),n.exports}e={"./dist/src/calculation/calcSource.js":function(t,n,i){"use strict";var r,c,e,u,o,s;function f(){this.row=[],this.field=[]}function a(t,n){var t=s.call(this,t)||this;return t.nM=n,t}r=this&&this.__extends||(o=function(t,n){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),Object.defineProperty(n,"__esModule",{value:!0}),n.DataManagerCalcSource=n.DataManagerReference=void 0,c=i("CalcEngine"),f.prototype.parseRowIndex=function(t,n,i){var r=n.num;return n.relative||(-1===n.num?r=t-1:r--),i*n.relative+r},f.prototype.getValueImp=function(t){var n,i,r,e,u,o,s,f,n=this.table.length();if(this.field.vEt&&this.field.vEt[this.rowString])return this.field.vEt[this.rowString];if(i=[],0===this.row.length)for(r=0;r<n;r++)i.push(this.field.getValue(r));for(e=0;e<this.row.length;e++)if(2===(u=this.row[e]).length)for(o=this.parseRowIndex(n,u[0],t),s=this.parseRowIndex(n,u[1],t),f=o;f<=s;f++)i.push(this.field.getValue(f));else if(u.type)if("key"===u.type)r=this.table.mEt(u.value),i=i.concat(this.field.getValues(r));else for(f="odd"===u.type?1:0;f<n;f+=2)i.push(this.field.getValue(f));else r=this.parseRowIndex(n,u,t),i.push(this.field.getValue(r));if(1===i.length)i=i[0];else if(0===i.length)return null;return i instanceof Array&&(i=i[0]instanceof Array?new c.CalcArray(i):new c.CalcArray([i])),this.gEt||(this.field.vEt=this.field.vEt||{},this.field.vEt[this.rowString]=i),i},f.prototype.getValuesImp=function(t,n){var t=this.field.getValues(t,n);return t[0]instanceof Array?new c.CalcArray(t):new c.CalcArray([t])},f.prototype.getValue=function(t,n){return this.pEt(),t instanceof Array?this.getValuesImp(t,n):this.getValueImp(t)},f.prototype.pEt=function(){this.field=this.table.bEt(this.Pq)},n.DataManagerReference=f,s=c.CalcSource,r(a,s),a.prototype.yEt=function(){return this._allFieldNames},a.prototype.wEt=function(t){this.MEt=t},a.prototype.pe=function(t,n,i){this.DJ=t,this.ak=n,this.GOt=i},a.prototype.getField=function(t){var n=this.DJ,i=this.ak;return t.getValue(n,i)},a.prototype.getValue=function(){var t=this.GOt;return t&&"number"==typeof this.DJ?this.nM._getValueByField(t,this.DJ):null},n.DataManagerCalcSource=a},"./dist/src/calculation/functions/functions.entry.js":function(t,n,i){"use strict";var r,e,u,o,s,f,c;function a(){(0,r.addScopeCustomFunctions)(),(0,e.addParentCustomFunctions)(),(0,u.addChildrenCustomFunctions)(),(0,o.addOnlyChildrenCustomFunctions)(),(0,s.addLevelCustomFunctions)(),(0,f.addLevelRowNumberCustomFunctions)(),(0,c.addQueryFunction)()}Object.defineProperty(n,"__esModule",{value:!0}),n.addCustomFunctions=void 0,r=i("./dist/src/calculation/functions/scope.js"),e=i("./dist/src/calculation/functions/hierarchyParent.js"),u=i("./dist/src/calculation/functions/hierarchyChildren.js"),o=i("./dist/src/calculation/functions/hierarchyOnlyChildren.js"),s=i("./dist/src/calculation/functions/hierarchyLevel.js"),f=i("./dist/src/calculation/functions/hierarchyLevelRowNumber.js"),c=i("./dist/src/calculation/functions/query.js"),n.addCustomFunctions=a},"./dist/src/calculation/functions/hierarchyChildren.js":function(t,n,i){"use strict";var s,f,r;function e(){function t(){this.R9t=[{J6t:3,pkt:["< 1","> 999"]},{J6t:5}]}(t.prototype=new s.Functions.Function(r,2,2)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t,i,r){var e,u,n,o,e=[],u=t.source.nM,n=t.source.DJ;return u.CEt()&&(o=u.SEt(n),!(0,f.isNullOrUndefined)(o))&&0<i&&!(0,f.isNullOrEmpty)(r)&&((0,f.traversalTree)(o,{invoking:function(t){var n,n,n;return 0===--i?(n=t.lp,n=u._dataSource.TEt(n),n=u._getValueByField(r,n),e.push(n),{cancelDeepRecursion:!0}):0===t.children.length?{cancelDeepRecursion:!0}:void 0},invoked:function(){i++}}),t.source.DJ=n),new s.CalcArray([e])},s.Functions.defineGlobalCustomFunction(r,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addChildrenCustomFunctions=void 0,s=i("CalcEngine"),f=i("./dist/src/dataSource/utils.js"),r="CHILDREN",n.addChildrenCustomFunctions=e},"./dist/src/calculation/functions/hierarchyLevel.js":function(t,n,i){"use strict";var r,e,u;function o(){function t(){}(t.prototype=new r.Functions.Function(u)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t){var n,t,n,n=t.source.nM,t=t.source.DJ;if(n.CEt()&&(n=n.SEt(t),!(0,e.isNullOrUndefined)(n)))return n.level},r.Functions.defineGlobalCustomFunction(u,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addLevelCustomFunctions=void 0,r=i("CalcEngine"),e=i("./dist/src/dataSource/utils.js"),u="LEVEL",n.addLevelCustomFunctions=o},"./dist/src/calculation/functions/hierarchyLevelRowNumber.js":function(t,n,i){"use strict";var r,e,u;function o(){function t(){}(t.prototype=new r.Functions.Function(u)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t){var n,t,n,n=t.source.nM,t=t.source.DJ;if(n.CEt()&&(n=n.SEt(t),!(0,e.isNullOrUndefined)(n)))return n.getCurrentIndex()+1},r.Functions.defineGlobalCustomFunction(u,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addLevelRowNumberCustomFunctions=void 0,r=i("CalcEngine"),e=i("./dist/src/dataSource/utils.js"),u="LEVELROWNUMBER",n.addLevelRowNumberCustomFunctions=o},"./dist/src/calculation/functions/hierarchyOnlyChildren.js":function(t,n,i){"use strict";var o,s,r;function e(){function t(){this.R9t=[{J6t:5}]}(t.prototype=new o.Functions.Function(r,1,1)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t,n){var i,r,e,u,i=[],r=t.source.nM,e=t.source.DJ;return r.CEt()&&(u=r.SEt(e),(0,s.isNullOrUndefined)(u)||(0,s.isNullOrEmpty)(n)||((0,s.traversalTree)(u,function(t){var t,t,t;0===t.children.length&&(t=t.lp,t=r._dataSource.TEt(t),t=r._getValueByField(n,t),i.push(t))}),t.source.DJ=e)),new o.CalcArray([i])},o.Functions.defineGlobalCustomFunction(r,new t)}Object.defineProperty(n,"__esModule",{value:!0}),n.addOnlyChildrenCustomFunctions=void 0,o=i("CalcEngine"),s=i("./dist/src/dataSource/utils.js"),r="ONLYCHILDREN",n.addOnlyChildrenCustomFunctions=e},"./dist/src/calculation/functions/hierarchyParent.js":function(t,n,i){"use strict";var r,o,e;function u(){function t(){this.R9t=[{J6t:3,pkt:["< 1","> 999"]},{J6t:5}]}(t.prototype=new r.Functions.Function(e,2,2)).isContextSensitive=function(){return!0},t.prototype.evaluate=function(t,n,i){var r,e,u,u,n,u,n,r=t.source.nM,e=t.source.DJ;if(r.CEt()&&(u=r.SEt(e),!(0,o.isNullOrUndefined)(u))&&0<n&&!(0,o.isNullOrEmpty)(i)&&!(u=s(u,n)).isRoot)return n=u.lp,u=r._dataSource.TEt(n),n=r._getValueByField(i,u),t.source.DJ=e,n},r.Functions.defineGlobalCustomFunction(e,new t)}function s(t,n){return 0===n||t.isRoot?t:s(t.parent,n-1)}Object.defineProperty(n,"__esModule",{value:!0}),n.addParentCustomFunctions=void 0,r=i("CalcEngine"),o=i("./dist/src/dataSource/utils.js"),e="PARENT",n.addParentCustomFunctions=u},"./dist/src/calculation/functions/query.js":function(t,n,i){"use strict";var f,r;function e(){var t;f.Functions.findGlobalFunction(r)||((t=new f.Functions.AsyncFunction(r,1,3)).isContextSensitive=function(){return!0},t.evaluateAsync=function(n,i,r,e){var u,t;function o(){var t,t,t,t;null!=(t=null==(t=null==(t=n.ctx)?void 0:t.Xkt)?void 0:t.node)&&t.WK?(t=u.IEt(i,r,e))&&(e?n.setAsyncResult(t[0]):n.setAsyncResult(new f.CalcArray(t))):u.IEt(i,r,e,!0)}function s(){var t=u.IEt(i,r,e,o);t&&(e?n.setAsyncResult(t[0]):n.setAsyncResult(new f.CalcArray(t)))}(t=(u=n.ctx.source.Mf.parent.dataManager()).xEt(i,r,e)).table&&t.table.NEt().then(function(){s()})},t.acceptsReference=function(t){return!0},t.acceptsArray=function(t){return!0},f.Functions.defineGlobalCustomFunction(r,t))}Object.defineProperty(n,"__esModule",{value:!0}),n.addQueryFunction=void 0,f=i("CalcEngine"),r="QUERY",n.addQueryFunction=e},"./dist/src/calculation/functions/scope.js":function(t,n,i){"use strict";var r,e,u,o;function s(){function t(){}function n(){}(t.prototype=new r.Functions.Function(u,2,2)).isContextSensitive=function(){return!0},t.prototype.isReverseArgs=function(){return!0},t.prototype.evaluate=function(t,n,i){return t.source.ak=n.start,t.source.DJ=n.context,i},r.Functions.defineGlobalCustomFunction(u,new t),(n.prototype=new r.Functions.Function(o,0,255)).isContextSensitive=function(){return!0},n.prototype.evaluate=function(t){for(var n,i,r,e,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return r={start:t.source.ak,context:t.source.DJ},e=t.source.MEt,t.source.ak=0,t.source.DJ=f(e,n),r},r.Functions.defineGlobalCustomFunction(o,new n)}function f(t,n){var n=c(t.groupOptions.slice(0,t.path.length),n);return a(t.path,n)?t.entireScope:h(t.path,n)}function c(t,n){var i,r;if(n&&0<n.length){for(i=-1,t.reverse(),r=0;r<t.length;r++)if(t[r].field!==n[r]){(0,e.isNullOrUndefined)(n[r])&&n.length<=r&&(i=t.length-r-1);break}return i}return-1}function a(t,n){return-1===n||t.length-1<=n}function h(t,n){var i,r=[];return v(t[n],r),r}function v(t,n){var i,r,e,u,o,s,f,c,i=n.length,r=t.recordIndexes;if(r)for(e=0,u=r.length;e<u;e++)n[i+e]=r[e];else for(s=0,f=o=t.children;s<f.length;s++)v(c=f[s],n)}Object.defineProperty(n,"__esModule",{value:!0}),n.addScopeCustomFunctions=void 0,r=i("CalcEngine"),e=i("./dist/src/dataSource/utils.js"),u="CALCULATE",o="REMOVEFILTERS",n.addScopeCustomFunctions=s},"./dist/src/calculation/queryFunctionResolver.js":function(t,n,i){"use strict";var i,a,h,r;function v(i,r,e){return function(t){var n=[];return n.push(t.kEt(t.mEt(i),r||t._dataSource.DEt,e)),n}}function l(){}Object.defineProperty(n,"__esModule",{value:!0}),n.QueryFunctionSolver=void 0,i=i("Common"),a=null,h=i.Common.zf.fJ,l.parseParam=function(e,u,o,s){for(var f,c,t,n,f=Object.keys(s.tables),c=new l,t=function(t){var t,n,t,i,r,t=f[t];e===t?(c.getValue=function(t){return t.ASt(a,a,u,o)},c.table=s.tables[t]):h(e,t)&&(c.table=s.tables[t],n=e[t.length],t=e.substr(t.length+1),"#"===n?(i=parseInt(t,10),c.getValue=function(t){var n=[];return n.push(t.kEt(i,u||t._dataSource.DEt,o)),n}):"/"===n?c.getValue=v(t,u,o):"?"===n?1===(r=t.split("=",2)).length?c.getValue=v(t,u,o):c.getValue=function(t){return t.ASt(r[1],r[0],u,o)}:delete c.table)},n=0;n<f.length;n++)t(n);return c},n.QueryFunctionSolver=l},"./dist/src/calculation/tokenResolver.js":function(t,n,i){"use strict";var r,e,f,h,c,u,o,s,a;function v(t){var n=s.call(this,14)||this;return n.value=t,n}function l(t){return a.call(this,t)||this}r=this&&this.__extends||(o=function(t,n){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),Object.defineProperty(n,"__esModule",{value:!0}),n.DataManagerTokenResolver=void 0,e=i("CalcEngine"),f=i("./dist/src/calculation/calcSource.js"),h=i("./dist/src/dataSource/utils.js"),s=e.Expression,r(v,s),v.prototype.Iwt=function(t,n){var i;this.value instanceof f.DataManagerReference&&this.value.table._Et(t,this.value.Pq[0],n)},c=v,a=e.TokenResolver,r(l,a),l.prototype.resolveToken=function(t,n,i,r,e){var i,u,t,t,i,o,s,i=i[r],u=i.Awt,t=t.source,t=t&&t.nM;if(t&&0===i.uit&&"["===u[0]&&"]"===u[u.length-1]&&(i=new f.DataManagerReference,-1!==(o=this.EEt(i,u,1)))&&(i.rowString=u.substring(1,o),-1!==(o=this.jEt(i,u,o))))return i.table=t,i.Pq=i.field,i.field=t.bEt(i.field),{expr:s=new c(i),index:r+1}},l.prototype.EEt=function(t,e,n){var u,i,r,o,s;function f(t,n){for(var i=n?t+1:t;"0"<=e[i]&&e[i]<="9";)i++;for(;" "===e[i];)i++;return{value:parseInt(e.substring(t,i),10),end:i}}function c(t){for(var n=t;n<e.length&&"["!==e[n]&&"]"!==e[n]&&","!==e[n];)n++;return{type:"key",value:e.substring(t,n).trim(),end:n}}function a(t){var n,i,r,i,n=e[t],i=e[t+1];return"@"===n?(u=!0,"+"===i||"-"===i?(r=f(t+1,!0)).end<=t+1?-1:{num:r.value,end:r.end,relative:!0}:{num:0,end:t+1,relative:!0}):"#"===n?(r=f(t+1)).end>t+1?{num:r.value,end:r.end,relative:!1}:"last"===e.substr(t+1,4)?{num:-1,end:t+5,relative:!1}:"odd"===e.substr(t+1,3)?{type:"odd",end:t+4}:"even"===e.substr(t+1,4)?{type:"even",end:t+5}:-1:"$"!==n||(i=c(t+1)).end>=e.length?-1:i}for(u=!1,i=null;n<e.length&&"["!==(r=e[n])&&"]"!==r;)if(i||"@"!==r&&"#"!==r&&"$"!==r){if(","===r&&i)i=!1;else if(" "!==r)break;n++}else{if(-1===(o=a(n)))return-1;if(":"!==e[o.end]||(0,h.isNullOrUndefined)(o.num))t.row.push(o),n=o.end;else{for(n=o.end+1;" "===e[n];)n++;if(-1===(s=a(n))||(0,h.isNullOrUndefined)(s.num))return-1;t.row.push([o,s]),n=s.end}i=!0}return t.gEt=u,!1===i?-1:n},l.prototype.jEt=function(t,i,n){var r,e,u;function o(t){for(var n=t;"]"!==i[n];)n++;return{str:i.substring(t,n),end:n}}function s(t){for(var n=t;"."!==i[n]&&"]"!==i[n];)n++;return{str:i.substring(t,n),end:n}}for(r=null;n<i.length;)if("["!==(e=i[n])||r){if("]"===e)break;if(" "===e)n++;else if("."===e&&r)n++,r=!1;else{if("."===e||r)return-1;u=s(n),t.field.push(u.str),n=u.end,r=!0}}else{if((u=o(n+1)).end<=n+1)return-1;t.field.push(u.str),n=u.end+1,r=!0}return n===i.length-1?n:-1},l.prototype.unparse=function(){return!1},n.DataManagerTokenResolver=l},"./dist/src/dataManager.entry.js":function(t,n,i){"use strict";var r,e,r=this&&this.__createBinding||(Object.create?function(t,n,i,r){void 0===r&&(r=i);var e=Object.getOwnPropertyDescriptor(n,i);e&&("get"in e?n.__esModule:!e.writable&&!e.configurable)||(e={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(t,r,e)}:function(t,n,i,r){t[r=void 0===r?i:r]=n[i]}),e=this&&this.__exportStar||function(t,n){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(n,i)||r(n,t,i)};Object.defineProperty(n,"__esModule",{value:!0}),e(i("./dist/src/dataSource/dataSource.entry.js"),n),e(i("./dist/src/table/table.entry.js"),n),e(i("./dist/src/viewField/viewField.entry.js"),n),e(i("./dist/src/view/view.entry.js"),n),e(i("./dist/src/interfaces/interface.js"),n),e(i("./dist/src/interfaces/styleOptions.js"),n),e(i("./dist/src/interfaces/validatorOptions.js"),n),e(i("./dist/src/interfaces/conditionalFormatOptions.js"),n),e(i("./dist/src/dataManager.js"),n),e(i("./dist/src/query.js"),n)},"./dist/src/dataManager.js":function(t,n,i){"use strict";var r,e,u,o,s,f,c,a,h,v,l,d;function p(t){this.rV={},this.tables={},this.relationships=[],this.OEt={},t=t||new r.CalcService,this.updateCalcService(t),(0,f.addCustomFunctions)()}function j(t){return t instanceof u.View}Object.defineProperty(n,"__esModule",{value:!0}),n.isView=n.DataManager=void 0,r=i("CalcEngine"),e=i("./dist/src/table/table.js"),u=i("./dist/src/view/view.js"),o=i("./dist/src/dataSource/utils.js"),s=i("./dist/src/dataSource/dataSource.js"),f=i("./dist/src/calculation/functions/functions.entry.js"),c=i("./dist/src/calculation/tokenResolver.js"),a=i("./dist/src/calculation/queryFunctionResolver.js"),h=i("./dist/src/relationship.js"),v=null,l=r.Convert.LE,p.prototype.addTable=function(t,n){var n=new e.Table(t,n);return(this.tables[t]=n).REt(this),n},p.prototype.removeTable=function(t){for(var n,i,r,n=this.tables[t],i=this.relationships,r=i.length-1;0<=r;r--)i[r].sourceTable!==n&&i[r].targetTable!==n||(i[r].VP(),i.splice(r,1));n.REt(v),delete this.tables[t]},p.prototype.addRelationship=function(t,n,i,r,e,u){var t=new h.Relationship(t,n,i,r,e,u);return this.relationships.push(t),t},p.prototype.removeRelationship=function(t){for(var n,i,n=this.relationships,i=0;i<n.length;i++)if(n[i].sourceRelationshipName===t){n[i].VP(),n.splice(i,1);break}},p.prototype.updateCalcService=function(t){for(var n,i,r,e,u,n,i=!0,r=0,e=t.getResolvers();r<e.length;r++)if((u=e[r])instanceof c.DataManagerTokenResolver){i=!1;break}i&&t.addResolver(new c.DataManagerTokenResolver(8e3)),this.Lp=t},p.prototype.xEt=function(t,n,i){var r,e;return l(t)?t=t.getValueByIndex(0):(0,o.isString)(t)||(t=""+t),(0,o.isString)(n)?n=[n]:l(n)?n=n.toArray(0,!0):n&&n.array&&(n=n.array[0]),r=t+"-"+(n&&n.join(",")),e=(e=this.OEt[r])||(this.OEt[r]=a.QueryFunctionSolver.parseParam(t,n,i,this))},p.prototype.IEt=function(t,n,i,r){var t,n;function e(){r()}return t=this.xEt(t,n,i),!0===r&&t.table._dataSource.unbind(s.ONCHANGE,e),r&&t.table&&t.table._dataSource.bind(s.ONCHANGE,e),n=0===(n=t.getValue?t.getValue(t.table):[[]]).length?[[]]:n},p.prototype.toJSON=function(){var t,n,i,r,t=this.tables,n=[];for(i in t)t.hasOwnProperty(i)&&n.push(t[i].toJSON());return{tables:n,relationships:r=this.relationships.map(function(t){return{sourceTableName:t.sourceTable.name,sourceFieldName:t.sourceFieldName,sourceRelationshipName:t.sourceRelationshipName,targetTableName:t.targetTable.name,targetFieldName:t.targetFieldName,targetRelationshipName:t.targetRelationshipName}})}},p.prototype.fromJSON=function(t){for(var n,i,r,e,u,o,s,f,c,o,a,h,v,l,d,p,n=this.tables={},i,r=0,e=t.tables;r<e.length;r++){if(s=(o=(u=e[r]).dataSourceOption.schema)&&o.columns)for(f in s)s.hasOwnProperty(f)&&(c=s[f])&&"date"===c.dataType&&Array.isArray(c.lookup)&&(c.lookup=c.lookup.map(function(t){return new Date(t)}));(o=this.addTable(u.name,u.dataSourceOption)).BEt=!0,o.fromJSON(u)}for(this.relationships=[],h=0,v=a=t.relationships;h<v.length;h++)d=n[(l=v[h]).sourceTableName],p=n[l.targetTableName],this.addRelationship(d,l.sourceFieldName,l.sourceRelationshipName,p,l.targetFieldName,l.targetRelationshipName)},n.DataManager=p,n.isView=j},"./dist/src/dataSource/dataReader/BasicReader.js":function(t,n,i){"use strict";var e,u,r;function o(t){var n,i,r,t,n=this;n.LEt=t,(0,e.isNullOrUndefined)(t)||(n.Pq=t.Pq,i=t.dataPath,r=t.countPath,t=t.parse,(0,e.isFunction)(i)?n.FEt=i:n.FEt=function(t){return(0,e.isString)(i)&&i?(0,e.q$)(t,i):t},(0,e.isFunction)(r)?n.PEt=r:n.PEt=function(t){return(0,e.isString)(r)&&r?parseInt((0,e.q$)(t,r),10):u},(0,e.isFunction)(t)&&(n.parse=t))}Object.defineProperty(n,"__esModule",{value:!0}),n.BasicReader=void 0,e=i("./dist/src/dataSource/utils.js"),u=void 0,o.prototype.parse=function(t){return this.GEt=t,Promise.resolve(t)},o.prototype.read=function(t){return Promise.resolve(this.FEt(t))},o.prototype.readSync=function(t){return this.FEt(t)},o.prototype.total=function(t){return this.PEt(t)},n.BasicReader=o},"./dist/src/dataSource/dataReader/ColumnJsonReader.js":function(t,n,i){"use strict";var r,e,h,u,o,s;function f(t){var n,c,a,n=s.call(this,t)||this,c=n,a=t.dataPath;return(0,h.isFunction)(a)?c.FEt=a:c.FEt=function(t){var n,i,r,e,u,o,s,f;for(t=(0,h.isString)(a)?(0,h.q$)(t,a):t,n=c.Pq=c.Pq||(0,h.keys)(t),i=c.GEt=[],r=t[n[0]].length,e=0;e<r;e++){for(u={},o=0,s=n;o<s.length;o++)u[f=s[o]]=t[f][e];i.push(u)}return i},n}r=this&&this.__extends||(o=function(t,n){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),Object.defineProperty(n,"__esModule",{value:!0}),n.ColumnJsonReader=void 0,e=i("./dist/src/dataSource/dataReader/BasicReader.js"),h=i("./dist/src/dataSource/utils.js"),s=e.BasicReader,r(f,s),f.prototype.parse=function(e){var u=this;return new Promise(function(t,n){var i,r;(0,h.isNullOrUndefined)(e)&&n("value cannot be null or empty"),i=u.Pq=u.Pq||(0,h.keys)(e),(r=(0,h.reduce)(i,function(t,n){return t&&(0,h.isArray)(e[n])},!0))||n("The value of each property in column JSON should be an array"),t(e)})},n.ColumnJsonReader=f},"./dist/src/dataSource/dataReader/CsvReader.js":function(t,n,i){"use strict";var r,e,v,u,o,s;function f(t){var n=s.call(this,t)||this;return n.UEt=t.delimiter||['"'],n.HEt=t.separator||",",n}r=this&&this.__extends||(o=function(t,n){return(o=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}o(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),Object.defineProperty(n,"__esModule",{value:!0}),n.CsvReader=void 0,e=i("./dist/src/dataSource/dataReader/BasicReader.js"),v=i("./dist/src/dataSource/utils.js"),s=e.BasicReader,r(f,s),f.prototype.parse=function(t){for(var n,i,r,e,u,o,s,f,c,a,h,n=this,i=n.UEt,r=n.HEt,e=t.split(""),u=0,o=e.length,s=[];u<o;){for(a=[];u<o&&"\r"!==e[u]&&"\n"!==e[u];){if(f=c=u,-1<(0,v.indexOf)(i,e[u])){for(f=c=++u;u<o;){if(-1<(0,v.indexOf)(i,e[u])){if(-1===(0,v.indexOf)(i,e[u+1]))break;e[++u]=""}c=++u}for(-1<(0,v.indexOf)(i,e[u])&&++u;u<o&&"\r"!==e[u]&&"\n"!==e[u]&&r!==e[u];)++u}else for(;u<o&&"\r"!==e[u]&&"\n"!==e[u]&&r!==e[u];)c=++u;a.push(e.slice(f,c).join("")),r===e[u]&&++u}"\r"!==e[u]&&"\n"!==e[u]||++u,0<a.length&&s.push(a)}return h=s.shift(),n.GEt=(0,v.isNullOrUndefined)(n.Pq)?(0,v.map)(s,function(t){return(0,v.zipObject)(h,t)}):(0,v.map)(s,function(t){return(0,v.pick)((0,v.zipObject)(h,t),n.Pq)}),n.Pq=n.Pq||h,Promise.resolve(n.GEt)},n.CsvReader=f},"./dist/src/dataSource/dataReader/JsonReader.js":function(t,n,i){"use strict";var r,i,e,u,o;function s(t){return o.call(this,t)||this}r=this&&this.__extends||(u=function(t,n){return(u=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}u(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),Object.defineProperty(n,"__esModule",{value:!0}),n.JsonReader=void 0,i=i("./dist/src/dataSource/dataReader/BasicReader.js"),o=i.BasicReader,r(s,o),n.JsonReader=s},"./dist/src/dataSource/dataReader/XmlReader.js":function(t,n,i){"use strict";var r,e,u,o,s,f;function c(t){var i,r,e,i=f.call(this,t)||this,r=i,e=t.dataPath;return(0,u.isFunction)(e)?r.FEt=e:r.FEt=function(t){var n;return t=(0,u.isString)(e)?(0,u.q$)(t,e):t,(0,u.isNullOrUndefined)(t)||((n=r.Pq)?t=t.map(function(t){return(0,u.pick)(t,n)}):i.Pq=(0,u.keys)(t[0])),t},i}r=this&&this.__extends||(s=function(t,n){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}s(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),Object.defineProperty(n,"__esModule",{value:!0}),n.XmlReader=void 0,e=i("./dist/src/dataSource/dataReader/BasicReader.js"),u=i("./dist/src/dataSource/utils.js"),f=e.BasicReader,r(c,f),c.prototype.parse=function(t){var n,t,t,n,t=(new DOMParser).parseFromString(t.trim(),"text/xml"),t=this.documentToJSObject(t);return Promise.resolve(t)},c.prototype.documentToJSObject=function(t){for(var n,i,r,e,n={},i=t.children,r=0,e=i.length;r<e;r++)this.elementToJSObject(i[r],n);return n},c.prototype.elementToJSObject=function(t,n){var i,r,e,u,o,s,f,c,i=t.children,r=i.length,e=t.nodeName;if(0===r)n[e]=t.textContent;else{for(u={},void 0!==(o=n[e])?Array.isArray(o)?n[e].push(u):n[e]=[o,u]:n[e]=u,s=t.attributes,f=0;f<s.length;f++)u[(c=s[f]).nodeName]=c.nodeValue;for(f=0;f<r;f++)this.elementToJSObject(i[f],u)}},n.XmlReader=c},"./dist/src/dataSource/dataSource.entry.js":function(t,n,i){"use strict";var r,e,r=this&&this.__createBinding||(Object.create?function(t,n,i,r){void 0===r&&(r=i);var e=Object.getOwnPropertyDescriptor(n,i);e&&("get"in e?n.__esModule:!e.writable&&!e.configurable)||(e={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(t,r,e)}:function(t,n,i,r){t[r=void 0===r?i:r]=n[i]}),e=this&&this.__exportStar||function(t,n){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(n,i)||r(n,t,i)};Object.defineProperty(n,"__esModule",{value:!0}),e(i("./dist/src/dataSource/dataSource.js"),n),e(i("./dist/src/dataSource/dataSource.interface.js"),n),e(i("./dist/src/dataSource/utils.js"),n)},"./dist/src/dataSource/dataSource.interface.js":function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0})},"./dist/src/dataSource/dataSource.js":function(D,l,t){"use strict";var n,v,i,r,c,e,u,o,s,b,f,d,w,p,j,y,m,g,a,h,k,_,L,O,S;function C(t){return"".concat(h).concat(t)}function F(t){return"string"==typeof t&&-1<t.indexOf(h)}function R(t){return F(t)?w:t}function M(t,n){var i=n;return"odata"!==t&&"odata4"!==t||!n.value?"graphql"!==t&&"rest"!==t||!n.data||(i=n.data):i=n.value,i}function I(t,n){var i,r,e,i={};for(r in t)t.hasOwnProperty(r)&&(e=n[r],i[r]=(0,b.isNullOrUndefined)(e)?t[r]:e);return i}function x(t,n,i,r,e){var u,o,s,f,c,a,h;for("string"==typeof i?u=o=i:(u=i.childrenField1||"children",o=i.childrenField2||"children"),s=t[u]||[],f=n[o]||[],c=0;c<s.length;c++)a=s[c],h=f[c],r&&r(a,h,t,n),x(a,h,i,r,e),e&&e(a,h,t,n)}function E(t,n){var i,r,e,u,o;if((0,b.isNullOrUndefined)(t)||(0,b.isNullOrUndefined)(n))return t===n;if(i=(0,b.keys)(t),r=(0,b.keys)(n),i.length===r.length){for(e=0,u=i;e<u.length;e++)if(t[o=u[e]]!==n[o])return;return 1}}function P(t,n){for(var i,r,e,u,i=[],r=0;r<n;r++){for(u in e={},t)t.hasOwnProperty(u)&&(e[u]=t[u].data[r]);i[r]=e}return i}function T(t){return"xml"===t?"xml":"csv"===t?"text":"json"}function q(t){var n,n,t,i,i,i,i,i,n=null==(n=t.schema)?void 0:n.type,t=t.remote;n&&t&&((i=t.read)&&"object"==typeof i&&(i.dataType=T(n)),(i=t.update)&&"object"==typeof i&&(i.dataType=T(n)),(i=t.delete)&&"object"==typeof i&&(i.dataType=T(n)),(i=t.create)&&"object"==typeof i&&(i.dataType=T(n)),i=t.batch)&&"object"==typeof i&&(i.dataType=T(n))}function B(){}function A(t){var n,i,n=S.call(this)||this;return n.R1t=[],(i=n)._data=t.data,i.zEt=t.isRoot,i.VEt=t.getData,i.YEt=t.getFieldData,i.ZEt=t.idField,i.WEt=!(0,b.isNullOrUndefined)(t.idField),i.QEt=t.sequenceField,i.KEt=!(0,b.isNullOrUndefined)(t.sequenceField),Object.defineProperty(i,"data",{get:function(){return i.VEt(i.lp)}}),Object.defineProperty(i,"isRoot",{get:function(){return i.zEt}}),Object.defineProperty(i,"id",{get:function(){var t;return i.WEt?(t=i.YEt(i.ZEt,i.lp),(0,b.isNullOrUndefined)(t)?t=i._id:i._id!==t&&(i._id=t),t):i._id},set:function(t){i._id=t,(0,b.isNullOrUndefined)(i.JEt)&&(i.JEt=t)}}),Object.defineProperty(i,"parentId",{get:function(){return(0,b.isNullOrUndefined)(i.parent)?w:i.parent.id}}),Object.defineProperty(i,"parent",{get:function(){return i.sft},set:function(t){i.setParent(t),(0,b.isNullOrUndefined)(i.XEt)&&!(0,b.isNullOrUndefined)(t)&&(i.XEt=t.id)}}),Object.defineProperty(i,"level",{get:function(){return i.YAt},set:function(t){i.YAt=t}}),Object.defineProperty(i,"children",{get:function(){return i.R1t},set:function(t){i.R1t=t}}),Object.defineProperty(i,"sequence",{get:function(){return i.KEt?i.YEt(i.QEt,i.lp):i.qEt},set:function(t){i.qEt=t,(0,b.isNullOrUndefined)(i.$Et)&&(i.$Et=t)}}),n}function N(t){this.tjt={},this.njt=[],this.ejt=!0,this.wue=!1;var s=this;Object.defineProperty(this,"options",{get:function(){return s.LEt},set:function(t){var n,i,r,e,n,u,n,o;q(t),n=s.LEt,s.LEt=t,e=(i=n&&n.remote&&n.remote.read&&n.remote.read.url)!==(r=t&&t.remote&&t.remote.read&&t.remote.read.url),s.ijt(t.remote,t.data),n=n&&n.schema,u=t&&t.schema,(n=n&&u&&(n.type!==u.type||n.dataPath!==u.dataPath||n.countPath!==u.countPath))&&s.rjt(t.schema),(o=s.ojt)&&(e||n)&&(s.ajt(),s.load())}}),s._events={},s.options=v({data:d,batch:!1},t),this.ijt(t.remote,t.data),s.bind([p,y,m,l.ONCHANGE,j],t),this.rjt(t.schema),s.ajt()}n=this&&this.__extends||(O=function(t,n){return(O=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}O(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),v=this&&this.__assign||function(){return(v=Object.assign||function(t){for(var n,i,r,e,i=1,r=arguments.length;i<r;i++)for(e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},Object.defineProperty(l,"__esModule",{value:!0}),l.DataSource=l.HierarchyNode=l.ONCHANGE=l.DELETE=l.UPDATE=l.INSERT=l.CREATE=void 0,i=t("./dist/src/dataSource/dataTransport/localDataTransport.js"),r=t("./dist/src/dataSource/dataTransport/remoteDataTransport.js"),c=t("./dist/src/dataSource/event.js"),e=t("./dist/src/dataSource/dataReader/JsonReader.js"),u=t("./dist/src/dataSource/dataReader/ColumnJsonReader.js"),o=t("./dist/src/dataSource/dataReader/CsvReader.js"),s=t("./dist/src/dataSource/dataReader/XmlReader.js"),b=t("./dist/src/dataSource/utils.js"),f=t("Common"),d=null,w=void 0,l.CREATE="create",l.INSERT="insert",l.UPDATE="update",l.DELETE="delete",p="onBeforeSend",j="onFailed",y="onBeforeEnd",m="onReady",g="user cancel the request at step ",l.ONCHANGE="onChange",a=Number.NaN,h="__HIERARCHY__",n(A,S=B),A.prototype.sjt=function(){return this.qEt},A.prototype.setParent=function(t,n){var i=!(0,b.isNullOrUndefined)(this.parent);i&&this.parent.cjt(this),this.sft=t,(0,b.isNullOrUndefined)(t)?i&&(this.level=a):(this.level=t.level+1,(0,b.isNullOrUndefined)(n)?t.fjt(this):t.ljt(this,n))},A.prototype.updateChildrenLevel=function(){var n=this.level;this.children.forEach(function(t){t.level=n+1,t.updateChildrenLevel()})},A.prototype.promote=function(t){this.setParent(t,this.parent.getCurrentIndex()+1),this.updateChildrenLevel()},A.prototype.demote=function(n,t){this.parent=n,(t=!1!==t)?this.updateChildrenLevel():this.children.forEach(function(t){t.parent=n})},A.prototype.getCurrentIndex=function(){return this.parent.children.indexOf(this)},A.prototype.getPrevSibling=function(){return this.parent.children[this.getCurrentIndex()-1]},A.prototype.getNextSibling=function(){return this.parent.children[this.getCurrentIndex()+1]},A.prototype.ljt=function(t,n){this.children.splice(n,0,t)},A.prototype.fjt=function(t){this.children.push(t)},A.prototype.cjt=function(t){var t=this.children.indexOf(t);this.children.splice(t,1)},A.prototype.getChildrenIndexes=function(t){var n=[];return(0,b.traversalTree)(this,{invoked:function(t){n.push(t.lp)}},t?function(t){return-t.sequence}:w),n},A.prototype.getFieldValue=function(t){return this.YEt(t,this.lp)},_=A,l.HierarchyNode=_,N.prototype.ijt=function(t,n){this.hjt=t?new r.RemoteDataTransport(t):new i.LocalDataTransport({data:n||[]})},N.prototype.rjt=function(t){var n,i;"json"===(i=(t=t||{}).type||"json")?n=new e.JsonReader(t):"columnJson"===i?n=new u.ColumnJsonReader(t):"csv"===i?n=new o.CsvReader(t):"xml"===i&&(n=new s.XmlReader(t)),this.djt=n},N.prototype.ajt=function(){this._data={},this.vjt=0,this.DEt=[]},N.prototype.mjt=function(t,n,i){var r,e,u,o,s,r=this,e={};for(u in r._data)r._data.hasOwnProperty(u)&&(o=r._data[u],0!==n?(s=o.data.splice(t,n),e[u]={data:s}):t>=o.data.length?o.data[t]=i[u]:o.data.splice(t,0,i[u]));return r.vjt=r.vjt-n,i&&r.vjt++,P(e,n)},N.prototype.gjt=function(t,n){var i,r,e,u,i=this,r={};for(e in i._data)i._data.hasOwnProperty(e)&&(u=i._data[e],r[e]={data:u.data.slice(t,n)});return P(r,n-t)},N.prototype.pjt=function(t,n,i){var r,e;if(!(0,b.isNullOrUndefined)(n))if(r=this,i)for(e in n)Object.prototype.hasOwnProperty.call(r._data,e)&&(r._data[e].data[t]=n[e]);else for(e in r._data)r._data.hasOwnProperty(e)&&(r._data[e].data[t]=n[e])},N.prototype.bjt=function(t){var n,i,r,n=this,i={};for(r in n._data)n._data.hasOwnProperty(r)&&(i[r]=n._data[r].data[t]);return i},N.prototype.yjt=function(t){var t,n,i;return!(!t||!t.reload)||(n=(t=this).wjt,0===(i=t.vjt))||((0,b.isNullOrUndefined)(n),!1)},N.prototype.Mjt=function(t,n){var i,r,i=this.tjt;return i[t]||(r=void 0,n?r=f.Common.ct.yU(t,n):(r=new Date(t),isNaN(r)&&(r=new Date(t.replace(" ","T")))),i[t]=r),i[t]},N.prototype.Cjt=function(t,n){return n?0===n.split("|").indexOf(t):!!t},N.prototype.Sjt=function(t,n){return+(t=(t=n?t.replace(n,"."):t).replace(/,/g,""))||0},N.prototype.Tjt=function(t,n,i,r){if("rowOrder"===n)return t;if(r){if(!n||"number"===n)return t;t+=""}return"date"===n?"NULL"===t||""===t?null:this.Mjt(t,i):"boolean"===n?this.Cjt(t,i):"number"===n?this.Sjt(t,i):t},N.prototype.Ajt=function(t,n){var i="number"==typeof t;return(0,b.isNullOrUndefined)(n)||(0,b.isNullOrUndefined)(t)||"string"!=typeof t&&!b.isNumber?t:this.Tjt(t,n.dataType,n.dataPattern,i)},N.prototype.Ijt=function(t,n){var i,r,e,u;for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&(u="number"==typeof(e=n[i]),(0,b.isNullOrUndefined)(e)||"string"!=typeof e&&!u||(n[i]=this.Tjt(e,r.dataType,r.dataPattern,u)))},N.prototype.xjt=function(t,n,i){for(var r,e,u,o,r=this._data[t].data,e=0;e<r.length;e++)o="number"==typeof(u=r[e]),(0,b.isNullOrUndefined)(u)||"string"!=typeof u&&!o||(r[e]=this.Tjt(u,n,i,o));this.isHierarchy()&&"rowOrder"===n&&(this.ejt=!0)},N.prototype.Njt=function(t,n){var i,r;t===n||(0,b.isNullOrEmpty)(n)||((i=this)._data[n]=i._data[t],delete i._data[t],r=i.kjt(t),i.Djt(t,(0,b.isNullOrEmpty)(r)?t:r,n))},N.prototype.kjt=function(t){var n,i=this.LEt.schema,r,i,e;if(!((0,b.isNullOrUndefined)(i)||(0,b.isNullOrUndefined)(i.columns)||(i=(r=i.columns)[t],(0,b.isNullOrUndefined)(i))||(e=i.dataName,(0,b.isNullOrEmpty)(e))))return e},N.prototype.Djt=function(t,n,i){var r=this,e=r.LEt.schema,r,e;(0,b.isNullOrUndefined)(e)&&(r.LEt.schema=e={}),r=e.columns,(0,b.isNullOrUndefined)(r)&&(e.columns=r={}),e=r[t],(0,b.isNullOrUndefined)(e)&&(r[t]=e={}),(0,b.isNullOrEmpty)(e.dataName)&&(e.dataName=n),(0,b.isNullOrEmpty)(i)||(r[i]=r[t],delete r[t])},N.prototype._jt=function(t){var n;return t=this.Ejt(t,{isServerToClient:!0})},N.prototype.jjt=function(t){var n=this;return t=(0,b.clone)(t,!0),n.Ojt(t),t=n.Ejt(t)},N.prototype.Ejt=function(t,n){var i,r,e,n,u,o,s,r=(i=this).LEt.schema,e=(n=n||{}).isServerToClient,n=n.isClone;if(!(0,b.isNullOrUndefined)(t)&&!(0,b.isNullOrUndefined)(r)&&!(0,b.isNullOrUndefined)(r.columns)){for(s in u=r.columns,o=[],u)(0,b.isNullOrUndefined)(u[s].dataName)||u[s].dataName===s||o.push(e?[u[s].dataName,s]:[s,u[s].dataName]);0<o.length&&(t=n?(0,b.clone)(t,!0):t,(0,b.isArray)(t)?t.forEach(function(t){i.Rjt(o,t)}):(0,b.isObject)(t)&&i.Rjt(o,t))}return t},N.prototype.Rjt=function(t,i){t.forEach(function(t){var n=t[0],t=t[1];i[t]=i[n],delete i[n]})},N.prototype.Bjt=function(){var t,n,i,r,e,u,t,n=this.LEt.schema;if((0,b.isNullOrUndefined)(n)||(0,b.isNullOrUndefined)(n.columns))return[{},{}];for(u in r={},e={},i=n.columns)i.hasOwnProperty(u)&&((0,b.isNullOrUndefined)(i[u].dataName)||(r[i[u].dataName]=u),i[u].dataType||i[u].dataPattern)&&(e[u]={dataType:i[u].dataType,dataPattern:i[u].dataPattern});return[r,e]},N.prototype.Ljt=function(){var t,n,i,r,e,u,t,n=this.LEt.schema,i=[];if(!(0,b.isNullOrUndefined)(n)&&!(0,b.isNullOrUndefined)(n.columns))for(e in r=n.columns)r.hasOwnProperty(e)&&(u=r[e]).isPrimaryKey&&i.push(e);return i},N.prototype.Ojt=function(t){var n,i,n,r,n=this;!(0,b.isNullOrUndefined)(t)&&n.isHierarchy()&&"Level"===n.Fjt()&&(i=n.Pjt(),(0,b.isNumber)(i))&&(r=t[n=n.Gjt()],t[n]=r-i)},N.prototype.Ujt=function(i){var t,n;return this.njt.map(function(t,n){t.lp=n,i||(t.sequence=n+1);var n=t._data;return t._data=w,n})},N.prototype.Hjt=function(t){var n=this,i=n.zjt,r=n.njt=[];return(0,b.traversalTree)(i,function(t){t.level=t.parent.level+1,r.push(t)},t?{isOrderChildren:!0,getValue:function(t){return t.qEt}}:w),n.Ujt(t)},N.prototype.Vjt=function(t,n,i,r,e){var u,o,s,f,c,a,h,v,l,d,p,j,u=this,o=!(0,b.isNullOrEmpty)(r),s=n,f=r;for(n=u.Yjt(n),i=u.Yjt(i),r=u.Yjt(r),c={},a=0;a<t.length;a++)h=t[a],v=new _(u.Zjt({data:h,idField:s,sequenceField:f})),l=h[n],c[v.id=l]=v,o&&(v.sequence=h[r]);for((d=new _({isRoot:!0})).level=e-1,a=0;a<t.length;a++)l=t[a][n],p=t[a][i],v=c[l],(0,b.isNullOrUndefined)(j=c[p])?(d.id=p,v.parent=d):v.parent=j;return u.zjt=d,u.Hjt(o)},N.prototype.Wjt=function(t,n,i,r,e){var u,o,s,f,c,a,h,v,l,d,p,j,y,u=this,o=!(0,b.isNullOrEmpty)(r),s=n,f=r;for(n=u.Yjt(n),i=u.Yjt(i),r=u.Yjt(r),c=w,a=0;a<t.length;a++)((h=t[a][i])<c||c===w)&&(c=h);for((v=u.zjt=new _({isRoot:!0})).level=c+e-1,l=[v],a=0;a<t.length;a++){for(d=t[a],p=new _(u.Zjt({data:d,idField:s,sequenceField:f})),j=(0,b.isNullOrEmpty)(n)?C(a):d[n],h=d[i]+e,p.id=j,o&&(p.sequence=d[r]),y=l[l.length-1];y.level>=h;)y=l.pop().parent;p.parent=y,l.push(p)}return u.Hjt(o)},N.prototype.Qjt=function(t,i,n,r,e){var e,u,o,s,f,c,a,h,u=this,o=u.njt=[],s=!(0,b.isNullOrEmpty)(r),f=i,c=r;return i=u.Yjt(i),n=u.Yjt(n),r=u.Yjt(r),(a=u.zjt=new _({isRoot:!0})).level=e-1,h=[a],(0,b.traversalTree)(((e={})[n]=t,e),{invoking:function(t){var n=new _(u.Zjt({data:t,idField:f,sequenceField:c}));n.id=(0,b.isNullOrEmpty)(i)?C(o.length):t[i],s&&(n.sequence=t[r]),n.parent=h[h.length-1],o.push(n),h.push(n)},invoked:function(){h.pop()}},s?r:w,n),u.Ujt(s)},N.prototype.Kjt=function(t,n,i,r,e,u){var o,s,f,c,a,h,v,l,d,p,j,y,y,o=this,s=!(0,b.isNullOrEmpty)(e),f=n,c=e;for(n=o.Yjt(n),i=o.Yjt(i),e=o.Yjt(e),a={},h=0;h<t.length;h++)v=t[h],l=new _(o.Zjt({data:v,idField:f,sequenceField:c})),d=v[i],l.id=(0,b.isNullOrEmpty)(n)?C(h):v[n],a[d]=l,s&&(l.sequence=v[e]);for(p=o.Bjt(),(j=new _({isRoot:!0})).level=u-1,h=0;h<t.length;h++)l=a[d=t[h][i]],y=r(o.Jjt(t[h],p,h)),(0,b.isNullOrUndefined)(y=a[y])?l.parent=j:l.parent=y;return o.zjt=j,o.Hjt(s)},N.prototype.Jjt=function(o,i,t){var s=this,t={index:t};return Object.defineProperty(t,"data",{get:function(){var r,e,u,t,n,r=i[0],e=i[1],u={},t=function(t){var n,i;o.hasOwnProperty(t)&&(n=o[t],i=r[t]||t,Object.defineProperty(u,i,{get:function(){return s.Ajt(n,e[i])}}))};for(n in o)t(n);return u}}),t},N.prototype.Zjt=function(t){var n=this;return{data:t.data,idField:t.idField,sequenceField:t.sequenceField,getData:n.bjt.bind(n),getFieldData:n.Xjt.bind(n)}},N.prototype.qjt=function(t){var n,i,r,e,n,u,o,s,f,c,a,h,v,e,i=this,r=i.LEt.schema;return i.isHierarchy()&&(e=r.hierarchy.type.trim(),n=null==(n=r.hierarchy.column)?void 0:n.trim(),u=r.hierarchy.levelOffset||0,o=i.Ljt(),s=i.$jt(t),"Parent"===e?(f=o[0],t=i.Vjt(t,f,n,s,u)):"Level"===e?(f=o[0],t=i.Wjt(t,f,n,s,u)):"ChildrenPath"===e?(f=o[0],t=i.Qjt(t,f,n,s,u)):"Custom"===e&&(f=o[0],e=r.hierarchy.parse,t=i.Kjt(t,f,n,e,s,u)),i.t7t(),i.ejt=!1),t},N.prototype.t7t=function(){var t,n,i,r,e,t=this,n=t.$jt(),i=t.njt.slice();for((0,b.isNullOrEmpty)(n)||i.sort(function(t,n){return t.sjt()-n.sjt()}),r=0;r<i.length;r++)(e=i[r]).prev=i[r-1],e.next=i[r+1]},N.prototype.$jt=function(t){var n,i,r,e,u,n=this,i=n.LEt.schema;if(!(0,b.isNullOrUndefined)(i)&&!(0,b.isNullOrUndefined)(i.columns))for(e in r=i.columns)if(Object.prototype.hasOwnProperty.call(r,e)&&"rowOrder"===(u=r[e]).dataType&&(u.n7t||n.e7t(e,t)))return u.n7t=!0,e},N.prototype.e7t=function(t,n){var i,r,e;if(!(0,b.isNullOrUndefined)(t)&&(0,b.isArray)(n)){if(0===n.length)return!0;for(t=(i=this).Yjt(t),r=0;r<n.length;r++)if(e=n[r][t],!(0,b.isNullOrUndefined)(e))return(0,b.isNumber)(e)}},N.prototype.qX=function(){var t=this;return!(!t.isHierarchy()||"Parent"===t.Fjt()&&(0,b.isNullOrUndefined)(t.$jt()))},N.prototype.i7t=function(){return this.options.schema.hierarchy.summaryFields},N.prototype.Pjt=function(){return this.options.schema.hierarchy.levelOffset},N.prototype.r7t=function(){return this.options.schema.hierarchy.unparse},N.prototype.Gjt=function(){return this.options.schema.hierarchy.column},N.prototype.Fjt=function(){return this.options.schema.hierarchy.type},N.prototype.o7t=function(){var t,n;return this.Ljt()[0]},N.prototype.isHierarchy=function(){var t,t,n,n=this.options.schema;return!(0,b.isNullOrUndefined)(n)&&!(0,b.isNullOrUndefined)(n.hierarchy)&&!(0,b.isNullOrUndefined)(null==(t=n.hierarchy.type)?void 0:t.trim())&&!(0,b.isNullOrUndefined)(null==(t=n.hierarchy.column)?void 0:t.trim())&&("Custom"!==n.hierarchy.type||(0,b.isFunction)(n.hierarchy.parse)&&(0,b.isFunction)(n.hierarchy.unparse))},N.prototype.a7t=function(){return this.ejt},N.prototype.u7t=function(){this.ejt=!0},N.prototype.SEt=function(t){var n=this;return t=n.s7t(t),n.c7t(t)},N.prototype.c7t=function(t){var n,i;return this.njt[t]},N.prototype.f7t=function(){return this.zjt},N.prototype.l7t=function(t){var n,i=this.i7t();if(!(0,b.isNullOrUndefined)(i))return i[t]},N.prototype.h7t=function(t,n){var i,t,i,i=this,t=i.l7t(t);if(!(0,b.isNullOrEmpty)(t)&&(i=i.SEt(n),!(0,b.isNullOrUndefined)(i))&&0<i.children.length)return t},N.prototype.Yjt=function(t){var n,i,r,e,n,i=this.LEt.schema;if(!(0,b.isNullOrUndefined)(i)&&!(0,b.isNullOrUndefined)(i.columns))for(e in r=i.columns)if(e===t)return r[e].dataName||t;return t},N.prototype.d7t=function(t,n,i){var r=this;return r.v7t(i,(0,b.isNumber)(t)?r.s7t(t):t,r.s7t(n))},N.prototype.v7t=function(t,n,i){var r=this,e=r.njt,u=r.$jt(),o,s=function(t){return r.isHierarchy()?r.njt[t].sequence:r._data[u].data[t]};return t?(n=e[i].next&&e[i].next.lp,(0,b.isNullOrUndefined)(n)?(o=s(i),Math.floor(o)===o?o+=.5:o=(o+Math.ceil(o))/2):o=(s(i)+s(n))/2):(n=e[i].prev&&e[i].prev.lp,o=(0,b.isNullOrUndefined)(n)?(o=s(i))<=1?o/2:o-.5:(s(n)+s(i))/2),o},N.prototype.Mue=function(){return this.wue},N.prototype.Cue=function(t){this.wue=t},N.prototype.m7t=function(t,n,i,r){var e,u,o,s,f,c,n,a,h,c,v,l,c,e,u,l,v,o=this,s=o.$jt(),f=o.isHierarchy();if((0,b.isNullOrUndefined)(s)&&!f||n===i||(0,b.isNullOrUndefined)(n)||(0,b.isNullOrUndefined)(i))return!1;if(i=o.s7t(i),r=(0,b.isNumber)(r)?o.s7t(r):r,n=o.s7t(n),h=(a=o.njt)[n],c=a[i],f){if(c.parent!==h.parent)return!1;e=0,(t=(l=(v=h.parent.children).indexOf(h))<(c=v.indexOf(c)))?(e=null==(u=h.getNextSibling())?void 0:u.lp,v.splice(c+1,0,h),v.splice(l,1)):(e=n,v.splice(l,1),v.splice(c,0,h)),"Custom"===o.Fjt()&&o.g7t(e),!(0,b.isNullOrUndefined)(r)&&(u=a[r],l=h.parent===u,v=h.parent.parent===u.parent,l||v)&&(r=w)}return c=o.v7t(t,r,i),f&&(0,b.isNullOrUndefined)(s)&&(h.sequence=c),o.p7t(t,i,n),o.b7t(n,((e={})[s]=c,e)),!0},N.prototype.p7t=function(t,n,i){var r,e,i,r,r=this,e;r.isHierarchy()&&(i=r.c7t((0,b.isNumber)(i)?i:r.njt.length-1),r=r.c7t(n),(0,b.isNullOrUndefined)(i.prev)||(i.prev.next=i.next),(0,b.isNullOrUndefined)(i.next)||(i.next.prev=i.prev),t?(i.prev=r,i.next=r.next,(0,b.isNullOrUndefined)(r.next)||(r.next.prev=i),r.next=i):(i.next=r,i.prev=r.prev,(0,b.isNullOrUndefined)(r.prev)||(r.prev.next=i),r.prev=i))},N.prototype.y7t=function(t,n){var i,r,e,i=this,r;if(i.isHierarchy())for(n=n||1,e=0;e<n;e++)i.w7t(e+t)},N.prototype.w7t=function(t){var n,t=this.c7t(t);(0,b.isNullOrUndefined)(t.prev)||(t.prev.next=t.next),(0,b.isNullOrUndefined)(t.next)||(t.next.prev=t.prev)},N.prototype.M7t=function(t){var n,i,i,r,e,u,o,s,e,n,f,c,a,h;if(this.isHierarchy()&&(e=(r=this).njt,u=r.Gjt(),!(o=e[t=r.s7t(t)]).parent.isRoot)){for(s=r.Fjt(),e=o.parent.children.slice(o.getCurrentIndex()+1),n=o.parent.parent,o.promote(n),"Parent"===s?r.b7t(t,((n={})[u]=R(o.parentId),n)):"Level"===s&&r.C7t(t),f=0,c=e;f<c.length;f++)(a=c[f]).parent=o,h=a.lp,"Parent"===s?r.b7t(h,((i={})[u]=o.id,i)):"Level"===s&&r.b7t(h,((i={})[u]=a.level,i));"Custom"===s&&r.g7t(t)}},N.prototype.S7t=function(t,n){this.T7t(t,n)},N.prototype.T7t=function(t,n,i){var n,n,n,r,e,u,o,i,s,i;this.isHierarchy()&&(n=!1!==n,e=(r=this).njt,u=r.Gjt(),t=i?t:r.s7t(t),i=(o=e[t]).getPrevSibling(),(0,b.isNullOrUndefined)(i)||(s=o.children.slice(),o.demote(i,n),i=r.Fjt(),n?"Parent"===i?r.b7t(t,((n={})[u]=R(o.parentId),n)):"Level"===i?r.C7t(t):"Custom"===i&&r.g7t(t):"Parent"===i?(r.b7t(t,((n={})[u]=R(o.parentId),n)),s.forEach(function(t){var t;r.b7t(t.lp,((t={})[u]=R(o.parentId),t))})):"Level"===i?r.b7t(t,((n={})[u]=e[t].level,n)):"Custom"===i&&r.g7t(t)))},N.prototype.b7t=function(t,n,i,r){this.A7t(t,n,i,r)},N.prototype.A7t=function(t,n,i,r){var e;this.I7t({action:l.UPDATE,index:t,item:n,x7t:!0,N7t:!0}),i&&i({type:l.UPDATE,success:!0})},N.prototype.C7t=function(t,n,i){for(var r,e,u,o,s,f,c,e=this,u=e.njt,o=e.Gjt(),s=u[t].getChildrenIndexes().concat(t),f=0;f<s.length;f++)c=s[f],e.b7t(c,((r={})[o]=u[c].level,r),n,i)},N.prototype.g7t=function(r,e,u){var o=this,s=!1,f=o.Gjt();(0,b.traversalTree)(o.zjt,function(t){var n,i,n,t;(s=r===t.lp?!0:s)&&(n=t.lp,t=o.k7t(t),(0,b.isNullOrUndefined)(t)||o.b7t(n,((n={})[f]=t,n),e,u))})},N.prototype.k7t=function(t){var n,i,r,e,i,r,n=this,i=n.Gjt(),r=n.r7t(),e,i=t.data[i],r=r(n.D7t(t));if(i!==r)return r},N.prototype.D7t=function(t){var n={};return Object.defineProperty(n,"data",{get:function(){return t.data}}),Object.defineProperty(n,"index",{get:function(){return t.getCurrentIndex()}}),Object.defineProperty(n,"parentData",{get:function(){return t.parent.isRoot?d:t.parent.data}}),n},N.prototype._7t=function(t,n,i){var r=this,t=r.c7t(t);return r.E7t(t.parent,n?t.getCurrentIndex():t.getCurrentIndex()+1,i)},N.prototype.j7t=function(t){var n=this,t=n.c7t(t),i=t.getPrevSibling(),n,n=(0,b.isNullOrUndefined)(i)?n.v7t(!1,w,t.lp):n.v7t(!1,i.lp,t.lp);return{sequence:n,offset:0}},N.prototype.O7t=function(t,n){var i,r,n,i=this;return t=i.s7t(t),r=i.j7t(t).sequence,(n=i._7t(t,!0,n)).sequence=r,i.p7t(!1,t),n},N.prototype.R7t=function(t){var n=this,t=n.c7t(t),i=t.getNextSibling(),i,i=(0,b.isNullOrUndefined)(i)?n.v7t(!0,w,t.lp):n.v7t(!0,i.lp,t.lp);return{sequence:i,offset:n.B7t(t)}},N.prototype.L7t=function(t,n){var i,r,n,i=this;return t=i.s7t(t),r=i.R7t(t).sequence,(n=i._7t(t,!1,n)).sequence=r,i.p7t(!0,t),n},N.prototype.F7t=function(t,n){var i,r,n,i=this;return t=i.s7t(t),r=i.j7t(t).sequence,(n=i._7t(t,!0,n)).sequence=r,i.T7t(t,!0,!0),i.p7t(!1,t),n},N.prototype.P7t=function(t){var n,t,i,r,i,i,n=this,t=n.c7t(t),i=t.children,i=0<i.length?(i=i[i.length-1],r=n.v7t(!0,w,i.lp),n.B7t(t)):(r=n.v7t(!0,w,t.lp),1);return{sequence:r,offset:i}},N.prototype.G7t=function(t,n){var i,r,n,i=this;return t=i.s7t(t),r=i.P7t(t).sequence,(n=i._7t(t,!1,n)).sequence=r,i.U7t(i.njt.length-1),i.p7t(!0,t),n},N.prototype.U7t=function(t){var n,t,i,n,t=this.c7t(t),i=t.getPrevSibling();(0,b.isNullOrUndefined)(i)||t.demote(i)},N.prototype.E7t=function(t,n,i){var r,e,u,o,o,r,r=this,e=r.njt,u=r.o7t(),o=r.$jt(),o=new _(r.Zjt({idField:u,sequenceField:o})),r=r.vjt+1;return(0,b.isNullOrUndefined)(i)||(0,b.isNullOrUndefined)(i[u])?o.id=C(r):o.id=i[u],o.lp=r-1,o.setParent(t,n),e.push(o),o},N.prototype.H7t=function(t){var n,i,r,e,u,o,r,n,i,e=this,u=e.$jt(),o=e.Gjt(),r=e.Fjt();return"Parent"===r?((n={})[o]=R(t.parentId),n=n):"Level"===r?((i={})[o]=t.level,n=i):"Custom"===r&&(i=e.k7t(t),(0,b.isNullOrUndefined)(i)||((r={})[o]=i,n=r)),(0,b.isNullOrEmpty)(u)||((n=n||{})[u]=t.sjt()),n},N.prototype.z7t=function(t,n,i){var r,t,e,n,r=this,t=r.SEt(t);return n?(n=t.getNextSibling(),(0,b.isNullOrUndefined)(n)||(e=!1===i?n:t)):e=!1===i?t:t.getPrevSibling(),r.B7t(e)},N.prototype.B7t=function(t){var n,i,r,n=1,i=function(t){return t.children.reduce(function(t,n){return t+i(n)},t.children.length)};return(0,b.isNullOrUndefined)(t)?0:(r=i(t))+1},N.prototype.V7t=function(t){var n=this,t=n.SEt(t);return n.B7t(t)},N.prototype.Y7t=function(t){var n,i,i,n=this;n.isHierarchy()&&(i=n.o7t(),!(0,b.isNullOrUndefined)(i)&&F(t[i])&&(t[i]=w),"Parent"===n.Fjt())&&F(t[i=n.Gjt()])&&(t[i]=w)},N.prototype.Z7t=function(t){var n,i,r,e,u,o,n=this;n.isHierarchy()&&"Parent"===n.Fjt()&&(i=n.o7t(),(0,b.isNullOrUndefined)(i)||(e=(r=n.c7t(t)).children,u=r.id=r.JEt=n.Xjt(i,t),o=n.Gjt(),e.forEach(function(t){var t;t.XEt=u,n.updateItemValues(t.lp,((t={})[o]=u,t))})))},N.prototype.Sue=function(t){for(var n,i,r,e,u,n=[],i,r=0,e=(0,b.keys)(t);r<e.length;r++)t[u=e[r]].spread&&n.push(u);return n},N.prototype.Tue=function(t,n,i){var r,e,u,o,s,f,c,a,h,v,l,r=(0,b.keys)(t);if(0===r.length)return t;for(e={},u=0,o=r;u<o.length;u++)if(f=t[s=o[u]],0<=n.indexOf(s))for(c={},i&&(i[s]=c),v=a=(h=0,b.keys)(f);h<v.length;h++)l=v[h],0<=r.indexOf(l)?(e[s+"_"+l]=f[l],i&&(c[s+"_"+l]=l)):(e[l]=f[l],i&&(c[l]=l));else e[s]=f,i&&(i[s]=s);return e},N.prototype.Aue=function(t,i){var r,n,n,e,r=this,n=r.LEt,n=n&&n.schema&&n.schema.columns;return t=n&&0<(e=r.Sue(n)).length?t.map(function(t,n){return r.Tue(t,e,0===n?i:w)}):t},N.prototype.Iue=function(t){var n,i,i,i,n=this,i=n.LEt,i=i&&i.schema&&i.schema.columns;return t=i&&0<(i=n.Sue(i)).length?n.Tue(t,i):t},N.prototype.xue=function(t,n){var i,r,e,u,o,s,f,c,a,h,v,i=(0,b.keys)(n);if(0===i.length)return t;for(r={},e=0,u=i;e<u.length;e++)if("object"==typeof(s=n[o=u[e]]))for(r[o]=f={},h=c=(a=0,b.keys)(s);a<h.length;a++)f[s[v=h[a]]]=t[v];else"string"==typeof s&&(r[o]=t[s]);return r},N.prototype.Nue=function(t){var n,i,n=this,i=n.kue;return t=i?t&&n.xue(t,i):t},N.prototype.load=function(c){var a,n,h,a=this,n=a.options.remote,h=a.W7t(c);return a.yjt(h)?(a.ojt=!0,a.Q7t(h).then(function(t){var t={type:"read",data:n&&n.read&&!(0,b.isFunction)(n.read)?M(n.read.adapter,t):t};return a.ki(y,t)?Promise.reject({cancel:!0,type:"read",step:p}):a.djt.parse(t.data)}).then(function(t){return a.wjt=a.djt.total(t),a.djt.read(t)}).then(function(t){var n,i,r,e,u,o,s,f;if(a._data=(!c||!c.reload)&&a._data||{},a.vjt=a.vjt||0,a.DEt=(!c||!c.reload)&&a.DEt||[],t){for(t=(0,b.isArray)(t)?t:[t],t=a.qjt(t),a.kue={},t=a.Aue(t,a.kue),n=0,r=(i=a.Bjt())[0],e=i[1],u=0,o=t.length;u<o;u++)for(s in t[u])f=t[u][s],s=r[s]||s,a._data[s]||(a._data[s]={data:[]},a.DEt.push(s)),a._data[s].data[0+u]=a.Ajt(f,e[s]);a.vjt=0+t.length,t=a.K7t(h).data,a.ki(l.ONCHANGE,{action:l.INSERT,index:0,items:t})}return a.wjt=a.vjt,a.ki(m,{type:"read",success:!0,items:t}),t}).catch(function(t){var t=t&&!0===t.cancel?g+t.step:a.J7t(t);return a.ki(m,{type:"read",success:!1,reason:t}),Promise.reject(t)})):Promise.resolve(a.K7t(h).data)},N.prototype.Que=function(t,n){for(var i,r,e,u,o,s,f,c,a,i=[],r=0,e=n.fields;r<e.length;r++)for(s=0,f=o=t[u=e[r]].data;s<f.length;s++)c=f[s],(a={})[n.as]=u,a[n.valueAs]=c,i.push(a);return i},N.prototype.AP=function(t){for(var n,i,r,e,u,o,s,n=[],i,r=0,e=Object.keys(t);r<e.length;r++)for(o=t[u=e[r]].data,s=0;s<o.length;s++)n[s]||(n[s]={}),n[s][u]=o[s];return n},N.prototype.loadSync=function(t,n){var i,r,n,e,n,u,o,s,f,c,a,i=this;if(i.ojt=!0,r=(0,b.isNullOrUndefined)(t)?n?i.AP(i._data):(n=i.hjt.getDataSync(),i.wjt=i.djt.total(n),i.djt.readSync(n)):i.Que(i._data,t),i._data={},i.vjt=0,i.DEt=[],r){for(r=(0,b.isArray)(r)?r:[r],e=0,u=(n=i.Bjt())[0],o=n[1],s=0,f=r.length;s<f;s++)for(c in r[s])a=r[s][c],c=u[c]||c,i._data[c]||(i._data[c]={data:[]},i.DEt.push(c)),i._data[c].data[0+s]=i.Ajt(a,o[c]);return i.vjt=0+r.length,r=i.K7t().data,i.wjt=i.vjt,r}return[]},N.prototype.length=function(){return"number"==typeof this.wjt?this.wjt:this.vjt},N.prototype.setLength=function(t){var n=this,i=n._data,r;n.wjt?this.wjt=t:i&&(this.vjt=t)},N.prototype.K7t=function(t){var n,i,r,e,u,o,s,n=this,i=n.X7t(),r=0,e=n.vjt,u=i?n.s7t(0):0,o=n.q7t||[];for(i||(o=[]),s=[];0<e&&u<n.vjt;)o[u]||(s.push(n.bjt(u)),e--),u++;return{data:s}},N.prototype.$7t=function(t,n){var i,r,e,u,o,s,f,c,i=this,r=i.X7t(),e=0,u=i.vjt,o=r?i.s7t(0):0,s=i.q7t||[];for(r||(s=[]),f=[],c=0;0<u&&o<i.vjt;)s[o]||(-1<t.indexOf(c)&&(f[c]=i.bjt(o)),c++,u--),o++;return{data:f}},N.prototype.tOt=function(t){return(t?this.$7t(t):this.K7t()).data},N.prototype.nOt=function(t,n){var i,r,i,r,i,e,u,o,s,f,r=this,i=r.Fjt(),e=[];if(!(0,b.isNullOrUndefined)(n)&&t.length===n.length)if("Level"===i)for(u=0;u<t.length;u++)o=t[u],e.push(I(o,n[u]));else"ChildrenPath"===i&&(s=r.Yjt(r.Gjt()),f=[((i={})[s]=e,i)],x(((r={})[s]=t,r),((i={})[s]=n,i),s,function(t,n){var t,n,t=I(t,n);delete t[s],n=f[f.length-1],(0,b.isArray)(n[s])||(n[s]=[]),n[s].push(t),f.push(t)},function(){f.pop()}));return e},N.prototype.eOt=function(t){var n,i,r,e,r,u,o,n,s,f,c,a,h,i,v,l,i,e=this,r=e.Fjt();if(!(0,b.isNullOrUndefined)(t)){if(u=e.f7t(),s=e.Gjt(),"Level"===r){for(o="children",c=e.Yjt(s),(n={})[o]=[],n.data={},a=[n=n],h=0;h<t.length;h++){for(v=(i=t[h])[c],l=a[a.length-1];l.data.level>=v;)a.pop(),l=a[a.length-1];(i={data:i})[o]=[],i=i,l[o].push(i),a.push(i)}f=function(t){return t.data}}else"ChildrenPath"===r&&((r={})[o=s]=t,n=r,f=function(t){return t});x(u,n,{childrenField2:o},function(t,n){e._jt(f(n)),e.pjt(t.lp,f(n))})}},N.prototype.iOt=function(i,r,e,n){var u=this;return u.rOt({body:i},r).then(function(t){var n,t,t,n="batch"===r,t={type:r,batch:n,data:u.nOt(i,t)};return u.ki(y,t)?Promise.reject({cancel:!0,type:r,batch:n,step:y}):(i=t.data,u.eOt(i),t={type:r,success:!0,batch:n,items:(0,b.isArray)(i)?i:[i]},delete u.oOt,delete u.q7t,delete u.aOt,delete u.uOt,e&&e(t),u.ki(m,t),n?Promise.resolve(u.K7t()):w)}).catch(function(t){var t,t,t=t&&!0===t.cancel?g+t.step:u.J7t(t),t={type:r,success:!1,reason:t};u.ki(j,{type:t}),n&&n(t)})},N.prototype.sOt=function(){var t,t,t=this;if(t.isHierarchy())return"Level"===(t=t.Fjt())||"ChildrenPath"===t},N.prototype.cOt=function(i,r,t,n){var e,u,e,o,s,f,c,a,h,u=this,e=u.Fjt();return r=r||u.q7t||[],"Level"===e?(o=u.f7t(),s=[],(0,b.traversalTree)(o,function(t){var t,n,t=t.lp;r[t]||(n=u.bjt(t),("create"===i||"batch"===i&&u.isInserted(t,!0))&&u.Y7t(n),n=u.jjt(n),s.push(n))}),u.iOt(s,i,t,n)):"ChildrenPath"===e?(o=u.f7t(),f=u.Gjt(),c=u.Yjt(f),h=[((e={})[c]=a=[],e)],(0,b.traversalTree)(o,{invoking:function(t){var t,n,t,t=t.lp;r[t]||(n=u.bjt(t),("create"===i||"batch"===i&&u.isInserted(t,!0))&&u.Y7t(n),delete n[f],n=u.jjt(n),0<h.length&&(t=h[h.length-1],(0,b.isArray)(t[c])||(t[c]=[]),t[c].push(n)),h.push(n))},invoked:function(t){r[t.lp]||h.pop()}}),u.iOt(a,i,t,n)):Promise.resolve(void 0)},N.prototype.fOt=function(){var t,n,i,r,e,u,o,t,s,f,c,r,n=this;if(n.isHierarchy()){for(i=n.njt,r=n.f7t(),e=i.reduce(function(t,n){return(t[n.JEt]=n).id=n.JEt,n.sequence=n.$Et,n.parent=d,t},((t={})[r.JEt]=r,t)),u=0;u<i.length;u++)n.isInserted(u,!0)||((o=i[u]).parent=e[o.XEt]);if(t=n.options.schema.hierarchy.levelOffset||0,r.level=t-1,"Level"===n.Fjt()){for(s=n.Gjt(),f=w,u=0;u<i.length;u++)!n.isInserted(u,!0)&&(c=n.lOt(u)[s],(c=(0,b.isNumber)(c)?c:n.Xjt(s,u))<f||f===w)&&(f=c);r.level=f+t-1}n.njt=[],r=!(0,b.isNullOrEmpty)(n.$jt()),n.Hjt(r)}},N.prototype.cancelChanges=function(){var i,t,r,e,u,o,i=this,t=i.getHeldActions();t&&0!==t.length&&(i.fOt(),r=i.aOt,e=i.q7t||[],u=i.oOt||[],o=[],(0,b.forEach)(t,function(t){var n=t.sourceIndex,t=t.type;t===l.UPDATE?(i.pjt(n,r[n]),u[n]=[!!u[n]&&u[n][0],!1]):t===l.DELETE?(e[n]=w,u[n]&&u[n][0]?o.push(n):u[n]&&u[n][1]&&(i.pjt(n,r[n]),u[n]=[!1,!1]),(0,b.isNullOrUndefined)(i.wjt)||(i.wjt+=1)):t===l.INSERT&&o.push(n)}),(0,b.forEachRight)(o,function(t){i.mjt(t,1),u.splice(t,1),(0,b.isNullOrUndefined)(i.wjt)||--i.wjt}),i.clearBatchCache_())},N.prototype.getChanges=function(){return this.hOt(!1)},N.prototype.isDataLengthChanged=function(){return this.getChanges().some(function(t){return"delete"===t.type||"insert"===t.type})},N.prototype.submitChanges=function(e){var u,n,o,s,f,c,a,h,u=this;return u.hasCachedActions()?u.sOt()?(n=(u.q7t||[]).slice(),u.cOt("batch",w,function(){for(var t=u.vjt-1;0<=t;t--)!0===n[t]&&(u.mjt(t,1),u.njt[t].parent=d,u.njt.splice(t,1));u.njt.forEach(function(t,n){t.lp=n})})):(o=u.aOt,s=u.q7t||[],f=u.oOt||[],c=u.getHeldActions(),a=[],h=l.UPDATE,(0,b.isNullOrUndefined)(c)||c.forEach(function(t){t.dataItem=u.Nue(u.jjt(t.dataItem)),t.oldDataItem=u.Nue(u.jjt(t.oldDataItem))}),u.rOt({body:c},"batch").then(function(t){var t,i,r,t,t={type:h,batch:!0,data:t};return u.ki(y,t)?Promise.reject({cancel:!0,type:h,batch:!0,step:y}):(((i=t.data)||[]).forEach(function(t){t.succeed&&t.data&&(u._jt(t.data),t.data=u.Iue(t.data))}),i.length,c.length,r=[],(0,b.forEach)(c,function(t,n){var n=i[n];n.succeed?t.type===l.UPDATE?(o&&(o[t.sourceIndex]=w),f[t.sourceIndex][1]=w):t.type===l.INSERT?(f[t.sourceIndex]=[],o[t.sourceIndex]=w,n.data&&(u.pjt(t.sourceIndex,n.data),u.Z7t(t.sourceIndex))):t.type===l.DELETE&&a.push(t.sourceIndex):r.push({localAction:t,response:n})}),(0,b.forEachRight)(a,function(t){s.splice(t,1),u.mjt(t,1),o&&o.splice(t,1),f.splice(t,1),u.isHierarchy()&&(u.njt[t].parent=d,u.njt.splice(t,1))}),u.isHierarchy()&&u.njt.forEach(function(t,n){t.lp=n}),0<r.length?(t={type:h,errorData:r},u.ki(j,{type:t})||(u.uOt=[],(0,b.forEach)(r,function(t,n){var i=t.response,t=t.localAction,r=t.sourceIndex;t.type===l.DELETE&&(s[r]=w),u.dOt(r,{type:t.type,success:!1,reason:i.reason}),e(r,i.reason,t.type)}))):delete u.uOt,Promise.resolve(u.K7t()))}).catch(function(t){var t,n,t=t&&!0===t.cancel?g+t.step:u.J7t(t),n;u.ki(j,{type:{type:h,reason:t}})})):Promise.resolve(void 0)},N.prototype.getHeldActions=function(){var t=this;return t.hasCachedActions()?t.hOt(!0):d},N.prototype.hOt=function(t){for(var n,i,r,e,u,o,s,f,c,a,h,n=this,i=[],r=n.oOt||[],e=n.q7t||[],u=n.aOt,f=0;f<n.vjt;f++){if(o=r[f],!(s=null)===e[f])s={type:l.DELETE,dataItem:n.bjt(f)};else if(o&&o[0])s={type:l.INSERT,dataItem:n.bjt(f)},t&&n.isHierarchy()&&n.Y7t(s.dataItem);else if(o&&o[1]){if(c=u[f],a=n.bjt(f),!t)for(h in c=v({},c))c.hasOwnProperty(h)&&c[h]===a[h]&&(delete c[h],delete a[h]);s={type:l.UPDATE,dataItem:a,oldDataItem:c}}s&&(t?s.sourceIndex=f:s.index=this.TEt(f),i.push(s))}return i},N.prototype.clearBatchCache_=function(){var t=this;delete t.q7t,delete t.aOt,delete t.uOt},N.prototype.hasCachedActions=function(){var t,n,t,i,r,e,u,o,s,t=this;if(t.X7t()&&(n=t.oOt,t=t.q7t,n||t)){if(t)for(i=0,r=t;i<r.length;i++)if(e=r[i])return!0;if(n)for(u=0,o=n;u<o.length;u++)if((s=o[u])&&(!0===s[0]||!0===s[1]))return!0}return!1},N.prototype.bind=function(t,n){var i,r,e,u,o,s,f,i=this;if(n)for(u=r=(e=0,b.isArray)(t)?t:[t];e<u.length;e++)o=u[e],(s=(0,b.isFunction)(n)?n:n[o])&&(f=i._events[o]=i._events[o]||new c.Event).addHandler(s,i)},N.prototype.unbind=function(t,n){var i,t,i=this;(0,b.isNullOrUndefined)(t)?((0,b.forEach)(i._events,function(t){t.removeAllHandlers()}),i._events={}):(t=i._events[t])&&(n?t.removeHandler(n,i):t.removeAllHandlers())},N.prototype.ki=function(t,n){var i,r,i=this,r=i._events[t];return!!r&&((n=n||{}).cancel=!1,n.eventName=t,r.raise(i,n),n.cancel)},N.prototype.vOt=function(t){var n=this;return n._events.hasOwnProperty(t)&&n._events[t].hasHandlers},N.prototype.W7t=function(t){return t=v({},t)},N.prototype.mOt=function(t){return t},N.prototype.getDirtyIndexes=function(){var t,n=this.oOt||[];return(0,b.keys)(n).map(function(t){return parseInt(t,10)})},N.prototype.gOt=function(t,n){var i=this,r;return(i.oOt||[])[t=n?t:i.s7t(t)]||[]},N.prototype.isInserted=function(t,n){return this.gOt(t,n)[0]},N.prototype.isUpdated=function(t){return this.gOt(t)[1]},N.prototype.getErrorInfo=function(t){var n=this,i=n.uOt;if(!(0,b.isNullOrUndefined)(i))return i[t=n.s7t(t)]},N.prototype.dOt=function(t,n){var i=this,r;(i.uOt=i.uOt||[])[t]=n},N.prototype.pOt=function(){this.oOt=w,this.q7t=w,this.aOt=w,this.uOt=w},N.prototype.lOt=function(t){var n=this,i;return(n.aOt=n.aOt||[])[t]},N.prototype.insertItem=function(t,n,i,r){var e=this;t=e.s7t(t),e.I7t({action:l.INSERT,index:t,item:n,N7t:!0}),e.isHierarchy()&&"Custom"===e.Fjt()&&e.g7t(t),i&&i({type:l.CREATE,success:!0})},N.prototype.updateItem=function(t,n,i,r){var e;this.I7t({action:l.UPDATE,index:t,item:n}),i&&i({type:l.UPDATE,success:!0})},N.prototype.updateItemValues=function(t,n,i,r){var e;this.I7t({action:l.UPDATE,index:t,item:n,x7t:!0}),i&&i({type:l.UPDATE,success:!0})},N.prototype.resetItem=function(t,n,i){var r,e,u,r=this,e,u=(r.aOt=r.aOt||[])[t=r.s7t(t)];r.isHierarchy()&&(u=r.bOt(t,u)),r.pjt(t,u),r.clearChangedStatus(t),r.dOt(t),n&&n({type:l.UPDATE,success:!0})},N.prototype.bOt=function(t,n){var i,r,t,e,u,i,o,i=this,r;return i.isHierarchy()?(t=i.bjt(t),e=i.Fjt(),u=i.Gjt(),i=i.$jt(),o=v({},n),"Parent"!==e&&"Level"!==e&&"Custom"!==e||(o[u]=t[u]),(0,b.isNullOrEmpty)(i)||(o[i]=t[i]),o):n},N.prototype.saveItem=function(t,n,i){var r,e,u,o,s,f,u,c,r=this;t=r.s7t(t),o=(u=(e=r.oOt||[])[t]||[])[0],s=u[1],0<u.length&&(o||s)&&(r.isHierarchy()&&(c=!(u=(f=r.njt)[t].parent).isRoot&&e[u.lp]&&e[u.lp][0])?i&&i({type:l.CREATE,success:!1}):r.yOt(t,r.bjt(t),o?l.INSERT:l.UPDATE,n,i))},N.prototype.yOt=function(n,i,t,r,e){var u=this,t=t===l.INSERT,o=t?l.CREATE:l.UPDATE,s=u.X7t(),f=u.wOt(o),c=u.MOt();s||!f||c?c&&(u.oOt[n]=[],u.aOt[n]=w,r)&&r({type:o,success:!0}):u.sOt()?u.cOt(t?l.CREATE:l.UPDATE,w,r,e):(t&&u.Y7t(i),i=u.jjt(i),i=u.Nue(i),u.rOt({body:i},t?l.CREATE:l.UPDATE).then(function(t){var t,t,t={type:o,data:I(i,t)};return u.ki(y,t)?Promise.reject({cancel:!0,type:o,step:y}):(u._jt(t.data),t.data=u.Iue(t.data),u.pjt(n,t.data),u.oOt[n]=[],u.aOt[n]=w,u.dOt(n),t={type:o,success:!0,items:[t.data]},o===l.CREATE&&u.Z7t(n),r&&r(t),u.ki(m,t),w)}).catch(function(t){var t,t,t=t&&!0===t.cancel?g+t.step:u.J7t(t),t={type:o,success:!1,reason:t};u.dOt(n,t),u.ki(j,{type:t}),e(t)}))},N.prototype.I7t=function(t){var n,i,r,e,u,o,s,f,c,a,h,h,n=this,i=n.X7t(),r=n.aOt=n.aOt||[];i&&(e=n.q7t=n.q7t||[]),u=t.action,o=t.index,s=t.item,f=t.x7t,o=(c=t.N7t)?o:n.s7t(o),n.oOt=n.oOt||[],a=n.oOt,u===l.INSERT?(0===n.vjt&&0===n.DEt.length&&n.COt(),n.vjt<o&&(n.vjt=o),(0,b.isNullOrUndefined)(h=o)&&(h=n.vjt),n.mjt(h,0,s),r.length>=o?r.splice(o,0,v({},s)):r[o]=v({},s),i&&(e.length>=o?e.splice(o,0,w):e[o]=w),a.length>=o?a.splice(o,0,[!0]):a[o]=[!0],(0,b.isNullOrUndefined)(n.wjt)||(n.wjt+=1),n.ki(l.ONCHANGE,{action:u,index:o,items:[t.item]})):u===l.UPDATE&&(h=n.bjt(o),r[o]||(r[o]=v({},h)),n.pjt(o,s,f),n.oOt[o]?n.oOt[o]=[n.oOt[o][0],!0]:n.oOt[o]=[!1,!0],E(s,r[o])&&n.clearChangedStatus(o),n.ki(l.ONCHANGE,{action:u,index:o,items:[t.item],oldItems:[h]}))},N.prototype.clearChangedStatus=function(t){var n=this;!(n.oOt[t][1]=!1)!==n.oOt[t][0]&&(n.aOt[t]=w)},N.prototype.get=function(t){var n,i,r,e,u,o,n=this,i=n._data;if(t=n.s7t(t),i&&t<n.vjt){for(r={},e=0,u=n.DEt;e<u.length;e++)r[o=u[e]]=i[o].data[t];return r}return w},N.prototype.Xjt=function(t,n){var i=this,r=i._data;return r&&r[t]&&n<i.vjt?r[t].data[n]:w},N.prototype.getFieldValue=function(t,n){var i=this,r=i._data;return n=i.s7t(n),r&&r[t]&&n<i.vjt?r[t].data[n]:w},N.prototype.getFieldOriginalValue=function(t,n){var i,r,i,i=this,r=i._data;return n=i.s7t(n),r&&r[t]&&n<i.vjt?(i=i.lOt(n),(0,b.isNullOrUndefined)(i)?r[t].data[n]:i[t]):w},N.prototype.SOt=function(n,i,r){var e,t,u,o,s,f,c,s,e=this,t;e.X7t()||!e.wOt(l.DELETE)||e.MOt()||e.isInserted(n)||!e.sOt()?e.isHierarchy()&&(n=e.s7t(n),u=e.c7t(n),s=(c=u.getChildrenIndexes(!0).concat(n)).map(function(i){return function(t,n){e.TOt(i,1,t,n)}}),(0,b.promiseSerialExecute)(s).then(function(t){e.X7t()||(c.sort(function(t,n){return n-t}),c.forEach(function(t){e.tX(t,1,!1)}),e.njt.forEach(function(t,n){t.lp=n})),"Custom"===e.Fjt()&&e.g7t(n+(e.X7t()?c.length:0));var t=t[t.length-1];t.removedCount=c.length,i&&i(t)}).catch(function(t){r&&r(t)})):(n=e.s7t(n),u=e.c7t(n),s=(o=u.getChildrenIndexes(!0).concat(n)).reduce(function(t,n){return t[n]=!0,t},[]),e.bind(y,f=function(){o.forEach(function(t){e.tX(t,1,!1)}),e.njt.forEach(function(t,n){t.lp=n})}),e.cOt(l.DELETE,s,function(t){e.unbind(y,f),t.removedCount=o.length,i&&i(t)},function(t){e.unbind(y,f),r&&r(t)}))},N.prototype.remove=function(t,n,i,r){var e=this;e.isHierarchy()?e.SOt(t,i,r):e.TOt(t,n,i,r)},N.prototype.TOt=function(i,r,e,n){var u,o,t,s,u=this;i<0||i>=u.length()||(o=l.DELETE,u.X7t()||!u.wOt(l.DELETE)||u.MOt()||u.isInserted(i)?(!u.X7t()&&u.isHierarchy()||u.tX(i,r),e&&e(t={type:o,success:!0})):(s=u.gjt(i,i+r),u.Ejt(s),s=s.map(function(t){return u.Nue(t)}),u.rOt({body:s},l.DELETE).then(function(t){var n;return u.ki(y,{type:o,data:s})?Promise.reject({cancel:!0,type:o,step:y}):(u.isHierarchy()||u.tX(i,r),u.Ejt(s,{isServerToClient:!0}),s=s.map(function(t){return u.Iue(t)}),u.dOt(i),n={type:o,success:!0,items:[s]},e&&e(n),u.ki(m,n),w)}).catch(function(t){var t,t,t=t&&!0===t.cancel?g+t.step:u.J7t(t),t={type:o,success:!1,reason:t};u.dOt(i,t),u.ki(j,{type:t}),n(t)})))},N.prototype.tX=function(t,n,i){var r,e,u,o,s,e,f,c,a,h,v,e,r=this,e=r.X7t(),o=r.oOt||[],s=r.aOt||[];if(e){for(e=void 0,f=r.q7t=r.q7t||[],c=n,a=[],u=[],e=r.s7t(t),r.isHierarchy()&&((h=r.njt)[e].parent=d,r.y7t(t,n)),v=e;v<r.vjt&&(!0!==f[v]&&u.length<n&&(u.push(r.bjt(v)),a.push(v),f[v]=!0,--c),0!==c);v++);(0,b.forEachRight)(a,function(t){o[t]&&o[t][0]&&(f.splice(t,1),o.splice(t,1),s.splice(t,1),r.mjt(t,1))})}else u=r.mjt(t,n),o.splice(t,n),s.splice(t,n),r.isHierarchy()&&((h=r.njt)[t].parent=d,r.y7t(t,n),h.splice(t,n),!1!==i)&&h.forEach(function(t,n){t.lp=n});e=u.length,(0,b.isNullOrUndefined)(r.wjt)||(r.wjt-=e,r.wjt=Math.max(r.wjt,0)),r.ki(l.ONCHANGE,{action:l.DELETE,items:u})},N.prototype.COt=function(){var t,n,i,r,n=this,i=null==(t=n.options.schema)?void 0:t.columns;if(i)for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n._data[r]={data:[]},n.DEt.push(r))},N.prototype.MOt=function(){return(0,b.isNullOrUndefined)(this.options.remote)},N.prototype.X7t=function(){var t;return!!this.options.batch&&!this.MOt()},N.prototype.wOt=function(t){var n,i,n,n=this,i=n.options,n=n.hjt;return!!i.autoSync&&!(0,b.isNullOrUndefined)(n.LEt[t])},N.prototype.rOt=function(t,n){var i,r,i=this,r=n||l.UPDATE;return!(t=i.hjt.setupRequestOptions(t,n||l.UPDATE))||i.ki(p,{type:r,requestParams:t})?Promise.reject({cancel:!0,type:r,step:p}):i.hjt.postData(t)},N.prototype.Q7t=function(t){var n=this;return t=n.mOt(t),!(t=n.hjt.setupRequestOptions(t,"read"))||n.ki(p,{type:"read",requestParams:t})?Promise.reject({cancel:!0,type:"read",step:p}):n.hjt.getData(t)},N.prototype.J7t=function(t){return(0,b.isString)(t)?t:t instanceof Error?t.message:"some error happened"},N.prototype.s7t=function(t){var n,i,r,e,u,n=this.q7t;if((0,b.isNullOrUndefined)(n)||0===n.length)return t;for(e=r=i=0,u=n.length;e<=u;e++)if(n[e])r+=1;else{if(i===t)break;i+=1}return t+r},N.prototype.TEt=function(t){var n,i,r,n=this.q7t;if(!(0,b.isNullOrUndefined)(n)&&0!==n.length)for(i=0,r=Math.min(n.length,t);i<=r;i++)n[i]&&--t;return t},l.DataSource=N},"./dist/src/dataSource/dataTransport/localDataTransport.js":function(t,n){"use strict";var i,r;function e(t){t&&(this._data=t.data,this.LEt=i({},t))}i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var n,i,r,e,i=1,r=arguments.length;i<r;i++)for(e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},Object.defineProperty(n,"__esModule",{value:!0}),n.LocalDataTransport=void 0,e.prototype.getData=function(t){var n;return Promise.resolve(this._data)},e.prototype.getDataSync=function(){return this._data},e.prototype.postData=function(t){var n;return Promise.resolve(this._data)},e.prototype.setupRequestOptions=function(t,n){return{}},n.LocalDataTransport=e},"./dist/src/dataSource/dataTransport/remoteDataTransport.js":function(t,n,i){"use strict";var f,o,s,r,c,a,h,v,l,d,p,e;function u(t){var n;this.LEt=f({},t)}f=this&&this.__assign||function(){return(f=Object.assign||function(t){for(var n,i,r,e,i=1,r=arguments.length;i<r;i++)for(e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},Object.defineProperty(n,"__esModule",{value:!0}),n.RemoteDataTransport=void 0,i("./node_modules/whatwg-fetch/fetch.js"),o=i("./node_modules/fetch-jsonp/build/fetch-jsonp.js"),s=i("./dist/src/dataSource/utils.js"),r=null,c=void 0,a="jsonp",h="read",v="create",l="update",d="delete",p="Content-Type",u.prototype.getData=function(t){var n,i,r,e,u,n=this,i,r=this.LEt[t.requestType],e=t.dataType,u=e===a?o:fetch;return t.requestData=c,(t.requestType=c,s.isFunction)(r)?r(t):u(t.url,t).then(function(t){if(t.ok)return n.AOt(e)?t.json():t.text();throw t})},u.prototype.postData=function(t){var n,i,r,e,u,n=this,i,r=this.LEt[t.requestType],e=t.dataType,u=t.requestData;return t.requestData=c,(t.requestType=c,s.isFunction)(r)?r(u,t):fetch(t.url,t).then(function(t){if(t.ok)return n.AOt(e)?t.json():t.text();throw t})},u.prototype.AOt=function(t){return void 0===t||"json"===t||t===a},u.prototype.setupRequestOptions=function(t,n){var i,r,e,u,o,s,i;if(t=t||{},r=(i=this).LEt[n])return e=r.body,(u=t.body)?(t.headers=t.headers||{},i.LEt.dataConverter?(t.body=u=i.LEt.dataConverter(u,n||h),t.headers[p]="application/plain;"):(t.body="string"==typeof u?u:JSON.stringify(u),t.headers[p]="application/json; charset=utf-8")):e&&(t.body="string"==typeof e?e:JSON.stringify(e),t.headers={},t.headers[p]="application/json; charset=utf-8"),i=r.method,n===h?(r.dataType===a&&(o={mode:"no-cors"}),s={method:i||"GET"}):n===v||n===l||"batch"===n?s={method:i||"POST"}:n===d&&(s={method:i||"DELETE"}),f(f(f(f(f({},r),s),o),t),{requestType:n,requestData:u})},n.RemoteDataTransport=u},"./dist/src/dataSource/event.js":function(t,n){"use strict";var e,f,i;function r(t,n,i){var r=this;r.handler=t,r.owner=n,r.priority=i}function u(){this.IOt=[]}Object.defineProperty(n,"__esModule",{value:!0}),n.Event=n.EventHandler=void 0,e=r,n.EventHandler=e,f=null,Object.defineProperty(u.prototype,"hasHandlers",{get:function(){return 0<this.IOt.length},enumerable:!1,configurable:!0}),u.prototype.addHandler=function(t,n,i){var r=this,t=new e(t,n,i=void 0===i?1:i);r.IOt.push(t),r.sortHandlers()},u.prototype.removeHandler=function(t,n){for(var i,r,e,u,o,i=this,r=i.IOt,e=r.length,u=0;u<e;u++)if((o=r[u]).handler===t&&o.owner===n){i.IOt.splice(u,1);break}},u.prototype.sortHandlers=function(){this.IOt.sort(function(t,n){var t=t.priority,n=n.priority;return t<n?1:n<t?-1:0})},u.prototype.removeHandlersByPriority=function(t){for(var n,i,r,e,u,o,s,n=this,i=n.IOt,r=i.length,e=f,u=f,o=0;o<r;o++)if((s=i[o]).priority===t)e===f&&(e=o),u=o;else if(e!==f)break;e!==f&&u!==f&&n.IOt.splice(e,u-e+1)},u.prototype.removeAllHandlers=function(){this.IOt.length=0},u.prototype.raise=function(t,n){var i,r,r,e,u,o,s,i=!1,r=function(){i=!0};for(n===f?n={stopPropagation:r}:n.stopPropagation=r,e=(r=this).IOt.length,u=r.IOt.slice(0,e),o=0;o<e&&!i;o++)(s=u[o]).handler.call(s.owner,t,n)},n.Event=u},"./dist/src/dataSource/utils.js":function(D,s,t){"use strict";var e,o,f,c,a,h;function n(t){return t&&!(0,s.isArray)(t)&&"object"==typeof t}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function u(t){return"boolean"==typeof t}function v(t,n){var i,r,e,u,o;if((0,s.isArray)(t))for(i=0;i<t.length;i++)n(t[i],i,t);else for(e=0,u=r=Object.keys(t);e<u.length;e++)n(t[o=u[e]],o,t)}function l(t,n){var i,r,e,u,o;if((0,s.isArray)(t))for(i=t.length-1;0<=i;i--)n(t[i],i,t);else for((r=Object.keys(t)).reverse(),e=0,u=r;e<u.length;e++)n(t[o=u[e]],o,t)}function d(t){return Object.keys(t)}function p(t,n,i){if((0,s.isArray)(t))return t.reduce(n,i);throw new Error("NOT SUPPORT")}function j(t,n,i){return t.indexOf(n,i=void 0===i?0:i)}function y(t,n){for(var i=0,r=t.length;i<r;i++)if(n(t[i],i,t))return i;return-1}function b(t,n){var i,r,e,u,o,s,f;if(void 0===n&&(n=!1),!C(t)&&"object"==typeof t){if(t&&t instanceof Array)return t.map(function(t){return b(t,n)});if(t&&"object"==typeof t){for(i={},e=0,u=r=d(t);e<u.length;e++)s=t[o=u[e]],n?(f=R(s),i[o]="object"===f||"array"===f?b(s,n):s):i[o]=s;return i}}return t}function w(t,n){var i,r,e;for(void 0===t&&(t=[]),void 0===n&&(n=[]),i={},r=Math.min(t.length,n.length),e=0;e<r;e++)i[t[e]]=n[e];return i}function m(t){return"string"==typeof t}function g(t,n){var i,r,e,u;if(m(n))return t[n];for(i={},r=0,e=n;r<e.length;r++)i[u=e[r]]=t[u];return i}function _(t,n){if((0,s.isArray)(t))return t.map(n);throw new Error("NOT SUPPORT")}function O(t){return void 0===t}function S(t){return null===t}function C(t){return O(t)||S(t)}function F(t){return""===t||C(t)}function R(t){var n;return Object.prototype.toString.call(t).match(/\[\w+\s(\w+)\]/)[1].toLowerCase()}function M(t,n,i,r){n<0||n>t.length||i<0||i>t.length||n===i||r<=0||t.splice.apply(t,e([i-(n<i?r-1:0),0],t.splice(n,r),!1))}function I(t,n){var t=t.parent;t&&(n(t),I(t,n))}function x(t,n,i,r){var e,u,o,s,f,c,a,h,v,l,d,e=t[r||"children"]||[];for(F(i)?u=e.slice():(c=f=void 0,"string"==typeof i?o=i:"function"==typeof i?s=i:"object"==typeof i&&(o=i.field,s=i.getValue,f=i.compareFn,c=i.isOrderChildren),u=c?e:e.slice(),o?u.sort(function(t,n){return t[o]-n[o]}):s?u.sort(function(t,n){return s(t)-s(n)}):f&&u.sort(f)),"object"==typeof(a=n)&&(a=n.invoking,h=n.invoked),l=0;l<u.length;l++){if(d=u[l],a&&(v=a(d,t))&&v.cancel)return v;if((v=v&&v.cancelDeepRecursion?v:x(d,n,i,r))&&v.cancel)return v;if(h&&(v=h(d,t))&&v.cancel)return v}}function k(t){return t}function E(i){return void 0===i&&(i=0),new Promise(function(t,n){setTimeout(function(){t("timeout")},i)})}function P(t){var n=t.callback,i=t.timeout,i=void 0===i?5e3:i,t=t.retryCount,r=void 0===t?1:t;return Promise.race([n(),E(i)]).then(function(t){if("timeout"!==t)return Promise.resolve(t);if(0<r)return P({callback:n,retryCount:--r});throw"timeout"})}function T(t,n){return A(t.map(function(t){return function(){return new Promise(t)}}),n)}function A(t,i){var r=[];return t.reduce(function(t,n){return t.then(function(t){return r.push(Promise.resolve(t)),i?P({callback:n,timeout:i.timeout,retryCount:i.retryCount}):n()})},Promise.resolve({})).then(function(t){return r.shift(),r.push(Promise.resolve(t)),Promise.all(r)})}function N(t){return"string"==typeof t&&("="===t.charAt(0)||0<=t.indexOf("{{")&&0<=t.indexOf("}}"))}function L(n,t){var i,i,r,e,u;if(C(n)||""===n)return"";if(i=N(t),!t||"General"===t||i)return"boolean"==typeof n||n instanceof Boolean?(n=f?n?f.getBoolean().boolean_true:f.getBoolean().boolean_false:n).toString().toUpperCase():n instanceof Date?(r=(i=c.Fe(c.culture()).DateTimeFormat).shortDatePattern,0===n.getHours()&&0===n.getMinutes()&&0===n.getSeconds()&&0===n.getMilliseconds()||(r=i.defaultDatePattern),h.Pe(n,r)):(n="number"==typeof n?a.Ge(n.toString()):n).toString();try{return(e=o.Formatter&&o.Formatter.GeneralFormatter)?(u=null,(u="string"==typeof t?new e(t):t).format(n,{})):n.toString()}catch(t){return n.toString()}}function q(t,n){var i,r;if(!C(t)&&!C(n))for(i=n.split(".");0<i.length;)t=t[r=i.shift()];return t}function B(t){var n,i,r,e,u;if(t&&0<t.length){for(n={},i=[],r=0,e=t;r<e.length;r++)n[u=e[r]]||(n[u]=!0,i.push(u));return i}return t}e=this&&this.__spreadArray||function(t,n,i){if(i||2===arguments.length)for(var r=0,e=n.length,u;r<e;r++)!u&&r in n||((u=u||Array.prototype.slice.call(n,0,r))[r]=n[r]);return t.concat(u||Array.prototype.slice.call(n))},Object.defineProperty(s,"__esModule",{value:!0}),s.getUniqueArray=s.q$=s.format=s.promiseAllSerial=s.promiseSerialExecute=s.traversalTree=s.bubbleTree=s.swapArrayItems=s.getActualType=s.isNullOrEmpty=s.isNullOrUndefined=s.isNull=s.isUndefined=s.map=s.pick=s.isString=s.zipObject=s.clone=s.findIndex=s.indexOf=s.reduce=s.keys=s.forEachRight=s.forEach=s.isBoolean=s.isNumber=s.isFunction=s.isObject=s.isArray=void 0,o=t("Common"),f=t("CalcEngine"),c=o.Common.CultureManager,a=o.Common.st,h=o.Common.ct,s.isArray=Array.isArray,s.isObject=n,s.isFunction=i,s.isNumber=r,s.isBoolean=u,s.forEach=v,s.forEachRight=l,s.keys=d,s.reduce=p,s.indexOf=j,s.findIndex=y,s.clone=b,s.zipObject=w,s.isString=m,s.pick=g,s.map=_,s.isUndefined=O,s.isNull=S,s.isNullOrUndefined=C,s.isNullOrEmpty=F,s.getActualType=R,s.swapArrayItems=M,s.bubbleTree=I,s.traversalTree=x,s.promiseSerialExecute=T,s.promiseAllSerial=A,s.format=L,s.q$=q,s.getUniqueArray=B},"./dist/src/interfaces/conditionalFormatOptions.js":function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.c=void 0,n.c=0},"./dist/src/interfaces/interface.js":function(t,n){"use strict";var i,r,e,u,o,o,o,o;Object.defineProperty(n,"__esModule",{value:!0}),n.RelationshipMap=n.RowColumnStates=n.StateRuleDirection=n.ViewArea=n.DEFAULT_VIEW_NAME=void 0,n.DEFAULT_VIEW_NAME="defaultView",(o=i=n.ViewArea||(n.ViewArea={}))[o.colHeader=1]="colHeader",o[o.viewport=3]="viewport",(o=r=n.StateRuleDirection||(n.StateRuleDirection={}))[o.none=0]="none",o[o.row=1]="row",o[o.column=2]="column",o[o.both=3]="both",(o=e=n.RowColumnStates||(n.RowColumnStates={}))[o.hover=1]="hover",o[o.readonly=4]="readonly",o[o.active=16]="active",o[o.selected=32]="selected",o[o.dirty=64]="dirty",o[o.inserted=128]="inserted",o[o.updated=256]="updated",o[o.pin=1024]="pin",o[o.primaryKey=2048]="primaryKey",o[o.required=4096]="required",(o=u=n.RelationshipMap||(n.RelationshipMap={}))[o.OneToOne=0]="OneToOne",o[o.OneToMany=1]="OneToMany"},"./dist/src/interfaces/styleOptions.js":function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.s=void 0,n.s=0},"./dist/src/interfaces/validatorOptions.js":function(t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.v=void 0,n.v=0},"./dist/src/query.js":function(t,n,i){"use strict";var n,K,J,s,o,r,e,$;function E(t,n){var i,r,e,u,o;if(n&&0<(i=(0,K.keys)(n)).length)for(r=0,e=i;r<e.length;r++)o=n[u=e[r]],t=t.replace(new RegExp("\\[@"+u+"\\]","g"),o.substring(1));return t}function W(t){for(var n,i,n=[],i=0;i<t.length;i++)n[t[i]]=i;return n}function X(t,n){for(var i,r,e,u,o,s,f,c,a,h,v,l,i=[t],r=0;r<n;){for(e=0,u=i.length;e<u;e++)if((o=i.shift()).children)for(s=0,f=o.children;s<f.length;s++)c=f[s],i.push(c);r++}for(a=[],h=0,v=i;h<v.length;h++)a.push((l=v[h]).recordIndexes[0]);return{indexMap:a,queue:i}}function v(t,n,i){var r,t,r=t?n:i,t=t?i:n;return(0,K.isNullOrUndefined)(r)&&(0,K.isNullOrUndefined)(t)?0:(0,K.isNullOrUndefined)(r)?-1:(0,K.isNullOrUndefined)(t)?1:"number"==typeof r||r instanceof Date?r-t:t<r?1:r<t?-1:0}function u(t,n,s){for(var i,r,e,u,o,f,c,a,h,i=[t],r=0;r<n.length;){for(e=0,u=i.length;e<u;e++)if((o=i.shift()).sort(function(t,n){for(var i,r,e,u,o,i=0,r=0,e=s;r<e.length;r++)if(o=(u=e[r]).field,0===(i=v(u.ascending,t[o],n[o])))return i;return i}),r<n.length-1)for(f=n[r+1].field,c=0,a=o;c<a.length;c++)h=a[c],i.push(h[f]);r++}}function g(t,n,i,r){for(var e,u,o,s,f,c,e,u={},o=0,s=(0,K.keys)(t);o<s.length;o++)f=s[o],-1!==i.indexOf(f)?(c=r(f))!==f&&(t[c]=t[f],delete t[f]):-1===n.indexOf(f)&&(u[f]=t[f],delete t[f]);return u}function _(t,n,i,r){for(var e,u,e=r;0<=e;e--)if(t[u=i[e].field]!==n[u])return;return 1}function f(w,m){var t,n;if(2<=m.length)for(t=function(i){for(var t,n,r,e,u,o,s,f,c,a,h,v,l,d,p,j,y,b,t=i===m.length-1?"$rows":m[i+1].field,n=[],r=m[i-1].field,e=m[i].field,u=m[i].summaryFields,o=u.map(function(t){return t.caption}),s=u.map(function(t){var n=(0,J.Kue)(i);return t.caption+"_"+t.slice+n}),f=function(t){var n=(0,J.Kue)(i);return n?t.substring(0,t.lastIndexOf(n)):t},c=0,a=w;c<a.length;c++)if(v=(h=a[c])[r],0!==n.length&&_(n[n.length-1],h,m,i-1)){for(g(h,o.concat(e,t),s,f),y=0,b=o;y<b.length;y++)j=b[y],n[n.length-1][j]+=h[j];n[n.length-1][e].push(h)}else{for((l=g(h,o.concat(e,t),s,f))[r]=v,d=0,p=o;d<p.length;d++)l[j=p[d]]=h[j];l[e]=[h],n.push(l)}w=n},n=m.length-1;0<n;n--)t(n);return w}function Y(t,n,i,r){var r,e;n=f(n,i),r&&u(n,i,r),n&&0<n.length&&(t[e=(r=i[0]).caption||r.field]=n)}function z(t,n){var i,r,e,u,o,s,f,c,a,I,h,v,l,d,p,u,x,j,y,b,w,m,o,g,u,_,O,S,S,C,i={},r=[],u=t.select;if(u&&(o=u.fields,e=u.limit,o))for(s=0,f=o;s<f.length;s++)c=f[s],(0<=n.indexOf(c)||0<=c.indexOf("."))&&r.push({value:c}),i[c]=!0;if(a=[],I=t.calculate)for(l=h=(v=0,K.keys)(I);v<l.length;v++)d=l[v],p=I[d],a.push({caption:d,value:p}),i[d]&&(delete i[d],i[p]=!0);if(u=t.groups,x=[],u)for(j=function(t){for(var n,c,i,r,e,a,u,o,s,f,h,v,l,d,p,j,y,b,w,m,g,_,O,S,C,O,F,R,M,S,n=[],c=[],i=void 0,r=void 0,e=[],a={},u,o=0,s=(0,K.keys)(t);o<s.length;o++)for(h=t[f=s[o]],v=[f],d=v="="!==f[l=0]&&0<=f.indexOf(",")?f.split(","):v;l<d.length;l++){if(j={field:p=d[l],summaryFields:[],caption:h.caption},h.aggregate&&(j.summaryFields=h.aggregate.map(function(t){for(var n,i,r,e,u,o,s,f,n,u=0,o=(0,K.keys)(t);u<o.length;u++)"having"===(s=o[u])?(f=E(t[s],I),c.push(f)):"sliceBy"===s?r=t[s]:(i=E(t[s],I),a[e=s]=!0);return{formula:i,slice:r,caption:e}})),y=h.calculate)for(m=b=(w=0,K.keys)(y);w<m.length;w++)_=E(y[g=m[w]],I),e.push({caption:g,value:_});if((O=h.order)&&(i={field:S=(0,K.keys)(O)[0],ascending:C="ASC"===O[S]}),r=h.includeDetailRows,O=h.attributes)for(F=0,R=O;F<R.length;F++)M=R[F],a[M]=!0;n.push(j),S=h.caption||p,a[S]=!0}x.push({groupByInfos:n,havingInfos:c,groupSortInfo:i,includeDetailRows:r,groupCalculateInfos:e,groupSelectFields:a})},y=0,b=u;y<b.length;y++)j(w=b[y]);if((o=t.where)&&(m=E(o,I)),g=[],u=t.orderBy)for(_=0,O=u;_<O.length;_++)C="ASC"===(S=O[_])[S=(0,K.keys)(S)[0]],g.push({field:S,ascending:C});return{selectFields:i,relatedColumns:r,calculateColumns:a,limit:e,filterExpression:m,groupInfos:x,sortInfos:g}}function Q(t,n,i,r,e,u,o,s,f){var c,a,h,v,l,c=[],a=f.length;if(0<=(o=void 0===o?0:o))for(v=(h=0)===o?a:Math.min(o,a);h<v;h++)c.push((0,J.Jue)(t,n,i,r,e,f[h],u,!0,!0,s));else for(h=a-1,l=Math.max(0,a+o);l<=h;h--)c.push((0,J.Jue)(t,n,i,r,e,f[h],u,!0,!0,s));return c}function Z(t){for(var n,i,n=[],i=0;i<t;i++)n[i]=i;return n}function tt(t){var n,i,r,e,e;if(0===t.length)return"";if(1===t.length)return t[0];for(n=[],i=0,r=t;i<r.length;i++)e="="===(e=r[i])[0]?e.slice(1):e,n.push(e);return"=AND("+n.join(",")+")"}function nt(t,n,i){var r,e,u,o,s,r=[],e=0;if("string"==typeof n)for(u=t.Ywt(n,0,0),o=0;o<i.length;o++)s=i[o],!0===t.nMt(u,s,0)&&(r[e]=s,e++);return r}function it(i,t,n,r,e){var u=(0,o.Xue)(i,t,n,e,r);e.sort(function(t,n){return u(i,r,t,n)})}function c(t,n){var t=new r.FieldManager($,t);return n=t.prepareFields(n),{fieldMgr:t,columnInfos:n}}function a(t,n){var t=t.POt;return new e.GroupManager(n,t.wEt.bind(t))}function rt(t,n,i,r){var r,e,r,t,u,i,o,i,r=c(t,r),e=r.fieldMgr,r=r.columnInfos,t=a(t,n),u=e.buildGroupFields(n,i),i=t.groupBy(u,i),o=i.rootNode,i=i.indexMap;return e.transposeSliceFields(u),{rootNode:o,newIndexMap:i,fieldMgr:e,groupMgr:t,columnInfos:r=(0,s.que)(r,e,n)}}Object.defineProperty(n,"__esModule",{value:!0}),n=i("./dist/src/dataManager.js"),K=i("./dist/src/dataSource/utils.js"),J=i("./dist/src/view/view.js"),s=i("./dist/src/view/view-group.js"),o=i("./dist/src/view/view-sort.js"),r=i("./dist/src/viewField/fieldManager.js"),e=i("./dist/src/viewField/groupManager.js"),$=void 0,n.DataManager.prototype.query=function(t){var n,i,r,e,u,D,t,o,s,f,c,a,h,v,l,d,p,j,y,k,b,t,L,q,B,w,m,g,_,O,S,C,m,F,R,M,I,x,G,E,M,F,V,P,R,M,x,I,T,A,N,U,H,_,n=this,i=n.tables[t.tableName];if(i){if(r=!1,t.unpivot&&(r=!0,i._dataSource.$ue=i._dataSource._data,i.fetchSync(t.unpivot)),e=Z(i.length()),u=(0,J.tse)(i),o=(t=z(t,D=n.relationships.filter(function(t){return t.sourceTable.name===i.name}).map(function(t){return t.sourceRelationshipName}))).selectFields,s=t.relatedColumns,f=t.calculateColumns,c=t.limit,a=t.filterExpression,h=t.groupInfos,v=t.sortInfos,0<s.length)for(l=0,d=s;l<d.length;l++)p=d[l],u.push(p);if(0<f.length)for(j=0,y=f;j<y.length;j++)k=y[j],u.push(k);if(a&&(e=nt(i,a,e)),v&&0<v.length&&h.length<=0&&it(i,u,$,v,e),b={},0<(0,K.keys)(o).length&&(t=Q(i,u,$,$,$,o,c,!1,e))&&0<t.length&&(b.$r=t),0<h.length)for(L=W(e),q=e.slice(0),B=u.slice(0),w=0;w<h.length;w++){if(g=(m=h[w]).groupByInfos,_=m.groupSelectFields,O=m.groupCalculateInfos,S=m.havingInfos,C=m.groupSortInfo,m=m.includeDetailRows,R=(F=rt(i,g,e,u)).rootNode,M=F.newIndexMap,I=F.fieldMgr,x=F.groupMgr,e=M,u=G=F.columnInfos,0<(E=void 0,K.keys)(_).length){if(F=(M=X(R,g.length)).indexMap,V=M.queue,E=Q(i,u,x,I,g,_,0,!0,e=F),m&&b.$r)for(P=0;P<E.length;P++)E[P].$rows=V[P].recordIndexes.map(function(t){return L[t]});if(R=void 0,C?R=[C]:v&&0<v.length&&(R=v),0<O.length||0<S.length||R){for(M=i.name+"_VirtualTable1",(x=n.addTable(M,{data:E})).fetchSync(),I=Z(x.length()),T=(0,J.tse)(x),A=0,N=O;A<N.length;A++)U=N[A],T.push(U);0<S.length&&(I=nt(x,H=tt(S),I)),_=Q(x,T,$,$,$,$,0,!1,I),n.removeTable(x.name),Y(b,_,g,R)}else Y(b,E,g)}e=q,u=B}return r&&(i._dataSource._data=i._dataSource.$ue,i.fetchSync($,!0)),b}}},"./dist/src/relationship.js":function(t,n,i){"use strict";var r,a,e,u;function o(t,n,i,r,e,u){this.sourceTable=t,this.sourceFieldName=n,this.sourceRelationshipName=i,this.targetTable=r,this.targetFieldName=e,this.targetRelationshipName=u,i&&(this.sourceField=t.xOt(n,i,r,e,this)),u&&(this.targetField=r.xOt(e,u,t,n,this))}Object.defineProperty(n,"__esModule",{value:!0}),n.Relationship=void 0,r=i("./dist/src/interfaces/interface.js"),a=i("./dist/src/dataSource/utils.js"),e=void 0,o.prototype.NOt=function(t){return t===this.targetRelationshipName},o.prototype.VP=function(){this.sourceTable&&this.sourceTable.kOt(this),this.targetTable&&this.targetTable.kOt(this)},o.prototype.DOt=function(t){return this.relationshipMap===r.RelationshipMap.OneToMany&&t===this.sourceRelationshipName?r.RelationshipMap.OneToOne:this.relationshipMap},o.prototype._Ot=function(){var t,n,t=this.sourceTable,n=this.sourceFieldName;if(t.EOt())return t.jOt(n)&&!t.OOt()?r.RelationshipMap.OneToOne:r.RelationshipMap.OneToMany},o.prototype.ROt=function(t){var n=this.relationshipMap;return(0,a.isNullOrUndefined)(n)&&(n=this.relationshipMap=this._Ot()),(0,a.isNullOrUndefined)(n)?t:n===r.RelationshipMap.OneToOne?{uit:"object"}:{uit:"array"}},o.prototype.BOt=function(){var i,r,e,t,u,n,o,s,f;function c(t,n,i){t[n]?(t[n].push(i),t.uit="array"):t[n]=[i]}for(i=this.sourceField.LOt={uit:"object"},r=this.targetField.LOt=this.ROt({}),e=this.ROt({uit:"object"}),t=this.sourceTable.getDataSync(),u=this.targetTable.getDataSync(),n=0;n<t.length;n++)o=t[n][this.sourceFieldName],(0,a.isNullOrUndefined)(o)||c(e,o,n);for(s=function(n){var t=u[n][f.targetFieldName];(0,a.isNullOrUndefined)(t)||e[t]&&(r[n]=e[t],e[t].forEach(function(t){c(i,t,n)}))},f=this,n=0;n<u.length;n++)s(n);this.targetField.type=e.uit,this.sourceField.type=i.uit},o.prototype.dl=function(){this.sourceField.LOt=e,this.targetField.LOt=e,this.targetTable.FOt(),this.sourceTable.FOt()},n.Relationship=o},"./dist/src/table/calcField.js":function(t,n,i){"use strict";var r,e,u,o,s,f;function c(t,n){var i,r,i=f.call(this)||this;i.calcSource=n.POt,i.calcService=i.calcSource.getCalcService(),i.GOt=t;try{r=i.expression=i.calcService.parse(i.calcSource,t,0,0),i.calcService&&r&&(i.w3=i.calcService.getGlobalSourceModel(),i.w3.cyt(i,0,0,r,r,!0))}catch(t){}return i.Tl=[],i}r=this&&this.__extends||(s=function(t,n){return(s=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}s(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),Object.defineProperty(n,"__esModule",{value:!0}),n.CalcField=void 0,e=i("CalcEngine"),u=i("./dist/src/dataSource/utils.js"),f=e.BaseCalc,r(c,f),c.prototype.getKey=function(){var t=this;return"T:"+t.calcSource.nM.name+":"+t.GOt},c.prototype.vyt=function(){this.c_t().I3(this,3)},c.prototype.c_t=function(){return this.calcService},c.prototype.P6t=function(){this.C8()},c.prototype.C8=function(){this.Tl=[]},c.prototype.getValue=function(t){var n;return this.expression?(n=this.Tl[t],(0,u.isUndefined)(n)&&(this.calcSource.pe(t),n=this.Tl[t]=this.calcService.evaluateExpression(this.calcSource,this.expression,{row:t,col:0})),n):"Invalid Formula"},c.prototype.getValues=function(t,n){for(var i,r,e,i=[],r=n=n||0,e=t.length;r<e;r++)i.push(this.getValue(t[r]));return i},n.CalcField=c},"./dist/src/table/hierarchyField.js":function(t,n,i){"use strict";var r,e,u,o;function s(t,n){this.GOt=t,this.nM=n,this.UOt=new e.CalcField(this.l7t(),n),this.HOt=new u.TableField(t,n)}Object.defineProperty(n,"__esModule",{value:!0}),n.HierarchyField=void 0,r=i("./dist/src/dataSource/utils.js"),e=i("./dist/src/table/calcField.js"),u=i("./dist/src/table/tableField.js"),s.prototype.getKey=function(){return this.UOt.getKey()},s.prototype.vyt=function(){this.UOt.vyt()},s.prototype.c_t=function(){return this.UOt.c_t()},s.prototype.P6t=function(){this.C8()},s.prototype.l7t=function(){return this.nM.isHierarchy()?this.nM._dataSource.l7t(this.GOt):void 0},s.prototype.C8=function(){var t=this.l7t();(0,r.isNullOrEmpty)(t)?this.UOt=null:(0,r.isNullOrUndefined)(this.UOt)||t!==this.UOt.GOt?this.UOt=new e.CalcField(t,this.nM):this.UOt.C8(),this.HOt=new u.TableField(this.GOt,this.nM)},s.prototype.zOt=function(t){var n,n,n=this.nM;if(n.isHierarchy())return n=n.SEt(t),!(0,r.isNullOrUndefined)(n)&&0<n.children.length},s.prototype.getValue=function(t){return(!(0,r.isNullOrUndefined)(this.UOt)&&this.zOt(t)?this.UOt:this.HOt).getValue(t)},s.prototype.getValues=function(t,n){for(var i,r,e,i=[],r=n=n||0,e=t.length;r<e;r++)i.push(this.getValue(t[r]));return i},s.prototype.setValue=function(t,n){return this.HOt.setValue(t,n)},s.prototype.setItemValue=function(t,n,i,r){this.HOt.setItemValue(t,n,i,r)},s.prototype.hasItem=function(t){this.HOt.hasItem(t)},s.prototype.insertItem=function(t,n){this.HOt.insertItem(t,n)},s.prototype.getOriginalValue=function(t){return this.HOt.getOriginalValue(t)},s.prototype.getRelatedTable=function(){return this.HOt.getRelatedTable()},s.prototype.getRelationMaps=function(){return this.HOt.getRelationMaps()},s.prototype.getHostTableIndexes=function(t){return this.HOt.getHostTableIndexes(t)},n.HierarchyField=s},"./dist/src/table/table.entry.js":function(t,n,i){"use strict";var r,e,r=this&&this.__createBinding||(Object.create?function(t,n,i,r){void 0===r&&(r=i);var e=Object.getOwnPropertyDescriptor(n,i);e&&("get"in e?n.__esModule:!e.writable&&!e.configurable)||(e={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(t,r,e)}:function(t,n,i,r){t[r=void 0===r?i:r]=n[i]}),e=this&&this.__exportStar||function(t,n){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(n,i)||r(n,t,i)};Object.defineProperty(n,"__esModule",{value:!0}),e(i("./dist/src/table/tableEvents.js"),n),e(i("./dist/src/table/table.js"),n)},"./dist/src/table/table.js":function(t,n,i){"use strict";var r,e,y,u,o,f,s,c,a,h,v,l;function d(t,n,i){var r={syncDone:!1,asyncCount:0,args:void 0,succeededArgs:void 0,failedArgs:void 0,onSucceeded:t,onFailed:n,onEnd:i,invoke:function t(){0===r.asyncCount&&r.syncDone&&(r.failedArgs?r.onFailed&&r.onFailed(r.failedArgs):r.onSucceeded&&r.onSucceeded(r.succeededArgs),r.onEnd)&&r.onEnd(r.succeededArgs||r.failedArgs)},execute:function t(n){n&&(r.onEnd=n),r.syncDone=!0,r.invoke()},suspend:function t(){return r.asyncCount++,{succeed:function t(n){r.succeededArgs=n,r.resume()},fail:function t(n){r.failedArgs=n,r.resume()}}},resume:function t(){r.asyncCount--,r.invoke()}};return r}function p(t,n){var i,r,e,u;for(i in t)if(t.hasOwnProperty(i))for(e in r=t[i],n)if(n.hasOwnProperty(e)&&r===(u=n[e])&&r.rb)return!0}function j(t,n){return p(n.views,t.VOt)}function b(t,n,i,r){var e,u,o,s,f,c,a;if(0!==n){for(o=i&&i.dataType,s=i&&i.dataMap,f=!!o,c=0;c<n;c++)a=r(c),s&&!(0,y.isNullOrUndefined)(s[a])&&(a=s[a]),f||(0,y.isNullOrUndefined)(a)||(u=a,f=!0),(e=e||{})[a=a instanceof Date?a.toISOString():a]||(e[a]=[]),e[a]&&e[a].push(c);return e.K$=o||(f?typeof u:"object"),e}}function w(t,n,i,r){var e,u,o,o,s;for(e in t)t.hasOwnProperty(e)&&(u=t[e],o=(o=r&&r[e])&&o.dataMap,u)&&(s=i[e],u[s=(s=o&&!(0,y.isNullOrUndefined)(o[s])?o[s]:s)instanceof Date?s.toISOString():s]?u[s].push(n):u[s]=[n])}function m(t,n,i,r,e,u){var t,i,u,t=t[i],i=u&&u.dataMap;t&&e!==r&&(i&&((0,y.isNullOrUndefined)(i[r])||(r=i[r]),(0,y.isNullOrUndefined)(i[e])||(e=i[e])),r instanceof Date&&(r=r.toISOString()),e instanceof Date&&(e=e.toISOString()),u=t[r])&&(1<u.length?u.splice(u.indexOf(n),1):delete t[r],t[e]?t[e].push(n):t[e]=[n])}function g(t,n,i){var r,e,u,o,s;for(r in t)if(t.hasOwnProperty(r)&&(e=t[r]))for(u in e)if(e.hasOwnProperty(u)&&(0,y.isArray)(e[u])&&(o=e[u],(0,y.isArray)(o))){for(s=0;s<o.length;s++)o[s]>=n+i?o[s]-=i:o[s]>=n&&o[s]<n+i&&(o.splice(s,1),s--);0===o.length&&delete e[u]}}function _(t,n){var t;this.YOt={},this.ZOt={},this.WOt=0,Object.defineProperty(this,"name",{get:function(){return this.Zc},set:function(t){var n,i,r,e,i,n=this.Zc;if(this.Zc=t,i=this.QOt){for(r in this.VOt)this.VOt.hasOwnProperty(r)&&(e=this.VOt[r]).KOt(n,t);delete(i=i.tables)[n],i[t]=this}}}),Object.defineProperty(this,"options",{get:function(){return this._dataSource.options},set:function(t){this.JOt=!0,this._dataSource.options=t}}),this.name=t,t=n instanceof r.DataSource?n:new r.DataSource(n),this._dataSource=t,this.views={},this.VOt={},this.Pq=[],this.XOt={},this.qOt=[],this.JOt=!0,this.aT={}}function O(t){var n,t,i,r,n={data:t.data,remote:t.remote,autoSync:t.autoSync,batch:t.batch,schema:t.schema},t=t.remote;return t&&(i=n.remote={},(r=t.read)&&!(0,y.isFunction)(r)&&(i.read=r),(r=t.create)&&!(0,y.isFunction)(r)&&(i.create=r),(r=t.update)&&!(0,y.isFunction)(r)&&(i.update=r),(r=t.delete)&&!(0,y.isFunction)(r)&&(i.delete=r),r=t.batch)&&!(0,y.isFunction)(r)&&(i.batch=r),n}Object.defineProperty(n,"__esModule",{value:!0}),n.Table=n.updateFilterIndexesCacheOnRemove=n.updateFilterIndexesCacheOnUpdate=n.updateFilterIndexesCacheOnInsert=n.generateFilterIndexCache=void 0,r=i("./dist/src/dataSource/dataSource.js"),e=i("./dist/src/calculation/calcSource.js"),y=i("./dist/src/dataSource/utils.js"),u=i("./dist/src/view/view.js"),o=i("./dist/src/interfaces/interface.js"),f=i("./dist/src/table/tableEvents.js"),s=i("./dist/src/table/calcField.js"),c=i("./dist/src/table/tableField.js"),a=i("./dist/src/table/hierarchyField.js"),h=null,v=void 0,n.generateFilterIndexCache=b,n.updateFilterIndexesCacheOnInsert=w,n.updateFilterIndexesCacheOnUpdate=m,n.updateFilterIndexesCacheOnRemove=g,_.prototype._Et=function(t,n,i){var r,e,n;"="===(n=!(0,y.isNullOrUndefined)(n)&&""!==n?n:"*")[0]?(r=this.bEt(n)).Iwt(0,t,i):(e=(e=this.aT[n])||(this.aT[n]={}),n=t.getKey(),i?e[n]=t:delete e[n])},_.prototype.o_t=function(t){var n,i,n=function(t){for(var n in t)t.hasOwnProperty(n)&&t[n].vyt()};if((0,y.isNullOrUndefined)(t))for(i in this.aT)this.aT[i]&&n(this.aT[i]);else-1<t.indexOf(".")&&(t=t.split(".")[0]),n(this.aT[t]),n(this.aT["*"])},_.prototype.REt=function(t){var n,i;if(this.QOt=t)this.POt=new e.DataManagerCalcSource(t.Lp,this);else for(n in this.POt=h,this.VOt)this.VOt.hasOwnProperty(n)&&(i=this.VOt[n]).$Ot(this)},_.prototype.Ywt=function(t,n,i){var r=this.POt;return r.getCalcService().parse(r,t,n||0,i||0)},_.prototype.nMt=function(t,n,i){var r=this.POt;return r.pe(n),r.getCalcService().evaluateExpression(r,t,{row:n||0,col:i||0})},_.prototype.kfe=function(t,n,i){var r=this.POt;return r.pe(n,v,i),r.getCalcService().evaluateExpression(r,t,{row:n||0,col:0})},_.prototype.getDataSync=function(t){return this._dataSource.tOt(t)},_.prototype.NEt=function(t,n){var i,r,e,u,o,s,i=this;if(t){if(0<=t.indexOf(i))return h}else{if(i.tRt)return i.tRt;r=!0,t=[],n=[]}for(t.push(i),n.push(new Promise(function(t){if(i.JOt)return i.fetch().then(t);t(null)})),e=i.Pq,u=0;u<e.length;u++)(s=(o=e[u]).targetTable)&&s.NEt(t,n);if(r)return i.tRt=Promise.all(n),i.tRt},_.prototype.fetch=function(n){var i,r,e,i=this;return i.BEt&&(r=i.columns),e=i.length(),i._dataSource.load({reload:n}).then(function(t){return i.nse(e,r,n),Promise.resolve(t)})},_.prototype.cPt=function(t){var n,i,r,e,u,o,s,f,n=this,i={};if(t&&(r=n.columns))for(o=e=(u=0,y.keys)(r);u<o.length;u++)(f=r[s=o[u]]).value&&"="===f.value[0]&&(i[s]=f);return i},_.prototype.nse=function(t,i,n){var r,e,u,u,o,s,f,c,a,h,v,r=this,e=r._dataSource.options.schema;if((r.JOt||n)&&(u=r.get(0),(u=(0,y.isNullOrUndefined)(u)&&e&&e.columns?e.columns:u)&&(u=(0,y.keys)(u),o=r.columns=r.cPt(!0),s=r.Pq,u.forEach(function(t){var n=i&&i[t];o[t]=r.nRt(t,n),s.push({name:t})})),r.JOt=!1),n&&r.ARt(),e&&e.columns){for(a in c=[],f=e.columns)f[a]&&f[a].indexed&&c.push(a);r.eRt(c)}if(n&&r.clearIndexes(),r.createIndexes(r.qOt),r.BEt=!1,r.dl(),n)for(v in r._dataSource.pOt(),h=r.views)h.hasOwnProperty(v)&&h[v].iM(t!==r.length())},_.prototype.fetchSync=function(t,n){var i,r,n,i=this,r=i.length(),n=i._dataSource.loadSync(t,n);return i.nse(r,v,!(0,y.isNullOrUndefined)(t)),n},_.prototype.nRt=function(t,n){var u,i,r,e,u=this,i={name:t,value:t,jOt:!1};if(!(0,y.isNullOrUndefined)(n)){for(e in n.value=void 0,n.name=void 0,n)n.hasOwnProperty(e)&&!(0,y.isNullOrUndefined)(n[e])&&(i[e]=n[e]);r=n.W5,delete n.W5,n.jOt&&(i.jOt=n.jOt)}return Object.defineProperty(i,"dataType",{get:function(){return r},set:function(t){var t;r!==t&&("rowOrder"!==r&&"rowOrder"!==t||!u.isHierarchy()||u.setHierarchyOptionChanged(),r=t,u._dataSource.xjt(this.name,this.dataType,this.dataPattern),t=this.value,u.dl(t),u.rRt(t))}}),Object.defineProperty(i,"isPrimaryKey",{get:function(){return this.jOt},set:function(t){this.jOt!==t&&(this.jOt=t,u.qOt.slice().sort().join(",")!==u.Ljt(!0).slice().sort().join(","))&&u.createIndexes(u.qOt)}}),Object.defineProperty(i,"mappedName",{get:function(){return this.value},set:function(n){var i;this.value===n||(0,y.isNullOrEmpty)(n)||(i=this.value,u._dataSource.Njt(i,n),u.dl(i),u.rRt(n),u.oRt(i,n),u.aRt(i,n),u.Pq.forEach(function(t){t.name===i&&(t.name=n)}),u.qOt=u.qOt.map(function(t){return t===i?n:t}),u.columns[n]=u.columns[i],delete u.columns[i],this.name=this.value=n)}}),Object.defineProperty(i,"relationship",{get:function(){for(var t,n,i,r,t,n=0,i=u.QOt.relationships;n<i.length;n++){if((r=i[n]).sourceTable===u&&r.sourceFieldName===this.value)return{table:r.targetTable,field:r.targetFieldName,sourceName:r.sourceRelationshipName,targetName:r.targetRelationshipName};if(r.targetTable===u&&r.targetFieldName===this.value)return{table:r.sourceTable,field:r.sourceFieldName,sourceName:r.sourceRelationshipName,targetName:r.targetRelationshipName}}},set:function(t){for(var n,i,r,e,n,i=0,r=u.QOt.relationships;i<r.length;i++)if((e=r[i]).sourceRelationshipName===t.sourceName){u.QOt.removeRelationship(e.sourceRelationshipName);break}t.table&&t.field&&u.QOt.addRelationship(u,this.value,t.sourceName,t.table,t.field,t.targetName)}}),i},_.prototype.length=function(){return this._dataSource.length()},_.prototype.getDirtyIndexes=function(){return this._dataSource.getDirtyIndexes()},_.prototype.isInserted=function(t){return this._dataSource.isInserted(t)},_.prototype.isUpdated=function(t){return this._dataSource.isUpdated(t)||this.uRt(t)},_.prototype.getErrorInfo=function(t){return this._dataSource.getErrorInfo(t)},_.prototype.uRt=function(t){var n,i,r,e,u,e,o,s,f,n=this,i=n.Pq;for(n.WOt++,r=0;r<i.length;r++)if(u=(e=i[r]).targetTable,e=e.LOt,u&&j(u,n)&&e&&e[t]&&!u.WOt)for(o=0,s=e[t];o<s.length;o++)if(f=s[o],u.isUpdated(f))return n.WOt--,!0;n.WOt--},_.prototype.insertItem=function(n,i,r,t){var e,u,e=this,u={index:n,data:i};this.ki(f.Events.ItemInserting,u),this._dataSource.insertItem(n,i,function(t){e.sRt(n,i),e.cRt(n,i),e.dl(),e.ki(f.Events.ItemInserted,u),r&&r(t)},t)},_.prototype.updateItem=function(t,n,i,r){this._dataSource.updateItem(t,n,i,r)},_.prototype.fRt=function(n,i,r,e,u,o){var s=this;return function(t){s.lRt(n,i,r),s.hRt(n,e,i,r),s.dl(),s.ki(f.Events.ItemUpdated,u),o&&o(t)}},_.prototype.dRt=function(t,n,i,r,e,u){var o,s,o=n[i],s={index:t,data:n,field:i,originalValue:r,newValue:o};this.ki(f.Events.ItemUpdating,s),this._dataSource.updateItem(t,n,this.fRt(t,r,o,i,s,e),u)},_.prototype.updateItemValue=function(t,n,i,r,e){var u,o,s,s,o=this._getValueByField(n,t),s=this.vRt(t);s[n]=i,this.ki(f.Events.ItemUpdating,s={index:t,data:s,field:n,originalValue:o,newValue:i}),this._dataSource.updateItemValues(t,((u={})[n]=i,u),this.fRt(t,o,i,n,s,r),e)},_.prototype.resetItem=function(n,t,i){var r,t,i,e,i,u,o,r=this,t=d(t,i);this.mRt(n,t.suspend),this._dataSource.isUpdated(n)&&(i=t.suspend(),e=i.succeed,i=i.fail,u=this.vRt(n),o=this.gRt(n),this.ki(f.Events.ItemResetting,{index:n}),this._dataSource.resetItem(n,function(t){r.pRt(n,u,o),r.dl(),r.ki(f.Events.ItemReset,{index:n,originalData:u,dataBeforeChanged:o}),e(t)},i)),t.execute()},_.prototype.pRt=function(t,n,i){var r,e,u,o,o,r=this,e=r.columns;if(!(0,y.isNullOrUndefined)(n)&&!(0,y.isNullOrUndefined)(i))for(u in e)e.hasOwnProperty(u)&&(o=(o=e[u]).value instanceof Function?o.value.name:o.value,r.hRt(t,o,n[o],i[o]))},_.prototype.mRt=function(f,c){var a,h,t,n,a=this,h=a.Pq;for(a.WOt++,t=function(t){var t,r,t,n,i,e,u,o,s,o,t=h[t],r=t.targetTable,t=t.LOt;if(r&&j(r,a)&&t&&t[f]&&!r.WOt){for(n=[],i=0,e=t[f];i<e.length;i++)u=e[i],r.isInserted(u)?n.push(u):r.isUpdated(u)&&(s=(o=c()).succeed,o=o.fail,r.resetItem(u,s,o));0<n.length&&(n.sort(function(t,n){return n-t}),n.forEach(function(t){var n=c(),i=n.succeed,n=n.fail;r.qCt(t,1,i,n)}))}},n=0;n<h.length;n++)t(n);a.WOt--},_.prototype.saveItem=function(n,t,i){var r,t,i,e,i,e,u,i,r=this,t=d(t,i),i=t.suspend(),e=i.succeed,i=i.fail;this.bRt(n,e,i),(this._dataSource.isUpdated(n)||this._dataSource.isInserted(n))&&(e=t.suspend(),u=e.succeed,i=e.fail,this.ki(f.Events.ItemSaving,{index:n}),this._dataSource.saveItem(n,function(t){r.dl(),r.ki(f.Events.ItemSaved,{index:n}),u(t)},i)),t.execute()},_.prototype.bRt=function(t,n,i){var n,r,e,u,o,s,f,s,c,a,h,v,l,v,n=d(n,i),r=n.suspend,e=this,u=e.Pq;for(e.WOt++,o=0;o<u.length;o++)if(f=(s=u[o]).targetTable,s=s.LOt,f&&j(f,e)&&s&&s[t]&&!f.WOt)for(c=0,a=s[t];c<a.length;c++)h=a[c],(f.isUpdated(h)||f.isInserted(h))&&(l=(v=r()).succeed,v=v.fail,f.saveItem(h,l,v));n.execute(function(){return e.WOt--})},_.prototype.get=function(t){return this._dataSource.get(t)},_.prototype.remove=function(t,n,i,r){var e,u,o,s,o,e=this;void 0===n&&(n=1),s=(o=(u=d(function(){e.qCt(t,n,i,r)},r)).suspend()).succeed,o=o.fail,this.yRt(t,n,s,o),u.execute()},_.prototype.qCt=function(n,i,r,t){var e,u,e=this,u={index:n,count:i};this.ki(f.Events.ItemRemoving,u),this._dataSource.remove(n,i,function(t){e.wRt(),e.MRt(n,i),e.ki(f.Events.ItemRemoved,u),r&&r(t)},t)},_.prototype.yRt=function(f,c,t,n){var t,a,i,h,r,e,t=d(t,n),a=t.suspend,i=this,h=i.Pq;for(i.WOt++,r=function(t){var t,r,n,i,n,t,n,e,u,o,s,t=h[t],r=t.targetTable,n=t.CRt,i=t.LOt;if(r&&n.NOt(t.name)&&i&&i[f]&&!r.WOt){for(t=(n=a()).succeed,n=n.fail,e=[],u=void 0,o=function(t){var n=i[f+t];e=e.concat(Object.keys(n).map(function(t){return n[t]}))},s=0;s<c;s++)o(s);e.sort(function(t,n){return n-t}),u=e.map(function(i){return function(t,n){r.remove(i,1,t,n)}}),(0,y.promiseSerialExecute)(u).then(t).catch(n)}},e=0;e<h.length;e++)r(e);t.execute(function(){return i.WOt--})},_.prototype.getChanges=function(){return this._dataSource.getChanges()},_.prototype.isDataLengthChanged=function(){return this._dataSource.isDataLengthChanged()},_.prototype.submitChanges=function(t,r,e){var u=this;return new Promise(function(n,i){u.SRt(t,function(t){n(t),r&&r(t)},function(t){i(t),e&&e(t)})})},_.prototype.SRt=function(r,n,i){var e,t,u,o,u,e=this,t=d(function(){e.wRt(),e.ki(f.Events.ChangesSubmitting,v),e._dataSource.submitChanges(function(t,n,i){r?r(t,n,i):e.ki(f.Events.ChangesSubmittedRowFailed,{index:t,reason:n,type:i})}).then(function(t){e.ki(f.Events.ChangesSubmitted,t),n(t)}).catch(function(t){i(t)})}),u=t.suspend(),o=u.succeed,u=u.fail;this.TRt(o,u),t.execute()},_.prototype.TRt=function(t,n){var t,i,r,e,u,o,s,o,o,f,o,t=d(t,n),i=t.suspend,r=this,e=r.Pq;for(r.WOt++,u=0;u<e.length;u++)s=(o=e[u]).targetTable,o=o.LOt,s&&o&&!s.WOt&&(f=(o=i()).succeed,o=o.fail,s.submitChanges(v,f,o));t.execute(function(){return r.WOt--})},_.prototype.cancelChanges=function(n,t){var i,r,i=this,r=d(function(){var t={isDataLengthChanged:i.isDataLengthChanged()};i.ki(f.Events.ChangesCancelling,v),i._dataSource.cancelChanges(),i.wRt(),i.ARt(),i.ki(f.Events.ChangesCancelled,t),n&&n(v)});this.IRt(r.suspend),r.execute()},_.prototype.IRt=function(t){var n,i,r,e,u,e,e,o,e,n=this,i=n.Pq;for(n.WOt++,r=0;r<i.length;r++)u=(e=i[r]).targetTable,e=e.LOt,u&&e&&!u.WOt&&(o=(e=t()).succeed,e=e.fail,u.cancelChanges(o,e));n.WOt--},_.prototype.xRt=function(t){return t instanceof s.CalcField||t instanceof a.HierarchyField},_.prototype.NRt=function(){var t,i,n,r,e,u,t=this.options.schema.hierarchy.column,i=[new RegExp("(\\[@)(".concat(t,")\\]|(PARENT)|(CHILDREN)|(ONLYCHILDREN)|(LEVEL)|(LEVELROWNUMBER)"))];for(n in this.XOt)Object.prototype.hasOwnProperty.call(this.XOt,n)&&(r=this.XOt[n])instanceof a.HierarchyField&&(r.C8(),i.push(new RegExp("(\\[@)(".concat(r.GOt,")\\]"))));for(n in e=function(t){var n;Object.prototype.hasOwnProperty.call(u.XOt,t)&&(n=u.XOt[t])instanceof s.CalcField&&i.some(function(t){return t.test(n.GOt)})&&n.C8()},(u=this).XOt)e(n)},_.prototype.FOt=function(){var t,n;for(t in this.XOt)Object.prototype.hasOwnProperty.call(this.XOt,t)&&(n=this.XOt[t],this.xRt(n)?n.C8():this.XOt[t]=v)},_.prototype.dl=function(t,n){var i,r,e;if(t){for(i=this.XOt[t],this.xRt(i)?i.C8():this.XOt[t]=v,r=0;r<this.Pq.length;r++)if(t===(e=this.Pq[r]).name||t===e.sourceField)return void(e.LOt&&e.CRt.dl())}else for(this.FOt(),r=0;r<this.Pq.length;r++)(e=this.Pq[r]).CRt&&e.CRt.dl()},_.prototype.primaryKey=function(t){var t,n,i,r,e,u,o,s,f,c;if(0===arguments.length)return 0===this.qOt.length&&(this.Ljt(),this.createIndexes(this.qOt)),this.qOt.join(",");if(!(0,y.isNullOrUndefined)(t)&&(this.qOt=this.qOt.concat(t.split(",")),t=this._dataSource.options.schema,!(0,y.isNullOrUndefined)(t))){for(r in i=[],n=t.columns=t.columns||{})Object.prototype.hasOwnProperty.call(n,r)&&(e=n[r]).isPrimaryKey&&i.push(r);if(0===i.length)this.qOt.forEach(function(t){n[t]=n[t]||{},n[t].isPrimaryKey=!0});else{for(u=0;u<i.length;u++)this.columns[o=i[u]]&&(this.columns[o].isPrimaryKey=!0);for(s=this.qOt.slice().sort(),i.sort(),f=i,c=0;c<s.length||c<f.length;c++)if(s[c]!==f[c])return void(this.qOt=f)}}},_.prototype.getIndexes=function(){return(0,y.keys)(this.YOt)},_.prototype.kRt=function(){return(0,y.keys)(this.ZOt)},_.prototype.createIndexes=function(t){for(var n,i,r,e,n=this.YOt,i=0,r=t;i<r.length;i++)n[e=r[i]]||(n[e]=this.DRt(e))},_.prototype.eRt=function(t,n){for(var i,r,e,u,i=this.ZOt,r=0,e=t;r<e.length;r++)i[u=e[r]]&&!n||(i[u]=this._Rt(u))},_.prototype.dropIndexes=function(t){for(var n,i,r,e,n=this.YOt,i=0,r=t;i<r.length;i++)n[e=r[i]]&&delete n[e]},_.prototype.clearIndexes=function(){this.YOt={}},_.prototype.oRt=function(t,n){var i=this.YOt;(0,y.isNullOrUndefined)(i[t])||(i[n]=i[t],delete i[t])},_.prototype.ARt=function(){this.ZOt={}},_.prototype.aRt=function(t,n){var i=this.ZOt;(0,y.isNullOrUndefined)(i[t])||(i[n]=i[t],delete i[t])},_.prototype.wRt=function(){this.dl();var t=this.getIndexes();this.clearIndexes(),this.createIndexes(t)},_.prototype.ERt=function(){var t=this.kRt();this.ARt(),this.eRt(t)},_.prototype.DRt=function(t){for(var n,i,r,e,u,i=this.length(),r=0;r<i;r++)(n=n||{})[u="string"!=typeof(u=(e=this.get(r))[t])?String(u):u]||(n[u]=[]),n[u]&&n[u].push(r);return n},_.prototype._Rt=function(n){var i=this;return b(n,this.length(),this.jRt(n),function(t){return i._getValueByField(n,t)})},_.prototype.ORt=function(t){return!!this.YOt[t]},_.prototype.search=function(t,n){if(!(0,y.isNullOrUndefined)(t)&&!(0,y.isNullOrUndefined)(n))return(0,y.isString)(t)||(t=String(t)),this.ORt(n)?this.RRt(t,n):this.BRt(t,n)},_.prototype.mEt=function(t){var i,n,r,e,u,o,i=this.primaryKey().split(",");if(0===i.length||!this.YOt[i[0]])return[];if(1===i.length)return this.YOt[i[0]][t];if((t=t.split("|")).length!==i.length)return[];for(n=0;n<t.length;n++)t[n]=t[n].trim();for(r={},e={},this.YOt[i[0]][t[0]].forEach(function(t){r[t]=1}),u=function(n){o.YOt[i[n]]&&o.YOt[i[n]][t[n]].forEach(function(t){r[t]===n&&(e[t]=n)}),r=e,e={}},o=this,n=1;n<t.length;n++)u(n);return Object.keys(r)},_.prototype.kEt=function(t,n,i){var r,e,u,o,s,f,c,a,h,v,l,d,p,j;if(i){for(r={},e=0;e<n.length;e++)u=n[e],o=this._dataSource._data[u],r[u]=o&&o.data[t];for(f=0,c=s=this.QOt.relationships;f<c.length;f++)if((a=c[f]).sourceTable===this&&a.targetTable!==this){for(h={},v=a.sourceRelationshipName+".",p=l=(d=0,y.keys)(a.targetTable.columns);d<p.length;d++)h[j=p[d]]=a.sourceTable._getValueByField(v+j,t);r[a.sourceRelationshipName]=h}}else for(r=[],e=0;e<n.length;e++)o=this._dataSource._data[n[e]],r.push(o&&o.data[t]);return r},_.prototype.ASt=function(t,n,i,r){for(var e,u,o,s,e=[],u=this.length(),o=0;o<u;o++)s=n&&this._dataSource._data[n].data[o],n!==h&&s!==t&&String(s)!==t||e.push(this.kEt(o,i||this._dataSource.DEt,r));return e},_.prototype.BRt=function(t,n){for(var i,r,e,u,o,i=[],r=this.length(),e=0;e<r;e++)(o=(u=this.get(e))[n])!==t&&String(o)!==t||i.push(u);return i},_.prototype.RRt=function(t,n){var i,r,n,e,u,o,s,i,r,n=this.YOt[n][t],e=[];if(n)for(u=0,o=n;u<o.length;u++)s=o[u],e.push(this.get(s));return e},_.prototype.sRt=function(t,n){var i,r,e,u,i=this.YOt;for(r in i)i.hasOwnProperty(r)&&(e=i[r])&&(e[u=n[r]]?e[u].push(t):e[u]=[t])},_.prototype.cRt=function(t,n){var i=this._dataSource.options.schema;w(this.ZOt,t,n,i&&i.columns)},_.prototype.lRt=function(t,n,i){var r,e,u,o,r=this.YOt;for(e in r)r.hasOwnProperty(e)&&(u=r[e])&&i!==n&&((o=u[n])&&1<o.length?o.splice(o.indexOf(t),1):delete u[n],u[i]?u[i].push(t):u[i]=[t])},_.prototype.hRt=function(t,n,i,r){m(this.ZOt,t,n,i,r,this.jRt(n))},_.prototype.MRt=function(t,n){g(this.ZOt,t,n)},_.prototype.LRt=function(t,n){var i,r,e,u,i=this.ZOt,r=i&&i[t];if(r)for(e in r)if(r.hasOwnProperty(e)&&(u=r[e],(0,y.isArray)(u))&&u.some(function(t){return t===n}))return e},_.prototype.jOt=function(t){return 0<=this.Ljt().indexOf(t)},_.prototype.OOt=function(){return 1<this.Ljt().length},_.prototype.EOt=function(){return 0<this.Ljt().length},_.prototype.Ljt=function(t){var t,n,i,r,e,u,o,s;if(0===this.qOt.length||t)if(t=this._dataSource.options.schema,(0,y.isNullOrUndefined)(t)||(0,y.isNullOrUndefined)(t.columns)||0===Object.keys(t.columns).length)for(n in this.qOt=[],this.columns)this.columns[n].isPrimaryKey&&this.qOt.push(n);else{for(n in r=[],i=t.columns=t.columns||{})i.hasOwnProperty(n)&&(e=i[n]).isPrimaryKey&&r.push(n);for(u=this.qOt.slice().sort(),r.sort(),o=r,s=0;s<u.length||s<o.length;s++)if(u[s]!==o[s]){this.qOt=o;break}}return this.qOt},_.prototype.defaultView=function(){var r=this;return r.FRt?Promise.resolve(r.FRt):new Promise(function(i,t){r.fetch().then(function(t){var n,n,n,n=r.get(0),n=(0,y.keys)(n),n=r.addView(o.DEFAULT_VIEW_NAME,n);r.FRt=n,i(n)})})},_.prototype.addView=function(t,n,i,r){var n=new u.View(t,n,i,r);return n.PRt(this),this.views[t]=n},_.prototype.GRt=function(t,n){var n=new u.View(t,n);return n.PRt(this),this.QOt.rV[t]=n},_.prototype.removeView=function(t){var n=this.views;n[t].PRt(h),delete n[t],this.URt(t)},_.prototype.URt=function(t){var n,i,r,n=this.QOt.tables;for(i in n)n.hasOwnProperty(i)&&delete(r=n[i]).VOt[t]},_.prototype.HRt=function(t){return this.views[t]},_.prototype.zRt=function(t){for(var n,i,n=0;n<this.Pq.length;n++)if((i=this.Pq[n]).name===t)return i;return null},_.prototype.VRt=function(t){var n,i,r,n=this.getDataSync(t),i=[];if(t)for(r=0;r<t.length;r++)i.push(n[t[r]]);else for(r=0;r<n.length;r++)i.push(n[r]);return i},_.prototype.vRt=function(t){return this.VRt([t])[0]},_.prototype.gRt=function(t){return this._dataSource.lOt(t)},_.prototype.YRt=function(t,n){for(var i,r,i=[],r=0;r<n.length;r++)i.push(this._getValueByField(t,n[r]));return i},_.prototype.bEt=function(t){return this.XOt[t]||!this.CEt()||(0,y.isNullOrEmpty)(this._dataSource.l7t(t))||(this.XOt[t]=new a.HierarchyField(t,this)),this.XOt[t]||(this.XOt[t]=new("="===t[0]?s.CalcField:c.TableField)(t,this)),this.XOt[t]},_.prototype.ZRt=function(t){var t=this.XOt[t];return t&&t.setValue},_.prototype.WRt=function(t,n,i){this.rRt(t);var r=this.XOt[t];return this.o_t(t),r&&r.setValue&&r.setValue(n,i)},_.prototype.QRt=function(t,n,i,r,e){this.rRt(t);var u=this.XOt[t];return this.o_t(t),u&&u.setItemValue&&u.setItemValue(n,i,r,e)},_.prototype.KRt=function(t,n){this.rRt(t);var t=this.XOt[t];return t&&t.hasItem&&t.hasItem(n)},_.prototype.JRt=function(t,n,i,r,e){this.rRt(t);var u=this.XOt[t];return this.o_t(t),u&&u.insertItem&&u.insertItem(n,i,r,e)},_.prototype._getValueByField=function(t,n){return this.rRt(t),this.XOt[t].getValue(n)},_.prototype.XRt=function(t,n){return this.rRt(t),this.XOt[t].getOriginalValue(n)},_.prototype.qRt=function(t){return this.rRt(t),this.XOt[t].getRelatedTable()},_.prototype.$Rt=function(t){return this.rRt(t),this.XOt[t].getRelationMaps()},_.prototype.tBt=function(t){for(var n,i,r,e,u,o,n=this,i,r,e=0,u=n.QOt.relationships;e<u.length;e++){if((o=u[e]).sourceTable===n&&o.sourceFieldName===t)return o.targetTable;if(o.targetTable===n&&o.targetFieldName===t)return o.sourceTable}},_.prototype.nBt=function(t,n){return this.rRt(t),this.XOt[t].getHostTableIndexes(n)},_.prototype.rRt=function(t){this.XOt[t]||this.bEt(t)},_.prototype.xOt=function(t,n,i,r,e){var n={name:n,sourceField:t,targetTable:i,targetField:r,CRt:e};return this.Pq.push(n),n},_.prototype.kOt=function(t){for(var n=this.Pq.length-1;0<=n;n--)this.Pq[n].CRt===t&&this.Pq.splice(n,1)},_.prototype.eBt=function(){for(var t,n,i,r,t=[this],n=this.Pq,i=0;i<n.length;i++)r=n[i].targetTable,-1===t.indexOf(r)&&t.push(r);return t},_.prototype.iBt=function(n){var i,t,r,i=this,t=i.Pq,r={};return t.forEach(function(t){var t=t.name;r[t]=i._getValueByField(t,n)}),r},_.prototype.rBt=function(t){var t=this.jRt(t);return t&&t.dataType},_.prototype.jRt=function(t){var n,i,r,n=this,i=n._dataSource.options.schema;return i&&i.columns&&i.columns[t]?r=i.columns[t]:(0,y.isNullOrUndefined)(n.columns)||(r=n.columns[t]),r},_.prototype.oBt=function(t){var n,i,t;return 0===t.length?[]:((t=(i=(n=this).zRt(t[0]))&&i.targetTable?i.targetTable.oBt(t.slice(1)):[]).unshift(i),t.filter(function(t){return!(0,y.isNullOrUndefined)(t)}))},_.prototype.toJSON=function(){var t,n,i,t=this.views,n=[];for(i in t)t.hasOwnProperty(i)&&n.push(t[i].toJSON());return{name:this.name,dataSourceOption:O(this._dataSource.options),primaryKey:this.primaryKey(),views:n,columns:this.aBt(this.columns)}},_.prototype.fromJSON=function(t){for(var n,i,r,e,u,n,i=0,r=t.views;i<r.length;i++)e=r[i],(u=this.addView(e.name,e.columns,!1,e.options)).fromJSON(e);this.columns=t.columns,this.primaryKey(t.primaryKey)},_.prototype.bind=function(t,n){this._dataSource.bind(t,n)},_.prototype.unbind=function(t,n){this._dataSource.unbind(t,n)},_.prototype.ki=function(t,n){return this._dataSource.ki(t,n)},_.prototype.vOt=function(t){return this._dataSource.vOt(t)},_.prototype.aBt=function(t){var n,i;for(n in t)t.hasOwnProperty(n)&&!(0,y.isNullOrUndefined)(t[n])&&((i=t[n]).W5=i.dataType);return t},_.prototype.z7t=function(t,n,i){return this._dataSource.z7t(t,n,i)},_.prototype.V7t=function(t){return this._dataSource.V7t(t)},_.prototype.d7t=function(t,n,i){return this._dataSource.d7t(t,n,i)},_.prototype.uBt=function(){return this._dataSource.$jt()},_.prototype.qX=function(){return this._dataSource.qX()},_.prototype.m7t=function(t,n,i,r){return this.CEt()&&this.NRt(),this._dataSource.m7t(t,n,i,r)},_.prototype.CEt=function(){return this._dataSource.isHierarchy()},_.prototype.isHierarchy=function(){return this.CEt()},_.prototype.getHierarchyType=function(){return this._dataSource.Fjt()},_.prototype.isHierarchyOptionChanged=function(){return this._dataSource.a7t()},_.prototype.setHierarchyOptionChanged=function(){this._dataSource.u7t()},_.prototype.SEt=function(t){return this._dataSource.SEt(t)},_.prototype.f7t=function(){return this._dataSource.f7t()},_.prototype.getHierarchyRootNode=function(){return this.f7t()},_.prototype.M7t=function(t){this._dataSource.M7t(t),this.NRt()},_.prototype.S7t=function(t,n){this._dataSource.S7t(t,n),this.NRt()},_.prototype.O7t=function(t,n){return this._dataSource.O7t(t,n)},_.prototype.L7t=function(t,n){return this._dataSource.L7t(t,n)},_.prototype.F7t=function(t,n){return this._dataSource.F7t(t,n)},_.prototype.G7t=function(t,n){return this._dataSource.G7t(t,n)},_.prototype.H7t=function(t){return this._dataSource.H7t(t)},_.prototype.h7t=function(t,n){return this._dataSource.h7t(t,n)},_.prototype.isColumnSpreadChanged=function(){return this._dataSource.Mue()},_.prototype.setColumnSpreadChanged=function(t){this._dataSource.Cue(t)},n.Table=_},"./dist/src/table/tableEvents.js":function(t,n){"use strict";var i;function r(){}Object.defineProperty(n,"__esModule",{value:!0}),n.Events=void 0,r.ItemInserting="ItemInserting",r.ItemInserted="ItemInserted",r.ItemUpdating="ItemUpdating",r.ItemUpdated="ItemUpdated",r.ItemResetting="ItemResetting",r.ItemReset="ItemReset",r.ItemSaving="ItemSaving",r.ItemSaved="ItemSaved",r.ItemRemoving="ItemRemoving",r.ItemRemoved="ItemRemoved",r.ChangesSubmitting="ChangesSubmitting",r.ChangesSubmittedRowFailed="ChangesSubmittedRowFailed",r.ChangesSubmitted="ChangesSubmitted",r.ChangesCancelling="ChangesCancelling",r.ChangesCancelled="ChangesCancelled",n.Events=r},"./dist/src/table/tableField.js":function(t,n,i){"use strict";var c,f,r,e;function a(o,s,f){return function(t,n,i,r){var e=o.map[t],u=e;return(0,c.isNullOrUndefined)(u)&&(e=o.map[t]=[]),n[s.targetField]=f._getValueByField(s.sourceField,t),o.relatedTable.JRt(o.subField,void 0,n,function(t){e.push(t.index),t.index=e.length-1,i&&i(t)},r)}}function u(t,o){var e,s,u,t,e=this,s="string"==typeof t?t.split("."):t,u=s[0]&&o.zRt(s[0]);u&&u.targetTable?(this.relatedTable=u.targetTable,this.map=u.LOt,this.setValue=null,this.map||(u.CRt.BOt(),this.map=u.LOt),this.getRelationMaps=function(){var t=[{name:u.name,relationshipMap:u.CRt.DOt(u.name)}];if(this.relatedTable)return this.subField?t.concat(this.relatedTable.$Rt(this.subField)):t},this.getHostTableIndexes=function(t){var n,i,t,i,r,n=[t];return this.relatedTable?(this.subField&&(n=this.relatedTable.nBt(this.subField,t)),t=void 0,t=(i=u.CRt).targetTable===this.relatedTable?i.targetRelationshipName:i.sourceRelationshipName,i=this.relatedTable.zRt(t),r=i.LOt,n.reduce(function(t,n){return t.concat(r[n])},[])):n},"object"===u.type?1===s.length?(this.getValue=function(t){var t=e.map[t];return(0,c.isNullOrUndefined)(t)?f:e.relatedTable.vRt(t[0])},this.setValue=function(t){var n=t[s[0]];return t[u.sourceField]=n?n[u.targetField]:null,t}):(this.subField=s.slice(1).join("."),this.getValue=function(t){var t=e.map[t];return(0,c.isNullOrUndefined)(t)?f:e.relatedTable._getValueByField(e.subField,t[0])},this.getOriginalValue=function(t){var t=this.map[t];return(0,c.isNullOrUndefined)(t)?f:this.relatedTable.XRt(this.subField,t[0])},this.setItemValue=function(t,n,i,r){var t=e.map[t];return(0,c.isNullOrUndefined)(t)?f:e.relatedTable.QRt(e.subField,t[0],n,i,r)},this.hasItem=function(t){var t=e.map[t];return!(0,c.isNullOrUndefined)(t)&&e.relatedTable.KRt(e.subField,t[0])},this.insertItem=a(this,u,o)):1===s.length?this.getValue=function(t){var t=e.map[t];return(0,c.isNullOrUndefined)(t)?[]:e.relatedTable.VRt(t)}:(t=s[1]-1,isNaN(t)?(this.subField=s.slice(1).join("."),this.getValue=function(t){var t=e.map[t];return(0,c.isNullOrUndefined)(t)?f:e.relatedTable.YRt(e.subField,t)},this.getOriginalValue=function(t){var t=this.map[t];return(0,c.isNullOrUndefined)(t)?f:this.relatedTable.XRt(this.subField,t)},this.hasItem=function(t){var t=e.map[t];return t&&0<t.length},this.insertItem=a(this,u,o)):2===s.length?(this.arrayFieldIndex=s[1]-1,this.getValue=function(t){var t,t,t=e.map[t],t=t&&t[e.arrayFieldIndex];return(0,c.isNullOrUndefined)(t)?f:e.relatedTable.vRt(t)}):(this.arrayFieldIndex=t,this.subField=s.slice(2).join("."),this.getValue=function(t){var t,t,t=e.map[t],t=t&&t[e.arrayFieldIndex];return(0,c.isNullOrUndefined)(t)?f:e.relatedTable._getValueByField(e.subField,t)},this.getOriginalValue=function(t){var t,t,t=this.map[t],t=t&&t[this.arrayFieldIndex];return(0,c.isNullOrUndefined)(t)?f:this.relatedTable.XRt(this.subField,t)},this.setItemValue=function(t,n,i,r){var t,t,t=e.map[t],t=t&&t[e.arrayFieldIndex];if(!(0,c.isNullOrUndefined)(t))return e.relatedTable.QRt(e.subField,t,n,i,r)}))):(0===s.length?this.getValue=function(t){return o._dataSource.get(t)}:1===s.length?(this.getValue=function(t){return o._dataSource.getFieldValue(s[0],t)},this.getOriginalValue=function(t){return o._dataSource.getFieldOriginalValue(s[0],t)},this.getRelatedTable=function(){return o},this.setItemValue=function(t,n,i,r){return o.updateItemValue(t,s[0],n,i,r)},this.hasItem=function(t){return o._dataSource.length()>t},this.insertItem=function(t,n,i,r){var e=(0,c.isNullOrUndefined)(t)?o.length():t;return o.insertItem(e,n,function(t){t.index=e,i&&i(t)},r)}):(this.getValue=function(t){for(var n,i,n=o._dataSource.getFieldValue(s[0],t),i=1;n&&i<s.length;i++)n=n instanceof Array?n[s[i]-1]:n[s[i]];return n},this.setItemValue=function(t,n,i,r){var e,u,u,u=o._getValueByField(s[0],t);if(!(0,c.isNullOrUndefined)(u))return u=(0,c.clone)(u,!0),this.setValue(((e={})[s[0]]=u,e),n),o.updateItemValue(t,s[0],u,i,r)}),this.setValue=function(t,n){for(var i,r,e,u,i=t,r=t,e=s.length,u=0;r&&u<e;u++)i=r instanceof Array?r[s[u]-1]:r[s[u]],u!==e-1&&(r=i);return r!==i&&(i!==n||(0,c.isNullOrUndefined)(i)&&(0,c.isNullOrUndefined)(n))&&(r[s[e-1]]=n),t})}Object.defineProperty(n,"__esModule",{value:!0}),n.TableField=void 0,c=i("./dist/src/dataSource/utils.js"),f=null,r=void 0,u.prototype.getValue=function(t){return null},u.prototype.getValues=function(t,n){for(var i,r,e,i=[],r=n=n||0,e=t.length;r<e;r++)i.push(this.getValue(t[r]));return i},u.prototype.setValue=function(t,n){return null},u.prototype.setItemValue=function(t,n,i,r){},u.prototype.hasItem=function(t){},u.prototype.insertItem=function(t,n){},u.prototype.getOriginalValue=function(t){return null},u.prototype.getRelatedTable=function(){if(this.relatedTable)return this.subField?this.relatedTable.qRt(this.subField):this.relatedTable},u.prototype.getRelationMaps=function(){return[]},u.prototype.getHostTableIndexes=function(t){return[t]},n.TableField=u},"./dist/src/viewField/fieldManager.js":function(t,n,i){"use strict";var u,f,E,o,P,b,s,F;function e(r,e,u,o){return function(t,n){var n,i,n=r.getField(n),i=u&&!(0,s.isGroupSlice)(n.name)&&n.extra&&n.extra.caption||n.name;return o&&n instanceof b.ColumnDataReaderField||(t[i]=n.getValue(e)),t}}function r(t,n){this.Pq=[],this.positionOfField=[],this.keysOfBaseField=[],this.sBt=t,this.cBt={},this.nM=n}function c(t,n){for(var n,i,r,e,u,o,s,f,n=n.valueRelation,i=n.split("."),r=t(n),e="",u=!1,o=!1,s=0;s<i.length;s++)f=r[s],(0,E.isNullOrEmpty)(i[s])||(e+=".".concat(i[s])),!o&&f&&"array"===f.type&&f.name===i[s]&&(u=o=!0,e+=".".concat(P.RelationTemplateToken));return{isOneToMany:u,relationTemplate:e.slice(1)}}function a(t,n,i,r){var e,u,e=N(t),u;return{valueRelation:t,valueCaption:n||e,valueIndex:i,valueCrossKey:r}}function T(t){for(var n,i,r,e,u,n=t.columns,i=t.crossKeys,r=t.initialOptionIndex,e=[],u=0;u<n.length;u++)e.push(a(n[u].value,n[u].caption,r+u,i[u]));return e}function A(t,n){return h(t,n,"")}function h(t,n,i){return!(0,E.isNullOrEmpty)(n)&&0<=t.indexOf(n)?h(t=t.replace(n,i),n,i):t}function w(t){var t=t.value;return"string"==typeof t?t:"function"==typeof t?t.name:void 0}function v(t){var t,t="string"==typeof t||(0,E.isNullOrUndefined)(t)?t:"function"==typeof t?t.name:t.value;return(t||"").split(".")}function N(t){var t=v(t);return t[t.length-1]}function D(t){if(!(0,E.isNullOrEmpty)(t.formatter))return t.formatter}function k(t){var t=v(t);return t[t.length-2]}function L(t,n){var t=v(t);return n&&t.splice(t.length-1,0,""),t.slice(0,t.length-1).join(".")}function q(t){return"string"==typeof t?[t]:t||[]}function m(t){for(var n,i,r,e,u,n=0,i={},r=0;r<t.length;r++)e=t[r].caption,(0,E.isArray)(e)?(t[r].caption=e.map(function(t){return null==t?void 0:t.toString()}),i[r]=e.length,n<i[r]&&(n=i[r])):t[r].caption=null==e?void 0:e.toString();for(r in i)if(i[r]<n)for(u=n-i[r],e=t[r].caption;0<u;)e.unshift(),u--;for(r=0;r<t.length;r++)e=t[r].caption,(0,E.isArray)(e)&&1===e.length&&(t[r].caption=e[0])}function l(t,n){var t,t,t,i,t=t.qRt(n);if(!((0,E.isNullOrUndefined)(t)||(t=t._dataSource.options.schema,(0,E.isNullOrUndefined)(t))||(t=t.columns,(0,E.isNullOrUndefined)(t))||(i=t[N(n)],(0,E.isNullOrUndefined)(i))))return i.lookup}function d(t,n){return p(t,n)||j(t,n)}function p(t,n){return(0,E.isArray)(l(t,n))}function j(t,n){var i,r,e,u,n,i=l(t,n);if((0,E.isObject)(i)&&(i=i.name),(0,E.isString)(i))return r=t.qRt(n),e=N(n),u=N(i),n=t.QOt.relationships.find(function(t){return t.sourceTable===r&&t.sourceFieldName===e&&t.sourceRelationshipName===u}),!(0,E.isNullOrUndefined)(n)}function y(t,n,i){var r=N(i),i=S(t,function(t){return t.sourceFieldName===r&&t.sourceTable===n});return i?{relationTable:i.targetTable,relationPrimaryKey:i.targetFieldName,relationTableName:i.sourceRelationshipName}:{}}function g(t,n,i){var r,n,e,u,n,u,n,e,u,r,r=n.over,n=n.attributes;return!((0,E.isNullOrEmpty)(r)||(0,E.isNullOrEmpty)(i)||i===r||_(t,i)||(e=v(i),n=!(u=p(t,r))&&j(t,r)&&n&&0<n.length,!u&&!n)||(u=y(t,O(t,r),r),-1<e.indexOf(u.relationTableName)))&&(n=t.$Rt(r),e=t.$Rt(i),!(!n.every(function(t){return t.relationshipMap===o.RelationshipMap.OneToOne})||!e.every(function(t){return t.relationshipMap===o.RelationshipMap.OneToOne}))||(u=(0,E.findIndex)(n,function(t){return t.relationshipMap===o.RelationshipMap.OneToMany}),r=(0,E.findIndex)(e,function(t){return t.relationshipMap===o.RelationshipMap.OneToMany}),-1<u&&u===r&&n[u].name===e[r].name?n.slice(u+1).every(function(t){return t.relationshipMap===o.RelationshipMap.OneToOne})&&e.slice(u+1).every(function(t){return t.relationshipMap===o.RelationshipMap.OneToOne}):void 0))}function _(t,n){var i=O(t,n),r=N(n);return i.jOt(r)||S(t,function(t){return t.sourceTable===i&&t.sourceFieldName===r||t.targetTable===i&&t.targetFieldName===r})}function O(t,n){return t.qRt(n)}function S(t,n){return t.QOt.relationships.find(n)}function C(t){var r=t.ascending,i=t.compare;return i?function(t,n){return i(t.extra.caption,n.extra.caption,r)}:function(t,n){var t=t.extra.caption,n=n.extra.caption,i=r?t:n,n=r?n:t;return n<i?1:i<n?-1:0}}u=this&&this.__spreadArray||function(t,n,i){if(i||2===arguments.length)for(var r=0,e=n.length,u;r<e;r++)!u&&r in n||((u=u||Array.prototype.slice.call(n,0,r))[r]=n[r]);return t.concat(u||Array.prototype.slice.call(n))},Object.defineProperty(n,"__esModule",{value:!0}),n.isValidCross=n.isLookupRelationField=n.isLookupListField=n.isLookupField=n.getLookupBy=n.FieldManager=void 0,f=i("CalcEngine"),E=i("./dist/src/dataSource/utils.js"),o=i("./dist/src/interfaces/interface.js"),P=i("./dist/src/viewField/utils.js"),b=i("./dist/src/viewField/fields.js"),s=i("./dist/src/viewField/groupManager.js"),r.prototype.fBt=function(t,n){return this.nM._getValueByField(t,n)},r.prototype.lBt=function(t,n){return this.nM.XRt(t,n)},r.prototype.hBt=function(t){return this.nM.iBt(t)},r.prototype.dBt=function(t){return S(this.nM,t)},r.prototype.vBt=function(t){return O(this.nM,t)},r.prototype.mBt=function(t){return this.nM._dataSource._data[t].data},r.prototype.gBt=function(t){return!(0,E.isNullOrUndefined)(this.nM._dataSource._data[t])},r.prototype.oBt=function(t){return this.nM.oBt(t.split("."))},r.prototype.pBt=function(){return this.nM.POt},r.prototype.bBt=function(t){return l(this.nM,t)},r.prototype.yBt=function(t){return d(this.nM,t)},r.prototype.wBt=function(t){return p(this.nM,t)},r.prototype.MBt=function(t){return j(this.nM,t)},r.prototype.getField=function(t){return this.Pq[t]},r.prototype.getFieldByPosition=function(t){return this.getField(this.positionOfField[t])},r.prototype.getFieldByName=function(n){return this.Pq.filter(function(t){return t.name===n})[0]},r.prototype.getFields=function(t){return this.Pq.filter(t)},r.prototype.getFieldValues=function(t,n,i){var r=this;return r.positionOfField.reduce(e(r,t,n,i),{})},r.prototype.CBt=function(t){var n=this;return n.positionOfField.filter(function(t){return-1===n.keysOfBaseField.indexOf(t)}).reduce(e(n,t),{})},r.prototype.moveFields=function(t,n,i){(0,E.swapArrayItems)(this.Pq,t,n,i)},r.prototype.moveFieldsByIndexes=function(t){var n=this;t.forEach(function(t){t.field=n.Pq[t.oldIndex]}),t.forEach(function(t){n.Pq[t.newIndex]=t.field})},r.prototype.removeFields=function(t,n){this.Pq.splice(t,n||1)},r.prototype.reset=function(){var i=this;i.positionOfField=i.keysOfBaseField.slice(),i.Pq=i.Pq.reduce(function(t,n){return-1<i.keysOfBaseField.indexOf(n.key)?t.concat(n):t},[])},r.prototype.SBt=function(t){var n=this,i=n.cBt,r=i[t],e=n.pBt(),u=e.getCalcService(),r=r||(i[t]=n.fixExpression(u.parse(e,t,0,0)));return function(t,n){return e.pe(t,n),u.evaluateExpression(e,r,{row:0,col:0})}},r.prototype.TBt=function(t,n){var i=this,r=i.cBt,e=r[t],u=n||i.pBt(),o=u.getCalcService(),e=e||(r[t]=i.fixExpression(o.parse(u,t,0,0)));return function(t,n){u.pe(t,n);var t=o.MX.evaluateExpression(e,u.getEvaluatorContext({row:0,col:0},!1),!1,!0);return(0,E.isNullOrUndefined)(t.toArray)?[]:t.toArray()}},r.prototype.fixExpression=function(t){var n,i,r,e,u,o,s,n=this;if(t.function)for(t.function.isReverseArgs&&t.function.isReverseArgs()&&t.arguments.reverse(),i=0,r=t.arguments;i<r.length;i++)e=r[i],n.fixExpression(e);else for(u=0,o=Object.getOwnPropertyNames(t);u<o.length;u++)t[s=o[u]]instanceof f.Expression&&n.fixExpression(t[s]);return t},r.prototype.ABt=function(t){var n=this;return t.key=n.Pq.length,n.Pq.push(t),t},r.prototype.addDataBaseField=function(t,n,i){var r=this,t=r.addColumnDataField(t,n,i);return r.IBt(t)},r.prototype.addReaderBaseField=function(t,n,i){var r,t,r=this,t=r.addColumnDataReaderField(t,"function"==typeof n?n:function(t){return r.fBt(n,t)},i);return r.IBt(t)},r.prototype.IBt=function(t){var n=this,i=t.key;return n.keysOfBaseField.push(i),n.positionOfField.push(i),t},r.prototype.addColumnDataField=function(t,n,i){return this.ABt(new b.ColumnDataField(t,n,i))},r.prototype.addColumnDataReaderField=function(t,n,i){return this.ABt(new b.ColumnDataReaderField(t,n,i))},r.prototype.addDataField=function(t,n){return this.ABt(new b.DataField(t,n))},r.prototype.addFormulaField=function(t,n){return this.ABt(this.xBt(t,n))},r.prototype.xBt=function(t,n){return new b.FormulaField(t,n,this.SBt(n))},r.prototype.addCategoryFormulaField=function(t,n){return this.ABt(this.NBt(t,n))},r.prototype.NBt=function(t,n){return new b.CategoryFormulaField(t,n,this.SBt(n))},r.prototype.addCategoryField=function(t,n){return this.ABt(this.kBt(t,n))},r.prototype.kBt=function(t,n){return new b.CategoryField(t,n)},r.prototype.addSliceCategoryField=function(t){return this.ABt(new b.SliceCategoryField(t))},r.prototype.DBt=function(t,n,i,r,e){for(var u,o,s,f,c,a,a,h,v,l,u=this,o=t.fieldExtra,s=t.field,v=0,l=i.length;v<l;v++)c=(a=i[v]).result,a=a.key,h=t.sliceFields[a],(0,E.isUndefined)(h)&&(f=s.getValueByKey(a),(h=u.addSliceCategoryField((0,P.combineName)(f,t.sliceKeys.length,n.name))).setFieldExtra(o),t.sliceFields[a]=h,t.sliceKeys.push(h.key)),h.setData(c,r,e)},r.prototype._Bt=function(n,t,i,r){var e=this;return(0,P.isField)(n)?e.getFieldByName(n):(0,P.isFormula)(n)?e.EBt("".concat(r,"_formula_source"),t,n,i):(0,P.isRelated)(n)?new b.ColumnDataReaderField("".concat(r,"_related_source"),function(t){return e.fBt(n,t)},null):e.getFieldByName(n)},r.prototype.EBt=function(t,n,i,r){var e,t=this.xBt((0,P.combineName)(t,n),i);return t.evaluateFormulaBy(r),t},r.prototype.buildGroupFields=function(t,s){var f=this,i,c,a=[];return t.forEach(function(t,n){var o,n,n;(0,E.isNullOrEmpty)(t.field)||(c=(0,E.isNullOrUndefined)(c)?i={}:c.group={},o=(0,P.combineName)(t.field,n),n=f._Bt(t.field,o,s,"group_field"),(n=f.addCategoryField(o,n)).setFieldExtra(t),a.push(n.key),c.field=n,(0,E.isNullOrUndefined)(t.summaryFields))||t.summaryFields.forEach(function(t,n){var n,i,r,i,e,u,n,u,n;(0,E.isNullOrEmpty)(t.formula)||(n=(0,P.combineName)(t.formula,n,o),(i=f.addCategoryFormulaField(n,t.formula)).setFieldExtra(t),(0,E.isNullOrUndefined)(c.formulas)&&(c.formulas=[]),r=c.formulas.push(i)-1,a.push(i.key),(0,E.isNullOrUndefined)(t.slice))||(i=t.slice,u=(e=(0,E.isString)(i))?i:i.field,n=(0,P.combineName)(u,n),u=f._Bt(u,n,s,"slice"),u=f.kBt((0,P.combineName)("slice_category",n),u),(0,E.isNullOrUndefined)(c.slices)&&(c.slices=[]),n=f.NBt((0,P.combineName)("slice_formula_result",n),t.formula),c.slices.push({field:u,formula:n,formulaIndex:r,sliceKeys:[],fieldExtra:e?{}:i,sliceFields:{},addSliceField:f.DBt.bind(f)}))})}),f.positionOfField=a.concat(f.keysOfBaseField),i},r.prototype.transposeSliceFields=function(n){var i=this,r,e;n.slices&&n.slices.forEach(function(t){var t;r=i.positionOfField.indexOf(n.formulas[t.formulaIndex].key),e=t.sliceKeys,(0,E.isNullOrUndefined)(t.fieldExtra.sort)||(e=e.map(function(t){return i.getField(t)}).sort(C(t.fieldExtra.sort)).map(function(t){return t.key})),(t=i.positionOfField).splice.apply(t,u([r+1,0],e,!1))}),n.group&&i.transposeSliceFields(n.group)},r.prototype.prepareFields=function(o){for(var s,f,c,a,t,n,i,r,e,u,e,h,v,l,d,p,j,y,s=this,f=[],c=0,a=0;c<o.length;c++,a++)if(n=w(t=o[c]),i=t.value,r=t.cross){if(u=(e=s.jBt(o,c)).crossColumnOptions,e=e.endColIndex,h=u.columns.length,0!==(v=s.OBt(u))){for(l=function(t,n){var i,r,i,e,u,i=a+t,r=c+n,i=s.getField(i);i.setFieldExtra(o[r]),e={value:i.name,name:i.name,isCross:!0,RBt:r},i.isReadonly()&&(e.readonly=!0),(u=i.extra)&&(0,b.setFieldExtraProperties)(function(t){u[t]&&(e[t]=u[t])}),f.push(e),d=++t,p=n=h<=++n?0:n},y=j=0;j<v;)l(j,y),j=d,y=p;c=e,a+=v-1}}else s.gBt(n)?s.addDataBaseField(n,s.mBt(n),t):s.addReaderBaseField(n,i,t),f.push(o[c]);return m(f),f},r.prototype.jBt=function(t,n){var i,r,e,u,e,o,s,i=this,r=n,e=t[n],u=e.cross,e=i.BBt(u,[e],r);if("string"==typeof u){for(s=o=n;n<t.length&&!(++s<t.length&&u!==t[s].cross);)n++;e=i.BBt(u,t.slice(o,s),r)}return{crossColumnOptions:e,endColIndex:n}},r.prototype.BBt=function(t,n,i){var t="string"==typeof t?this.sBt.cross[t]:t;return{initialOptionIndex:i,crossKeys:n.map(function(t){return t.LBt}),cross:t,columns:n,lookup:this.FBt(t,n)}},r.prototype.FBt=function(n,t){var i=this;return t.every(function(t){return i.isValidCross(n,t.value)})&&this.bBt(n.over)},r.prototype.isValidCross=function(t,n){return g(this.nM,t,n)},r.prototype.OBt=function(t){var n=this,i=t.lookup,r=0;return(0,E.isArray)(i)?r=n.PBt(t):((0,E.isString)(i)||(0,E.isObject)(i))&&(r=n.GBt(t)),r},r.prototype.GBt=function(t){var n,i,r,e,u,o,s,f,c,a,h,t,v,l,d,p,j,v,y,i,b,w,m,g,_,O,S,C,F,R,M,I,x,R,I,n=this,i=t.cross,r=n.sBt.showCrossValueHeader,e=q(i.caption),u=0,o=T(t),s=i.over,f=N(s),c=s,a=i.attributes||[],h=a.length,t=L(a[0],!0),v=n.UBt(n.vBt(c),c),l=v.relationTableName||k(a[0]),d=v.relationTable||n.HBt(l),p=d.length(),j=v.relationPrimaryKey||n.zBt(l,f),v=i.filter?n.TBt(A(i.filter,t),d.POt):null;for((0,E.isNullOrUndefined)(v)||0<(i=v(null)).length&&(y=i.reduce(function(t,n){var i;return t["object"==typeof n?n[j]:n]=!0,t},{})),b=[],w=0;w<h;w++)m=N(a[w]),g=D(a[w]),b.push({fieldName:m,formatter:g});for(_=0;_<p;_++)if(O=d._getValueByField(j,_),(0,E.isNullOrUndefined)(y)||y[O]){for(S=e.slice(),w=0;w<h;w++)m=b[w].fieldName,C=d._getValueByField(m,_),g=b[w].formatter,(0,E.isNullOrUndefined)(g)||(C=(0,E.format)(C,g)),S.push(C);for(F=0;F<o.length;F++)M=(R=o[F]).valueRelation,I=R.valueCaption,x=R.valueIndex,R=R.valueCrossKey,I=r?S.concat(I):S,n.VBt({path:I,value:(0,P.combineName)(M,O,s,R),valueRelation:M,dimRelationPath:c,dimRelationKey:f,dimTableName:l,dimTableKeyFieldValue:O,initialOptionIndex:x}),u++}return u},r.prototype.PBt=function(t){for(var n,i,r,e,u,o,s,f,c,a,h,v,l,d,p,j,y,b,w,j,b,n=this,i=t.cross,r=t.lookup,e=n.sBt.showCrossValueHeader,u=q(i.caption),o=0,s=T(t),f=i.over,c=N(f),a=f,h=r.length,v=0;v<h;v++)for(l=u.slice(),d=r[v],l.push(d),p=0;p<s.length;p++)y=(j=s[p]).valueRelation,b=j.valueCaption,w=j.valueIndex,j=j.valueCrossKey,b=e?l.concat(b):l,n.VBt({path:b,value:(0,P.combineName)(y,d,f,j),valueRelation:y,dimRelationPath:a,dimRelationKey:c,dimTableKeyFieldValue:d,initialOptionIndex:w}),o++;return o},r.prototype.setCrossFieldValues=function(t){var n,i,r,e,u,o,s,f,c,n=this,i=n.Pq,r=t.length,e=i.filter(function(t){return t instanceof b.CrossField});if(0<e.length)for(u=0;u<r;u++)for(o=t[u],s={},f=0;f<e.length;f++)c=e[f],n.YBt(c,o,s)},r.prototype.YBt=function(t,n,i){var r,e,u,o,r=this,e=t.dimRelationPath,u=i[e];if((0,E.isNullOrUndefined)(u)&&t.isOneToMany&&(u=i[e]=r.fBt(e,n)),(0,E.isArray)(u))for(o=0;o<u.length;o++)if(t.ZBt(u[o],t.dimTableKeyFieldValue)&&(0,E.isNullOrUndefined)(t.getValueIndex(n))){t.setValueIndex(n,o);break}},r.prototype.zBt=function(n,i){var t=this,r=t.dBt(function(t){return t.sourceFieldName===i&&t.sourceRelationshipName===n});return r?r.targetFieldName:(r=t.dBt(function(t){return t.targetFieldName===i&&t.targetRelationshipName===n}))?r.sourceFieldName:void 0},r.prototype.HBt=function(n){var t,i=this.dBt(function(t){return t.sourceRelationshipName===n||t.targetRelationshipName===n})||{},i=i.sourceRelationshipName===n?i.sourceField:i.targetField;return i?i.targetTable:{length:function(){return 0}}},r.prototype.UBt=function(t,n){return y(this.nM,t,n)},r.prototype.WBt=function(t){var n=this,t=new b.CrossField(t,n.fBt.bind(n),n.lBt.bind(n),n.hBt.bind(n));return n.ABt(t),n.IBt(t),t},r.prototype.VBt=function(t){var n,t,n,i,n,n=this,t=n.WBt(t);t.isReadonly()||(i=(n=c(n.oBt.bind(n),t)).isOneToMany,n=n.relationTemplate,i&&(t.isOneToMany=i,t.valueArrayRelation=n))},r.prototype.isCrossField=function(t){return t instanceof b.CrossField},r.prototype.clearCrossFieldData=function(){for(var t,n,i,r,t,n=this.Pq,i=0;i<n.length;i++)(r=n[i])instanceof b.CrossField&&r.clearData()},r.prototype.resetCrossFieldRowValues=function(t){for(var n,i,r,e,u,n=this,i=n.Pq,r={},e=0;e<i.length;e++)(u=i[e])instanceof b.CrossField&&(u.clearValue(t),n.YBt(u,t,r))},r.prototype.removeCrossFieldValues=function(t,n){for(var i,r,e,u,i,r=this.Pq,e=0;e<r.length;e++)(u=r[e])instanceof b.CrossField&&u.removeData(t,n)},r.prototype.setCrossFieldInsertedIndex=function(t,n,i){for(var r,e,u,o,s,r,e=this.Pq,u=L(t.valueRelation,!0),o=0;o<e.length;o++)(s=e[o])instanceof b.CrossField&&s.isOneToMany&&t.dimTableKeyFieldValue===s.dimTableKeyFieldValue&&(0,E.isNullOrUndefined)(s.getValueIndex(n))&&u===L(s.valueRelation,!0)&&s.setValueIndex(n,i)},n.FieldManager=r,n.getLookupBy=l,n.isLookupField=d,n.isLookupListField=p,n.isLookupRelationField=j,n.isValidCross=g},"./dist/src/viewField/fields.js":function(t,n,i){"use strict";var r,s,f,i,e,u,o,c,e,a,h,v,l,d,p,j,y,b,w,m,g;function _(t){["caption","width","style","headerStyle","conditionalFormats","validator","headerFit"].forEach(t)}function O(t){this.name=t}function S(t,n){var t=d.call(this,t)||this;return t.data=n||[],t}function C(t,n,i){var t=p.call(this,t,n)||this;return t.column=i,t}function F(t,n,i){var t=j.call(this,t)||this;return t.column=i,t.getValue=n,t}function R(t,n,i){var t=y.call(this,t)||this;return t.formula=n,t.P6t=i,t}function M(t,n){return t._error||t._code?"Calc Error ".concat(n,":").concat(t._error,",").concat(t._code):t}function I(t,n){var t=b.call(this,t)||this;return t.QBt=n,t.KBt={},t.Oit=[],t}function x(t,n,i){var t=w.call(this,t)||this;return t.P6t=i,t.formula=n,t}function E(t){return m.call(this,t)||this}function P(t,n,i,r){var e=g.call(this,t.value)||this;return e.path=t.path,e.valueRelation=t.valueRelation,e.dimRelationPath=t.dimRelationPath,e.dimRelationKey=t.dimRelationKey,e.dimTableName=t.dimTableName,e.isDateDimValue=t.dimTableKeyFieldValue instanceof Date,e.dimTableKeyFieldValue=e.isDateDimValue?t.dimTableKeyFieldValue.getTime():t.dimTableKeyFieldValue,e.initialOptionIndex=t.initialOptionIndex,e.getValueByField=T(t,r,n),e.getOriginalValueByField=T(t,r,i),e.data=[],e}function T(t,i,r){return(0,s.isFunction)(t.valueRelation)?function(t,n){return(0,s.isFunction)(t)?t(i(n)):r(t,n)}:r}r=this&&this.__extends||(l=function(t,n){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,n){t.__proto__=n}:function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}))(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}l(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}),Object.defineProperty(n,"__esModule",{value:!0}),n.CrossField=n.SliceCategoryField=n.CategoryFormulaField=n.CategoryField=n.FormulaField=n.ColumnDataReaderField=n.ColumnDataField=n.DataField=n.Field=n.setFieldExtraProperties=void 0,s=i("./dist/src/dataSource/utils.js"),f=i("./dist/src/viewField/utils.js"),n.setFieldExtraProperties=_,O.prototype.setFieldExtra=function(n){var i,t,i=this;(0,s.isUndefined)(i.extra)&&(i.extra={}),_(function(t){i.JBt(t,n)}),(0,s.isNullOrUndefined)(n.caption)&&0<=(t=i.name.indexOf(f.FieldNameDelimiter))&&(i.extra.caption=i.name.substring(0,t))},O.prototype.JBt=function(t,n){var i,n=n[t];n&&(this.extra[t]=n)},O.prototype.getValue=function(t){return this.data[t]},O.prototype.getOriginalValue=function(t){return this.getValue(t)},O.prototype.XBt=function(t,n,i){var r,e,u,o,r=this;for(r.data||(r.data=[]),u=i=i||0,o=t.length;u<o;u++)e=t[u],r.data[e]=n;return r.data},O.prototype.qBt=function(t,n){var i,r,e,u,i=this;for(i.data||(i.data=[]),e=0,u=t.length;e<u;e++)r=t[e],i.data[r]=n(r);return i.data},n.Field=i=O,r(S,d=i),n.DataField=e=S,r(C,p=e),n.ColumnDataField=C,r(F,j=i),n.ColumnDataReaderField=F,r(R,y=e),R.prototype.evaluateFormulaBy=function(t){var n=this,i=n.formula,r=n.P6t;return n.qBt(t,function(t){return M(r(t),i)})[t[0]]},n.FormulaField=R,r(I,b=i),I.prototype.getKey=function(t){return this.KBt[t]},I.prototype.getMap=function(){return this.KBt},I.prototype.getValueByKey=function(t){return this.Oit[t]},I.prototype.$Bt=function(t,n){this.KBt[n]=t,this.Oit[t]=n},I.prototype.getValue=function(t){var n=this;return n.data&&0<n.data.length?n.Sl(t):n.QBt?n.QBt.getValue(t):void 0},I.prototype.Sl=function(t){var n=this;return n.Oit[n.data[t]]},I.prototype.addKey=function(t,n){var i=this,r=i.getKey(t);return(0,s.isUndefined)(r)&&i.$Bt(r=n,t),r},n.CategoryField=e=I,r(x,w=e),x.prototype.evaluateFormulaBy=function(t,n){var i,r,i=this,r=i.P6t(t,n=n||0);return i.XBt(t,i.addKey(r,t[n]),n),r},n.CategoryFormulaField=x,r(E,m=e),E.prototype.setData=function(t,n,i){var r=this,t=r.addKey(t,n[i]);r.XBt(n,t,i)},n.SliceCategoryField=E,r(P,g=i),P.prototype.setFieldExtra=function(t){g.prototype.setFieldExtra.call(this,t),this.extra.caption=this.path},P.prototype.ZBt=function(t,n){var i,r;return this.isDateDimValue&&t instanceof Date?t.getTime()===n:t===n},P.prototype.tLt=function(t,n){var i=this,r=i.isOneToMany,e=i.dimRelationPath,u=i.dimTableKeyFieldValue;return!r&&i.ZBt(n(e,t),u)?t:this.data[t]},P.prototype.getDimValue=function(){var t=this,n=t.isDateDimValue,t=t.dimTableKeyFieldValue;return n?new Date(t):t},P.prototype.getValueIndex=function(t){return this.tLt(t,this.getValueByField)},P.prototype.setValueIndex=function(t,n){this.data[t]=n},P.prototype.clearData=function(){this.data=[]},P.prototype.clearValue=function(t){this.data[t]=void 0},P.prototype.removeData=function(t,n){this.data.splice(t,n)},P.prototype.isReadonly=function(){return(0,f.isFormula)(this.valueRelation)||(0,s.isFunction)(this.valueRelation)},P.prototype.Sl=function(t,n){var i,r,e,u,i,o,i=this,r=i.isOneToMany,e=i.valueArrayRelation,u=i.valueRelation,i=i.tLt(t,n);if((0,s.isNumber)(i))return o=void 0,n(o=r?e.replace(f.RelationTemplateToken,i+1):u,t)},P.prototype.getValue=function(t){return this.Sl(t,this.getValueByField)},P.prototype.getOriginalValue=function(t){return this.Sl(t,this.getOriginalValueByField)},P.prototype.getRelationField=function(t){var n=this,i=n.isOneToMany,r=n.valueArrayRelation,e=n.valueRelation,n=n.getValueIndex(t);return i?(0,s.isNumber)(n)?r.replace(f.RelationTemplateToken,n+1):void 0:e},n.CrossField=P},"./dist/src/viewField/groupManager.js":function(t,n,i){"use strict";var s,e,r;function u(t,n){var i,r,e,u,o;if((0,s.isNullOrUndefined)(t)||(0,s.isNullOrUndefined)(n))return t===n;if(i=Object.keys(t),r=Object.keys(n),i.length!==r.length)return!1;for(e=0,u=i;e<u.length;e++)if(t[o=u[e]]!==n[o])return!1;return!0}function o(t){for(var n,i,r,n=[],i=t.split(e.FieldNameDelimiter).reverse(),r=0;r<i.length;r+=2)n.push(i[r]);return n}function f(t){return 1===o(t).length}function c(t){return 2===o(t).length}function a(t){return 3===o(t).length}function h(t){return 2===t.split(e.FieldNameDelimiter).length}function v(t){var t=t.split(e.FieldNameDelimiter);return t[t.length-2]}function l(t,n){this.LEt=t,this.wEt=n}Object.defineProperty(n,"__esModule",{value:!0}),n.GroupManager=n.getGroupFieldName=n.isGroupField=n.isGroupSlice=n.isGroupSummary=n.isGroupCategory=n.getGroupOptionIndexesFrom=void 0,s=i("./dist/src/dataSource/utils.js"),e=i("./dist/src/viewField/utils.js"),n.getGroupOptionIndexesFrom=o,n.isGroupCategory=f,n.isGroupSummary=c,n.isGroupSlice=a,n.isGroupField=h,n.getGroupFieldName=v,l.prototype.isGrouped=function(t){return u(t,this.LEt)},l.prototype.groupBy=function(t,n){var i=this,r=i.nLt(t,n);return{rootNode:r,indexMap:i.eLt(n,function(){return i.iLt(t,r)})}},l.prototype.eLt=function(t,n){var i,r,r,i=this,r=i.LEt;return i.DJ={path:[],groupOptions:r,entireScope:t},i.wEt(i.DJ),r=n(),i.DJ=null,i.wEt(i.DJ),r},l.prototype.nLt=function(t,n){for(var i,r,e,u,o,i={},u=0,o=n.length;u<o;u++)e=n[u],this.rLt(i,t,e);return i},l.prototype.rLt=function(t,n,i){var r,e,u,e,o,r=this,e=n.field,u=e.getValue(i),e=e.addKey(u,i),o=r.oLt(t,e);n.slices&&n.slices.forEach(function(t,n){(0,s.isUndefined)(o.slices)&&(o.slices=[]),(0,s.isUndefined)(o.slices[n])&&(o.slices[n]={});var n=o.slices[n];r.rLt(n,t,i)}),n.group?r.rLt(o,n.group,i):((0,s.isUndefined)(o.recordIndexes)&&(o.recordIndexes=[]),o.recordIndexes.push(i))},l.prototype.oLt=function(t,n){(0,s.isUndefined)(t.children)&&(t.childrenMap={},t.children=[]);var i=t.childrenMap[n];return(0,s.isUndefined)(i)&&(t.childrenMap[n]=i=t.children.length,t.children.push({key:n})),t.children[i]},l.prototype.iLt=function(t,n){var i,r,e,u,i=this,r=n.children,e=[];for(u in r)r.hasOwnProperty(u)&&i.aLt(r[u],t,e);return e},l.prototype.aLt=function(t,n,i){var r,e,u,o,s,f,c,a,h,v,l,d,p,j,y,b,r=this,e=i.length,u=t.recordIndexes;if(r.uLt(t),u)for(o=0,s=u.length;o<s;o++)i[e+o]=u[o];else for(c=0,a=f=t.children;c<a.length;c++)h=a[c],r.aLt(h,n.group,i);if(r.sLt(n.formulas,i,e),t.slices)for(o=0,l=(v=t.slices).length;o<l;o++){for(d=v[o],j=(p=n.slices[o]).formula,y=0,b=f=d.children;y<b.length;y++)(h=b[y]).result=r.cLt(j,h.recordIndexes);p.addSliceField(p,n.formulas[p.formulaIndex],f,i,e)}r.fLt()},l.prototype.sLt=function(t,n,i){if(t)for(var r=0,e=t.length;r<e;r++)t[r].evaluateFormulaBy(n,i)},l.prototype.cLt=function(t,n){if(t)return t.evaluateFormulaBy(n)},l.prototype.uLt=function(t){this.DJ.path.push(t)},l.prototype.fLt=function(){this.DJ.path.pop()},n.GroupManager=l},"./dist/src/viewField/utils.js":function(t,i){"use strict";function n(){for(var t,n,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.join(i.FieldNameDelimiter)}function r(t){return"="===t[0]}function e(t){return-1<t.indexOf(".")}function u(t){return-1<t.indexOf(i.FieldNameDelimiter)}Object.defineProperty(i,"__esModule",{value:!0}),i.isField=i.isRelated=i.isFormula=i.combineName=i.RelationTemplateToken=i.CaptionDelimiter=i.FieldNameDelimiter=void 0,i.FieldNameDelimiter="__",i.CaptionDelimiter="\\",i.RelationTemplateToken="{{}}",i.combineName=n,i.isFormula=r,i.isRelated=e,i.isField=u},"./dist/src/viewField/viewField.entry.js":function(t,n,i){"use strict";var r,e,r=this&&this.__createBinding||(Object.create?function(t,n,i,r){void 0===r&&(r=i);var e=Object.getOwnPropertyDescriptor(n,i);e&&("get"in e?n.__esModule:!e.writable&&!e.configurable)||(e={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(t,r,e)}:function(t,n,i,r){t[r=void 0===r?i:r]=n[i]}),e=this&&this.__exportStar||function(t,n){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(n,i)||r(n,t,i)};Object.defineProperty(n,"__esModule",{value:!0}),e(i("./dist/src/viewField/groupManager.js"),n),e(i("./dist/src/viewField/fieldManager.js"),n),e(i("./dist/src/viewField/fields.js"),n),e(i("./dist/src/viewField/utils.js"),n)},"./dist/src/view/view-cross.js":function(t,n,i){"use strict";var n,r,e,u,i,o;Object.defineProperty(n,"__esModule",{value:!0}),n=i("Common"),r=i("./dist/src/view/view.js"),e=i("./dist/src/dataSource/utils.js"),u=i("./dist/src/viewField/fieldManager.js"),i=n.Common.lt.Dh,o=void 0,i(r.View.prototype,{YBt:function(){var t=this;t.lLt.setCrossFieldValues(t.iRt)},hLt:function(){var t=this;t.lLt&&(t.lLt.clearCrossFieldData(),t.YBt())},dLt:function(t,n){var i=this;i.lLt&&i.lLt.removeCrossFieldValues(t,n)},vLt:function(t){var n=this;n.lLt&&n.lLt.resetCrossFieldRowValues(t)},mLt:function(t,n){var i,r;return"string"==typeof t&&(i=!0,r=t,i=!(!(0,e.isNullOrUndefined)(this.LEt.cross)&&(t=this.LEt.cross[r],!(0,e.isNullOrUndefined)(t)))&&i)&&(t={over:r,attributes:[""]}),(0,u.isValidCross)(this.gLt,t,n)},pLt:function(){return this.bLt()&&(0,e.isNullOrUndefined)(this.lLt)},bLt:function(){return this.yLt.some(function(t){return t.cross})},wLt:function(t){for(var i,r,n,e,u,o,s,f,c,a,h,v,l,d,i=this,r=[],n=function(n,t){r.push({newIndex:t,columnInfos:i.yLt.filter(function(t){return t.RBt===n}),fields:i.lLt?i.lLt.getFields(function(t){return t.initialOptionIndex===n}):[]})},e=0,u=t;e<u.length;e++)n(s=(o=u[e]).oldIndex,f=o.newIndex);for(c=function(t,n,i){t.forEach(function(t){return t.RBt=i}),n.forEach(function(t){return t.initialOptionIndex=i})},a=0,h=r;a<h.length;a++)c(l=(v=h[a]).columnInfos,d=v.fields,f=v.newIndex)},MLt:function(){var n=this,t;return n.CLt.map(function(t){return n.SLt(t)})},TLt:function(t,n){var i,r,e,e,u,o,u,o,s,u,i=this,r=i.MLt(),e=i.ALt(r);if(0<e.length&&(t=e[t],n=e[n]),(e=i.ILt[t])&&"string"==typeof e.cross){if(u=i.ILt[t-1]||{},o=i.ILt[t+1]||{},u.cross===e.cross||o.cross===e.cross)return!0;if(u=i.ILt[n],o=i.ILt[t<n?n+1:n-1]||{},u.cross===e.cross||o.cross===e.cross)return!0}return s=function(t,n){return-1<r.indexOf(t)?s(t+n,n):t},(u=function(t,n){var t=i.ILt[s(t,-1)]||{},n=i.ILt[s(n,1)]||{};if("string"==typeof t.cross&&t.cross===n.cross)return!0})(t-1,t+1)||(t<n?u(n,n+1):u(n-1,n))},xLt:function(t){for(var i,r,n,e,i=this,r=0,n=function(t){return t&&0===t.length?o:t},e=function(){var n=i.yLt[r];n.RBt===t?(i.NLt=i.NLt&&i.NLt.filter(function(t){return t.field!==n.value}),i.kLt=i.kLt&&i.kLt.filter(function(t){return t.field!==n.value}),i.DLt=i.DLt&&i.DLt.filter(function(t){return t.field!==n.value}),i._Lt=i._Lt&&i._Lt.filter(function(t){return t.field!==n.value}),i.yLt.splice(r,1),i.lLt&&i.lLt.removeFields(r)):r++};r<i.yLt.length;)e();i.NLt=n(i.NLt),i.kLt=n(i.kLt),i.DLt=n(i.DLt),i._Lt=n(i._Lt)},ELt:function(){var i=this;i.ILt.forEach(function(t,n){(0,e.isNullOrUndefined)(t.cross)||((0,e.isNullOrUndefined)(t.LBt)&&(t.LBt=n),i.yLt[n].LBt=t.LBt)})}})},"./dist/src/view/view-event.js":function(t,n,i){"use strict";var n,j,y,r,b,i,e,w;function u(n){var t,i,r,e,u,o,s,t=[],i=[],r=Object.keys(y.Events);if((0,j.isArray)(n))for(e=function(n){(r.some(function(t){return t===n})?t:i).push(n)},u=0,o=n;u<o.length;u++)e(s=o[u]);else r.some(function(t){return t===n})&&t.push(n);return[t,i]}Object.defineProperty(n,"__esModule",{value:!0}),n=i("Common"),j=i("./dist/src/dataSource/utils.js"),y=i("./dist/src/table/tableEvents.js"),r=i("./dist/src/view/view.js"),b=i("./dist/src/view/view-util.js"),i=n.Common.lt.Dh,e=null,w=void 0,i(r.View.prototype,{bind:function(t,n){var i=this,t=u(t),r=t[0],t=t[1];0<t.length&&(i.jLt(t,n),this.gLt.bind(t,n)),0<r.length&&this.D3(r,this.OLt(n))},D3:function(t,n){var i,n,i=this,n=i.RLt(n);i.jLt(t,n),i.gLt.bind(t,n)},unbind:function(t,n){this.gLt.unbind(t,n)},ki:function(t,n){return this.gLt.ki(t,n)},vOt:function(t){return this.gLt.vOt(t)},jLt:function(t,n,i){var r,e,u,o,s,f,c,a,h,r=this;if(n)for(e=(i||r.gLt).name,s=u=(o=0,j.isArray)(t)?t:[t];o<s.length;o++)f=s[o],(c=(0,j.isFunction)(n)?n:n[f])&&(h=(a=r.BLt[e]=r.BLt[e]||{})[f]=a[f]||[]).push(c)},OLt:function(u){var o=this;return function(t,n){var i,r,e;if(o.LLt(n),(0,j.isArray)(u))for(i=0,r=u;i<r.length;i++)(e=r[i]).call(o,t,n);else u&&u.call(o,t,n)}},LLt:function(t){var n=this;t.hasOwnProperty("row")||Object.defineProperty(t,"row",{get:function(){return(0,j.isNumber)(t.Ky)||(t.Ky=n.FLt(t.index)),t.Ky}})},RLt:function(i){var r=this;return function(t,n){r.PLt()&&i.call(r,t,n)}},PLt:function(t){return(0,j.isBoolean)(t)&&(this.rb=!t),!this.rb},GLt:function(n,i){var r=this;return r.PLt(!1),{success:function(t){r.PLt(!0),n&&n(t)},fail:function(t){r.PLt(!1),i&&i(t)}}},v7:function(){var u=this;u.D3(y.Events.ItemInserting,function(t,n){var i=n.index,n=n.data;u.ULt(n),i===u.length()&&u.Dit()&&u.HLt(n,i)}),u.D3(y.Events.ItemInserted,function(t,n){var i=n.index,n=n.data;u.zLt(i,n)}),u.D3(y.Events.ItemUpdating,function(t,n){var i=n.data,r=n.index,e=n.field,n=n.originalValue;u.VLt(i,n,e,r)}),u.D3(y.Events.ItemUpdated,function(t,n){var i=n.index,r=n.field,e=n.originalValue,n=n.newValue;u.YLt(i,r,e,n)}),u.D3(y.Events.ItemReset,function(t,n){var i=n.index,r=n.originalData,n=n.dataBeforeChanged;u.ZLt(i,r,n)}),u.D3(y.Events.ItemRemoved,function(t,n){var i=n.index,n=n.count;u.WLt(i,n)}),u.D3(y.Events.ChangesSubmitted,function(t,n){u.QLt()}),u.D3(y.Events.ChangesCancelled,function(t,n){u.KLt(n.isDataLengthChanged)})},wpt:function(){var t,n,i,r,e,u,o,s,f,c,t=this,n=t.BLt;for(i in n)if(n.hasOwnProperty(i))for(e in r=n[i])if(r.hasOwnProperty(e))for(o=0,s=u=r[e];o<s.length;o++)f=s[o],(c=t.gLt.QOt.tables[i]).unbind(e,f);t.BLt={}},$Ot:function(t){var n,i,r,e,u,o,s,f,c,n,i=this.BLt,r=t.name,e=i[r];for(u in e)if(e.hasOwnProperty(u))for(s=0,f=o=e[u];s<f.length;s++)c=f[s],t.unbind(u,c);i[r]=w},KOt:function(t,n){var i,r,e,i,r=this.BLt,e=r[t];delete r[t],r[n]=e},JLt:function(){var t,n,i,r,e,u,o,s,s;if(this.XLt())for(i=(n=t=this).name,r=t.yLt,e=t.gLt,u=0,o=r;u<o.length;u++)s=o[u],(0,j.isFunction)(s.value)||(0,b.isFormula)(s.value)||!(0,b.isRelation)(s.value)||(s=e.qRt(s.value),!(0,j.isNullOrUndefined)(s)&&(0,j.isNullOrUndefined)(s.VOt[i])&&(s.VOt[i]=n,t.qLt(s)))},qLt:function(i){var d,p,t,v,l,t,u,d=this,p=d.gLt,t=p.QOt.relationships.reduce(function(t,n){return n.sourceTable===p&&n.targetTable===i?{relationshipName:n.sourceRelationshipName,relationFieldName:n.sourceFieldName}:n.sourceTable===i&&n.targetTable===p?{relationshipName:n.targetRelationshipName,relationFieldName:n.targetFieldName}:t},{}),v=t.relationshipName,l=t.relationFieldName,t=function(t,h){var n=d.RLt(function(u,o){var n,t,i,s,i,r,e,f,c,a,n=function(t,n){var t=t.value.split(".");return t[t.length-1-n]},t=d.ILt.filter(function(t){return(0,b.isRelation)(t.value)&&n(t,1)===v}),i=t;if(o.eventName!==y.Events.ItemUpdating&&o.eventName!==y.Events.ItemUpdated||(i=i.filter(function(t){return n(t,0)===o.field})),s=[w],i.forEach(function(n){var t,i,r,e,t=!(0,j.isNullOrUndefined)(n.cross);t?(r=("string"==typeof n.cross?d.LEt.cross[n.cross]:n.cross).over,(0,j.isNullOrUndefined)(d.NLt)||-1<(e=(0,j.findIndex)(d.NLt,function(t){return-1<t.field.indexOf(n.value)&&-1<t.field.indexOf(r)}))&&(i=d.NLt[e].field)):d.$Lt(n.value)&&s.push(n.value),h.call(d,n.value,t,i)(u,o)}),o.eventName===y.Events.ItemInserted||o.eventName===y.Events.ItemRemoved||o.eventName===y.Events.ItemUpdated){if(o.eventName===y.Events.ItemUpdated&&(i=l===o.field,r=t.some(function(t){var n;if(!(0,j.isNullOrUndefined)(t.cross)&&("string"==typeof t.cross?d.LEt.cross[t.cross]:t.cross).over.split(".").pop()===o.field)return!0;return!1}),i||r))for(c=e=p.nBt(t[f=0].value,o.index);f<c.length;f++)a=c[f],d.vLt(a);s.forEach(function(t){d.tFt(w,!0,t,w)})}});d.jLt(t,n,i),i.bind(t,n)},u=function(t,n,i,r){var e,e,e,u,o,s,f,c,a,h,a,v,l;if(d.Dit())for(o=0,s=u=r.relatedViewIndexes||p.nBt(t,r.index);o<s.length;o++)f=s[o],h=a=c=void 0,h=n?(d.vLt(f),c=p.LRt(i,f),(e={})[i]=c,a=e,d.nFt(f,((e={})[i]=!0,e))[i]):(c=p.LRt(t,f),(e={})[t]=c,a=e,p._getValueByField(t,f)),a=d.eFt(f,a).data,d.iFt(a,c,t,f),d.hRt(f,t,c,h),p.hRt(f,t,c,h);else if(n)for(v=0,l=u=r.relatedViewIndexes||p.nBt(t,r.index);v<l.length;v++)f=l[v],d.vLt(f)};t(y.Events.ItemRemoving,function(i,r){return function(t,n){r&&(n.relatedViewIndexes=p.nBt(i,n.index))}}),t(y.Events.ItemRemoved,function(i,r,e){return function(t,n){u(i,r,e,n)}}),t(y.Events.ItemInserted,function(i,r,e){return function(t,n){u(i,r,e,n)}}),t(y.Events.ItemUpdating,function(c,a,h){return function(t,n){var i,i,r,e,u,o,s,f,f;if(d.Dit())for(r=n.relatedViewIndexes=p.nBt(c,n.index),n.relatedViewValues=[],e=0,u=r;e<u.length;e++)o=u[e],f=s=void 0,a?s=(f=d.nFt(o,((i={})[h]=!0,i)))[h]:(s=p._getValueByField(c,o),(i={})[c]=s,f=i),f=d.eFt(o,f).data,n.relatedViewValues[o]=s,d.iFt(f,s,c,o)}}),t(y.Events.ItemUpdated,function(c,a,h){return function(t,n){var i,r,e,u,o,s,f;if(d.Dit())for(e=0,u=r=n.relatedViewIndexes||p.nBt(c,n.index);e<u.length;e++)o=u[e],s=n.relatedViewValues[o],f=void 0,a?(f=d.nFt(o,((i={})[h]=!0,i))[h],c=h):f=p._getValueByField(c,o),d.hRt(o,c,s,f),p.hRt(o,c,s,f)}})}})},"./dist/src/view/view-filter.js":function(t,n,i){"use strict";var d,u,p,n,l,r;function j(t){return e(t[0])}function e(t){return t&&void 0!==t.Vce}function o(t,n){for(var i,r,e,i=["field","value","operator","relation"],r=0;r<i.length;r++)if(t[e=i[r]]!==n[e])return!1;return t.ort===n.ort}function y(t,n){for(var i,r,e,u,o,i={},r=0;r<t.length;r++)if(!i[e=t[r].field]){for(u=i[e]=[],o=r;o<t.length;o++)t[o].field===e&&u.push(t[o]);n(e,u)}}Object.defineProperty(n,"__esModule",{value:!0}),d=i("./dist/src/dataSource/utils.js"),u=i("./dist/src/table/table.js"),p=i("./dist/src/view/view-util.js"),n=i("Common"),l=i("./dist/src/view/view.js"),(r=n.Common.lt.Dh)(l.View.prototype,{buildInFilter:function(s){var f,c,a,h,t,v,n,i,r,e,i,u,o,f=this.gLt,c={};if(1<s.length){for(a=[],h=[],t=function(r){var t,n,i,e,t,u,o,t=s[r],n=t.field,i=t.operator,e=t.value,t=t.relation,u=c[n];u=u||(c[n]=f.jRt(n)),h.push(t),o=(0,l.rFt)(v.gLt,v.yLt,v.lLt,n,s[r]),o=(0,p.mapGetValueFunc)(u,o),o=(0,p.oFt)(v,i,e,o),a.push(function(t,n,i){return o(t,i,n[r])})},v=this,n=0;n<s.length;n++)t(n);return(0,p.aFt)(a,h)}return r=(i=s[0]).field,e=i.operator,i=i.value,u=f.jRt(r),o=(0,l.rFt)(this.gLt,this.yLt,this.lLt,r,s[0]),o=(0,p.mapGetValueFunc)(u,o),o=(0,p.oFt)(this,e,i,o,r),function(t,n,i){return o(t,i,n[0])}},uFt:function(t){var n=this,i=n.ZOt,r;return n.gLt.ZOt[t]||i[t]},eRt:function(t,n){var i=this,r=i.gLt,e=i.yLt,u,o=[],s=[];t.forEach(function(n){(u=e.filter(function(t){return t.value===n})[0])&&((0,p.isViewColumn)(u)?o:s).push(n)}),r.eRt(s,n),i.sFt(o)},sFt:function(t){for(var n,i,r,e,u,n,i=this.ZOt,r=0,e=t;r<e.length;r++)i[u=e[r]]||(i[u]=this._Rt(u))},cFt:function(){this.ZOt={}},_Rt:function(t){var n=this.lLt.getFieldByName(t);return(0,u.generateFilterIndexCache)(t,(0,d.isNullOrUndefined)(n)?0:this.length(),this.jRt(t),function(t){return n.getValue(t)})},cRt:function(t,n){var i=this,r,e=i.gLt._dataSource.options.schema;i.Yce(t),(0,u.updateFilterIndexesCacheOnInsert)(this.ZOt,t,n,e&&e.columns)},hRt:function(t,n,i,r){var e=this;e.Yce(t,!1,n),(0,u.updateFilterIndexesCacheOnUpdate)(e.ZOt,t,n,i,r,e.jRt(n))},pRt:function(t,n,i){var r,e,u,o,s,s,r=this,e=r.yLt;if(!(0,d.isNullOrUndefined)(n)&&!(0,d.isNullOrUndefined)(i))for(u=0,o=e;u<o.length;u++)s=(s=o[u]).value instanceof Function?s.value.name:s.value,r.hRt(t,s,n[s],i[s])},MRt:function(t,n){var i=this;i.Zce(t,n),(0,u.updateFilterIndexesCacheOnRemove)(i.ZOt,t,n)},fFt:function(t){var i,r,e,n,u,o,s,f,c,a,h,v,l;if(t){if(r=(i=this).iRt,e=[],u=(n=i.lFt).length,n&&0<u&&(e=r.slice(0,u)),o=u,"string"==typeof t)for(s=i.Ywt(t,0,0),f=u;f<r.length;f++)c=r[f],!0===i.nMt(s,c,0)&&(e[o]=c,o++);else if("function"==typeof t)for(f=u;f<r.length;f++)c=r[f],t(i.getRowData(c,!0))&&(e[o]=c,o++);else{if(r.length!==i.length())return i.Wce(),void i.Qce(t,e,r);for(l in(0,d.isArray)(t)||(t=[t]),(0,d.isNullOrUndefined)(i.Jce)&&(i.Jce={}),a=i.isHierarchy(),i.qce(t,function(t,n){i.Qce(n,e,r.slice()),a&&j(n)&&i.rfe(n),i.tfe(t,n)}),h=[],v=function(n){t.some(function(t){return t.field===n})?a&&j(i.Jce[n].options)||h.push(n):delete i.Jce[n]},i.Jce)v(l);e=i.nfe(h)}i.iRt=e}},Qce:function(t,r,n){var e,i,u,o,s,f,c,a,h,v,l,e=this,i=(e.lFt||[]).length,u=i;for((0,d.isArray)(t)||(t=[t]),s=[],f=[],c=0;c<t.length;c++)a=t[c],((0,p.isFieldListFilterInfo)(a)?s:f).push(a);if(h=r,v=n,0<s.length&&(h=r.slice(),y(t=s,function(t,n){var t=t,i=e.uFt(t);i||(e.eRt([t]),i=e.uFt(t)),(0,p.hFt)(h,u,i,n,v),v=h,h=r.slice()}),h=v),0<f.length)for(h=r.slice(),t=f,o=this.buildInFilter(t),c=i;c<v.length;c++){l=v[c];try{o(e.gLt,t,l)&&(h[u]=l,u++)}catch(t){}}e.iRt=h},tfe:function(t,n){var i,r,e,u,i=this;if(!(0,d.isNullOrUndefined)(t))for(r=i.lFt||[],e=i.Jce[t]={options:n,count:i.iRt.length-r.length},u=r.length;u<i.iRt.length;u++)e[i.iRt[u]]=!0},rfe:function(i){for(var r,e,t,n,u,o,s,f,c,a,h,v,l,d,r=this,e=[],t=function(t){var n=i[t];e.push(r.yLt.find(function(t){return t.value===n.field}))},n=0;n<i.length;n++)t(n);for(u=r.lFt||[],o=r.iRt.slice(0,u.length),n=u.length;n<r.iRt.length;n++)if(s=r.iRt[n],0===(f=r.getHierarchyNode(s,!0)).children.length)for(c=0;c<i.length;c++){for(a=i[c],h=f,v=0;v<a.Vce.length&&(l=a.Vce[v],(d=r.ofe(e[c],h.modalIndex))===l);v++)h=h.parent;if(v===a.Vce.length){o.push(s);break}}r.iRt=o},Wce:function(){this.Jce=null},Yce:function(t,n,i){var r,e,u,o,s,f,c,a,h,r=this,e=r.Jce;if(e&&!(-1<(u=r.lFt||[]).indexOf(t))){for(s in o=r.iRt,e)!(0,d.isNullOrUndefined)(i)&&s!==i||(c=(f=e[s]).options,a=o.slice(0,u.length),h=o.slice(0,u.length).concat(t),r.Qce(c,a,h),-1<r.iRt.indexOf(t)?f[t]||(f[t]=!0,f.count+=1):f[t]&&(delete f[t],--f.count));r.iRt=o}},Zce:function(t,n){var i,r,e,u,o,s,f,c,a,i=this,r=i.Jce;if(r&&!(-1<(e=i.lFt||[]).indexOf(t)))for(u in r)if(r.hasOwnProperty(u)){for(s=(o=r[u]).options,delete o.options,delete o.count,f=Object.keys(o),c=0;c<f.length;c++)t+n<=(a=+f[c])?f[c]=a-n:t<=a&&a<t+n&&(f.splice(c,1),c--);(o=f.reduce(function(t,n){return t[n]=!0,t},{})).options=s,o.count=f.length,r[u]=o}},nfe:function(t){var n,i,r,e,u,o,s,f,n=this;if(0<t.length){if(i=n.lFt||[],r=n.iRt,e=n.Jce,1===t.length&&r.length-i.length===e[t[0]].count)return r;for(u=r.slice(0,i.length),o=i.length;o<r.length;o++){for(s=r[o],f=0;f<t.length&&e[t[f]][s];f++);f===t.length&&u.push(s)}return u}return n.iRt},dFt:function(){var t,n,i,r,e,u,o,s,t=this.iRt,i=this.lFt,r=i.length;for(i&&0<r&&(n=t.slice(0,r)),e=[],u=this.length(),s=o=0;s<u;s++)(!n||n.indexOf(s)<0)&&(e[o]=s,o++);n&&0<n.length?this.iRt=n.concat(e):this.iRt=e,this.cFt()},HLt:function(t,n){var i=this,r=i.NLt;i.Dit()&&i.autoFilter&&(0,p.addFilterInfoForFieldValue)(r,t,i,void 0,void 0,n)},iFt:function(t,n,i,r){var e=this,u=e.NLt;e.Dit()&&e.autoFilter&&(0,p.addFilterInfoForFieldValue)(u,t,e,n,i,r)},vFt:function(){var t=this;t.mFt()&&t.filter(t.NLt)},mFt:function(){return this.autoFilter&&this.NLt},Dit:function(){var t,n=this.NLt;return(0,d.isArray)(n)&&0<n.length},filter:function(t){var n=this;return n.iRt||n.gFt(),t?(n.isHierarchy()&&n.$ce(),n.fFt(t),n.isHierarchy()&&n.yFt(!0)):n.isHierarchy()?n.gFt():this.dFt(),this.NLt=(0,d.isArray)(t)&&0<t.length?t:null,this.iRt.length},$ce:function(){var i=this;i.bFt().forEach(function(t){var n;i.getHierarchyNode(t,!0).modalIndex=t})},yFt:function(t){var n,i,r,e,u,o,s,f,c,t,a,n=this,i=n.iRt;if(!(0,d.isNullOrUndefined)(i)&&0!==i.length){for(t||n.$ce(),r=[],e=1,u=0;u<i.length;u++)o=i[u],(s=n.getHierarchyNode(o,!0)).visit=e,(0,d.bubbleTree)(s,function(t){t.isRoot||(t.visit=e)}),(0,d.traversalTree)(s,function(t){t.visit=e});for(c in n.Jce)if(j(n.Jce[c].options)){f=n.Jce[c];break}if(!(0,d.isNullOrUndefined)(f)){for(o in e=2,t=f.options,a=f.count,delete f.options,delete f.count,f)f.hasOwnProperty(o)&&(s=n.getHierarchyNode(+o,!0),(0,d.isNumber)(s.visit))&&(s.visit=e,(0,d.bubbleTree)(s,function(t){t.isRoot||(t.visit=e)}));f.options=t,f.count=a}(0,d.traversalTree)(n.getHierarchyRootNode(),function(t){t.visit===e&&(r.push(t.modalIndex),delete t.visit,delete t.modalIndex)}),n.iRt=r}},bFt:function(){var t=this,n=t.iRt,i,r=t.isHierarchy(),i=t.wFt;return r&&!(0,d.isNullOrUndefined)(i)||(t.gFt(),t.sort(t.kLt),i=t.iRt,t.iRt=n,r&&(t.wFt=i)),i},qce:function(t,e){var u=this;(0,d.isNullOrUndefined)(u.Jce)&&(u.Jce={}),y(t,function(t,i){var n=u.Jce[t],r;!(0,d.isNullOrUndefined)(n)&&n.options.length===i.length&&n.options.every(function(n){return i.some(function(t){return o(n,t)})})||e(t,i)})}})},"./dist/src/view/view-group.js":function(t,n,i){"use strict";var r,e,y,s,b,w,m,i,u,a;function f(f,c,a){for(var h,v,l,d,p,t,n,j,i,r,e,h=[],v=-1,l=-1,d=m.GROUP_COLUMN_WIDTH,p={},t=function(t){for(var n,i,r,e,n=f[t],i=0,r=a;i<r.length;i++)e=r[i],n.value===e.field&&(n.GFt=!0,p[(0,w.combineName)(n.value,(0,y.findIndex)(a,function(t){return t.field===n.value}))]={colInfo:n,index:t})},n=0;n<f.length;n++)t(n);for(i=function(t,n){var i,r,e,u,o,s,i=c.getField(j[t]),r=i.name,e,u={caption:i.extra.caption,value:r,name:r,isGroup:!0};-1<(l=(0,y.findIndex)(a,function(t,n){return(0,w.combineName)(t.field,n)===r}))&&(d=(0,m.getGroupColumnWidth)(a[l].field,f),v=l,u.DFt=!0,o=p[r],(0,y.isNullOrUndefined)(o)||(o.colInfo._Ft=t,u._Ft=o.index+n)),u.OFt=v,u.width=d,(s=i.extra)&&(0,b.setFieldExtraProperties)(function(t){s[t]&&(u[t]=s[t])}),h.push(u)},r=0,e=(j=c.positionOfField).length-c.keysOfBaseField.length;r<e;r++)i(r,e);return h}Object.defineProperty(n,"__esModule",{value:!0}),n.que=void 0,r=i("Common"),e=i("./dist/src/view/view.js"),y=i("./dist/src/dataSource/utils.js"),s=i("./dist/src/viewField/groupManager.js"),b=i("./dist/src/viewField/fields.js"),w=i("./dist/src/viewField/utils.js"),m=i("./dist/src/view/view-util.js"),i=r.Common.lt.Dh,u=null,a=void 0,n.que=f,i(e.View.prototype,{groupBy:function(t){var n,i,n=this;return 0===arguments.length||!(0,y.isArray)(t)||n.hasHierarchyColumn()||0===(t=0<(i=n.yLt.filter(function(t){return t.isCross})).length?t.filter(function(n){return!i.some(function(t){return t.value===n.field})}):t).length?n.MFt:(n.iRt||n.gFt(),n.CFt(t),n.SFt(),n.TFt(t),void(this.MFt=t))},removeGroupBy:function(){var t=this;t.isHierarchy()||(t.AFt(),t.IFt(),t.SFt(),t.MFt=u,t.xFt(),t.NFt())},AFt:function(){var t;this.kFt()},IFt:function(){var t,n,i,r,e,u,o,s,f,c,t=this,n=t.gLt,i=t.NLt,r=t.ZOt,e=t.getColumnInfos();if(i){for(c=i.length-1;0<=c;c--)u=i[c],(o=e.filter(function(t){return t.name===u.field})[0]).DFt?(s=(0,m.getColumnName)(e[o._Ft]),(f=r[u.field])&&(n.ZOt[s]=r[u.field],delete r[u.field]),u.field=s):o.isGroup&&(i.splice(c,1),delete r[u.field]);t.NLt=0===i.length?a:i}},xFt:function(){var t,n,i,r,e,t=this;if(t.kLt){for(n=[],i=0,r=t.kLt;i<r.length;i++)delete(e=r[i]).EFt,e.jFt?(0,s.isGroupField)(e.field)&&(delete e.jFt,delete e.OFt,e.field=(0,s.getGroupFieldName)(e.field),n.push(e)):n.push(e);t.kLt=0===n.length?a:n}t._Lt=a,t.DLt=t.kLt},CFt:function(t){var n,i,r,e,u,t,u,e,i;t&&(this.kFt(),i=(n=this).iRt,r=n.lLt||n.RFt(),e=n.BFt||n.LFt(t),u=i,n.length()>i.length?((0,y.isNullOrUndefined)(n.Dfe)&&(n.Dfe=n.qFt()),u=n.Dfe):n.Dfe=a,t=r.buildGroupFields(t,u),e=(u=e.groupBy(t,i)).rootNode,i=u.indexMap,n.FFt=e,n.iRt=i,r.transposeSliceFields(t))},kFt:function(){var t,n,n=this;(n.BFt=null)!=(t=n.lLt)&&t.reset(),n.FFt=null},PFt:function(t){var n=this;n.autoGroup&&n.MFt&&(!(0,y.isString)(t)||n.$Lt(t))&&n.CFt(n.MFt)},$Lt:function(n){var t=this;return t.MFt&&t.MFt.some(function(t){return t.field===n||t.summaryFields&&t.summaryFields.some(function(t){return t.formula&&-1<t.formula.indexOf(n)||t.slice&&("string"==typeof t.slice?-1<t.slice.indexOf(n):t.slice.field&&-1<t.slice.field.indexOf(n))})})},LFt:function(t){var n=this,i,r=n.gLt.POt;return n.BFt=new s.GroupManager(t,r.wEt.bind(r)),n.BFt},SFt:function(){for(var t,n,i,r,t=this,n=t.getColumnInfos(),i=n.length-1;0<=i;i--)(r=n[i]).isGroup&&n.splice(i,1),r.GFt&&(r.GFt=a,r._Ft=a);t.setColumnInfos(n)},TFt:function(t){for(var n,i,r,e,u,o,s,n=this,i=f(n.yLt,n.lLt,t),r=n.UFt,e,u=0,o=n.getColumnInfos();u<o.length;u++)s=o[u],r||(s.visible=!1),i.push(s);n.setColumnInfos(i)},HFt:function(t){var i,n,r,e,u,o,s,f,c,a;if(t){for(n=(i=this).FFt,r=[],e=i.yLt,u=Array.isArray(t)?t:[t],o=[],s=[],f=function(t){var n,t,n=u[t],t=e.filter(function(t){return t.value===n.field})[0];(t&&(0,y.isNumber)(t.OFt)?(n.jFt=!0,n.EFt=i.zFt([n]),n.OFt=t.OFt,o):s).push(n)},c=0;c<u.length;c++)f(c);a=i.zFt(s),s.forEach(function(t){return t.EFt=a}),i.VFt(n,r,0,o,s),i.iRt=r}},VFt:function(t,n,i,r,e){var u,t,o,s,f,c,a,h,v,l,d,u=this,t=t.children;if(t)for(1<t.length&&0<r.length&&0<(f=r.filter(function(t){return t.OFt===i})).length&&(c=f[0].EFt,t.sort(function(t,n){return c(u.gLt,f,t.key,n.key)})),a=0,h=t;a<h.length;a++)if(s=(v=h[a]).recordIndexes)for(1<s.length&&0<e.length&&(c=(f=e)[0].EFt,s.sort(function(t,n){return c(u.gLt,f,t,n)})),o=n.length,l=0,d=s.length;l<d;l++)n[o+l]=s[l];else u.VFt(v,n,i+1,r,e)},setGroupSliceColumnSettings:function(t,n){var i=this,r=t[n];t.isGroup&&i.isGroupSliceColumn(t)&&i.getGroupSliceColumns(t).forEach(function(t){return t[n]=r})},isGroupSliceColumn:function(t){return t.isGroup&&(0,s.isGroupSlice)(t.value)},getGroupSliceColumns:function(t){var n,i,r,e,u,o,n,i=[],r=t.OFt,e=this.yLt;if(t.isGroup)for(u=0;u<e.length;u++)(o=e[u]).OFt===r&&(0,s.isGroupSlice)(o.value)&&i.push(o);return i},updateColumnSettingToGroupOptions:function(t,r){var n,i,e,u,o,n,i=this.MFt;if(i&&t.isGroup)switch(u=function(n,i){(0,b.setFieldExtraProperties)(function(t){!(0,y.isNullOrUndefined)(r)&&r!==t||(n[t]=i[t])})},(e=(0,s.getGroupOptionIndexesFrom)(t.value)).length){case 1:u(i[e[0]],t);break;case 2:u(i[e[0]].summaryFields[e[1]],t);break;case 3:u(o="string"==typeof(o=i[e[0]].summaryFields[e[1]].slice)?i[e[0]].summaryFields[e[1]].slice={field:o}:o,t)}},detailColumnsVisible:function(t){var n,i,n,r,n=this;if(0===arguments.length)return n.UFt;if(n.UFt!==t&&(n.UFt=t,n.BFt))for(i=n.getColumnInfos(),r=(n=n.lLt).positionOfField.length-n.keysOfBaseField.length;r<i.length;r++)i[r].visible=t}})},"./dist/src/view/view-sort.js":function(t,n,i){"use strict";var r,l,d,p,i;function s(r){return r.iRt.reduce(function(t,n){var i=r.getHierarchyNode(n,!0);return(0,l.isNullOrUndefined)(i)||(t[i.id]=n),t},{})}function f(n,i){return function(t){(0,l.isNullOrUndefined)(n[t.id])||i.push(n[t.id])}}function j(t,n,i,r,e){for(var u,o,s,f,u={},o=(0,d.rFt)(t,n,i,e,u),s=0;s<r.length;s++)if(f=o(u,s,u),!(0,l.isNullOrUndefined)(f))return f;return null}function y(t,n,i,r,e,u){var o,s,f,c,a,h,v;if(1===e.length)return u=u||0,o=e[0],s=(0,d.rFt)(t,n,i,o.field,o),f=void 0,f=o.compare?function(t,n,i,r){var i,t,i=s(t,i,n[u]),t=s(t,r,n[u]);return n[u].compare(i,t,n[u].ascending)}:null===(c=j(t,n,i,r,o.field))?function(){return 0}:(a=o.ascending,function(t,n,i,r){var i,t,i=s(t,i,n[u]),t=s(t,r,n[u]);return(0,p.compareValue)(a,c,i,t)});for(h=0;h<e.length;h++)o=e[h],(v=(0,d.ZFt)(t,n,o.field)).isGroup&&(0,l.isNullOrUndefined)(o.ascending)&&(o.compare=function(t,n){return t===n?0:1}),o.WFt=y(t,n,i,r,[o],h);return p.multiSort}Object.defineProperty(n,"__esModule",{value:!0}),n.Xue=void 0,r=i("Common"),l=i("./dist/src/dataSource/utils.js"),d=i("./dist/src/view/view.js"),p=i("./dist/src/view/view-util.js"),i=r.Common.lt.Dh,n.Xue=y,i(d.View.prototype,{zFt:function(t,n){return y(this.gLt,this.yLt,this.lLt,this.iRt,t,n)},QFt:function(t){var n;t&&((n=this).isHierarchy()?(n.wFt=null,n.DLt=(0,p.getSortInfos)(t),n.KFt(t)):n.MFt?(n._Lt=(0,p.getSortInfos)(t),n.HFt(t)):(n.DLt=(0,p.getSortInfos)(t),n.JFt(t)))},JFt:function(t){var i,n,r,e,u,o,s,e,u,t,u,e,u,t,n,e;t&&(n=(i=this).iRt,u=(e=i.lFt).length,e&&0<u&&(r=n.slice(0,u),n=n.slice(u)),o=Array.isArray(t)?t:[t],s=i.zFt(o),t=void 0===(u=(e=o[0]).startRow)?0:u,e=void 0===(u=e.endRow)?i.length():u,u=n.slice(0,t),(t=n.slice(t,e)).sort(function(t,n){return s(i.gLt,o,t,n)}),n=n.slice(e),e=u.concat(t,n),r&&0<r.length?i.iRt=r.concat(e):i.iRt=e)},XFt:function(){var t,n,i,t=this,n=t.gLt.uBt();return!(0,l.isNullOrUndefined)(n)&&(0,l.isNullOrUndefined)(t.kLt)?((!t.iRt||t.iRt.length<t.length())&&(t.iRt=t.qFt()),t.iRt&&0<t.iRt.length&&(i={field:n,ascending:!0},t.isHierarchy()?t.KFt(i):t.JFt(i)),!0):(0,l.isNullOrUndefined)(n)&&(0,l.isNullOrUndefined)(t.kLt)&&t.isHierarchy()?((!t.iRt||t.iRt.length<t.length())&&(t.iRt=t.qFt()),t.iRt&&0<t.iRt.length&&t.$Ft(),!0):void 0},KFt:function(i){var r,t,n,e,u,o;i&&(t=(r=this).getHierarchyRootNode(),n=[],e=Array.isArray(i)?i:[i],u=s(r),o=r.zFt(e),e.forEach(function(t){return t.EFt=o}),(0,l.traversalTree)(t,f(u,n),{compareFn:function(t,n){return o=(i=e)[0].EFt,(0,l.isNullOrUndefined)(u[t.id])||(0,l.isNullOrUndefined)(u[n.id])?0:o(r.gLt,i,u[t.id],u[n.id])}}),r.iRt=n)},$Ft:function(){var t,n,i,r,t=this,n=t.getHierarchyRootNode(),i=[],r=s(t);(0,l.traversalTree)(n,f(r,i),{field:"sequence",isOrderChildren:!1}),t.iRt=i},NFt:function(){var t=this;t.tPt()&&t.sort(t.kLt)},tPt:function(){return this.autoSort&&this.kLt},sort:function(t){var n=this;n.iRt||n.gFt(),n.QFt(t),this.kLt=t},nPt:function(t){var n=this,i=n.autoSort,r=n.DLt&&0<n.DLt.length,e=n._Lt&&0<n._Lt.length;i&&r&&(n.isHierarchy()?n.KFt(n.DLt):n.JFt(n.DLt)),n.PFt(t),i&&e&&n.HFt(n._Lt)}})},"./dist/src/view/view-style.js":function(t,n,i){"use strict";var n,i,r;Object.defineProperty(n,"__esModule",{value:!0}),n=i("Common"),i=i("./dist/src/view/view.js"),(r=n.Common.lt.Dh)(i.View.prototype,{getStyleRules:function(){return this.LEt.styleRules},getStyleRule:function(t){var n=this.getStyleRules();return t?n[t]:n},addStyleRule:function(t,n,i){var r,e;t&&(r={},n&&(r.style=n),i&&(r.rule=i),(e=this.getStyleRules())[t]=r)},removeStyleRule:function(t){var n;delete this.getStyleRules()[t]},clearStyleRules:function(){this.LEt.styleRules={}}})},"./dist/src/view/view-util.js":function(D,e,t){"use strict";var w,c,F,s,f,a,m,R;function n(t,n,i,r){var e,t,e=t?i:r,t=t?r:i;return(0,F.isNullOrUndefined)(e)&&(0,F.isNullOrUndefined)(t)?0:(0,F.isNullOrUndefined)(e)?-1:(0,F.isNullOrUndefined)(t)?1:"number"==typeof n||n instanceof Date?e-t:t<e?1:e<t?-1:0}function i(t,n,i,r,e){var u,o;if(i instanceof Date)if(-1<s.indexOf(n))i=i.getTime(),u=r,r=function(t,n,i){return u(t,n,i)&&u(t,n,i).getTime()};else{if(-1<f.indexOf(n))return function(){return!1};if(-1<a.indexOf(n))return function(){return!0}}return o=h(t,n,i,e),function(t,n,i){return o(r(t,n,i))}}function h(t,n,i,r){var e,u,o,s,f,f,f,e=i+"",u=e&&e.length;switch((0,F.isString)(i)&&(o=c.Common.$T.jJ(i)),s=t.gLt,n){case"eq":return f=function(t){return t===i},(0,F.isNullOrUndefined)(i)&&(f=function(t){return t===m||t===R}),o?function(t){return new RegExp("^"+o+"$").test(t)}:f;case"neq":return f=function(t){return t!==i},(0,F.isNullOrUndefined)(i)&&(f=function(t){return t!==m&&t!==R}),o?function(t){return!new RegExp("^"+o+"$").test(t)}:f;case"lt":return function(t){return null!==t&&t<i};case"lte":return function(t){return null!==t&&t<=i};case"gt":return function(t){return i<t};case"gte":return function(t){return i<=t};case"startswith":return o?function(t){return new RegExp("^"+o).test(t)}:function(t){return"string"==typeof(t+"")&&(t+"").substr(0,u)===i};case"doesnotstartwith":return o?function(t){return!new RegExp("^"+o).test(t)}:function(t){return"string"==typeof(t+"")&&(t+"").substr(0,u)!==i};case"endswith":return o?function(t){return new RegExp(o+"$").test(t)}:function(t){return"string"==typeof(t+"")&&-1!==(t+"").indexOf(i,(t+"").length-u)};case"doesnotendwith":return o?function(t){return!new RegExp(o+"$").test(t)}:function(t){return"string"==typeof(t+"")&&-1===(t+"").indexOf(i,(t+"").length-u)};case"contains":return o?function(t){return new RegExp(o).test(t)}:function(t){return"string"==typeof(t+"")&&0<=(t+"").indexOf(i)};case"doesnotcontain":return o?function(t){return!new RegExp(o).test(t)}:function(t){return"string"==typeof(t+"")&&(t+"").indexOf(i)<0};case"top":case"bottom":return(f=t.uFt(r))||(t.eRt([r]),f=t.uFt(r)),i=v(Object.keys(f),n,i),function(t){return-1<i.indexOf(t)};case"above":return i=l(s._dataSource._data[r].data,s.jRt(r)),function(t){return i<t};case"below":return i=l(s._dataSource._data[r].data,s.jRt(r)),function(t){return t<i};case"quarter":return function(t){return d(i,t)};case"month":return function(t){return(t&&t.getMonth())===i};default:return function(){return!1}}}function v(t,n,i){for(var r,e,u,o,r=[],e=0,u=t;e<u.length;e++)o=u[e],isNaN(o)||r.push(parseFloat(o));return i>=r.length||("top"===n?r=p(r,i):"bottom"===n&&(r=b(r,i))),r}function l(t,n){var i,r,e,u,o,i=0;if(!t||0===t.length)return i;for(r=n&&n.dataMap,e=0,u=t;e<u.length;e++)o=u[e],"number"==typeof(o=r&&"number"==typeof r[o]?r[o]:o)&&(i+=o);return i/t.length}function d(t,n){var i=n&&n.getMonth();switch(t){case 0:return i<=2;case 1:return 3<=i&&i<=5;case 2:return 6<=i&&i<=8;case 3:return 9<=i;default:return!1}}function r(t,n,i,r){for(var e,u,o,s,e=0,u=0,o=n.length;u<o&&0===(e=(s=n[u]).WFt(t,n,i,r));u++);return e}function u(t){return Array.isArray(t)?t:[t]}function o(t,n){var i,r;if(0===t.length)return[];for(i=t.slice(0),r=0;r<n;r++)-1===t.indexOf(r)&&i.push(r);return i}function p(t,n){for(var i,r,e,i=j(t.slice(0,n)),r=n;r<t.length;r++)t[r]>i[0]&&(e=i[0],i[0]=t[r],t[r]=e,j(i));return i}function j(t){for(var n,i,n=t.length,i=Math.floor(n/2);0<=i;i--)y(t,i,n);return t}function y(t,n,i){var r,e,u,r,r=2*n+1,e=2*n+2,u=n;r<i&&t[r]<t[u]&&(u=r),n!==(u=e<i&&t[e]<t[u]?e:u)&&(r=t[n],t[n]=t[u],t[u]=r,y(t,u,i))}function b(t,n){for(var i,r,e,i=g(t.slice(0,n)),r=n;r<t.length;r++)t[r]<i[0]&&(e=i[0],i[0]=t[r],t[r]=e,g(i));return i}function g(t){for(var n,i,n=t.length,i=Math.floor(n/2);0<=i;i--)_(t,i,n);return t}function _(t,n,i){var r,e,u,r,r=2*n+1,e=2*n+2,u=n;r<i&&t[r]>t[u]&&(u=r),n!==(u=e<i&&t[e]>t[u]?e:u)&&(r=t[n],t[n]=t[u],t[u]=r,_(t,u,i))}function O(t,n){for(var i,r,e,u,i=0,r=t;i<r.length;i++)if(u=n(e=r[i]))return u}function S(t){var n,t,i,r,n=t.style,t=(t=(n=n||(t.style={})).cellButtons)||(n.cellButtons=[]),i=(i=n.dropDowns)||(n.dropDowns=[]);(r=O(t,function(t){return"openDateTimePicker"===t.command}))||t.push({imageType:"dropdown",command:"openDateTimePicker",useButtonStyle:!1,buttonBackColor:"transparent"}),(r=O(i,function(t){return"dateTimePicker"===t.type}))||i.push({type:"dateTimePicker",option:{showTime:!1,calendarPage:"day",startDay:"sunday"}})}function C(n,t){var i,r,i=(0,F.findIndex)(t,function(t){return M(t)===n});return-1<i&&(r=t[i]).width||e.GROUP_COLUMN_WIDTH}function M(t){var t=t.value;return"string"==typeof t?t:"function"==typeof t?t.name:void 0}function I(t){return!t.JOt}function x(t){var n,i,r,e,u,n=I(t);if(n){for(t.WOt++,r=0,e=i=t.eBt();r<e.length&&(!(u=e[r])||u.WOt||(n=x(u)));r++);t.WOt--}return n}function E(t){return t.isGroup||t.isCross}function P(t){return T(t[0])}function T(t){return t.operator===R}function A(t){return t[0].operator!==R&&t[0].ort}function N(t){return"="===t[0]}function k(t){return-1<t.indexOf(".")}function L(h,v,l,d,p,j){for(var y,b,t,n,i,r,y=l.isHierarchy(),b={},t=function(n){var t,i,r,e,u,o,s,f,c,a;if(n&&!b[n.field]){if(b[n.field]=!0,(t=l.uFt(n.field))||(l.eRt([n.field]),t=l.uFt(n.field)),i=t&&Object.keys(t),e=void 0,(r=v[n.field])instanceof Date){for((u=new Date(r)).setHours(0,0,0,0),o=u.toISOString().slice(0,10),e=!0,s=0,f=i;s<f.length;s++)if((c=f[s]).startsWith(o)){e=!1;break}}else e=(0,F.isNullOrUndefined)(r)?-1===i.indexOf("null")&&-1===i.indexOf("undefined"):-1===i.indexOf(r+"");if(!h.some(function(t){return t.field===n.field&&t.value===r})&&e&&(P(h)?(h.push(w(w({},n),{value:r,isAdded:!0})),y&&q(l,h[h.length-1],p,r,j)):(A(h)||r===d&&void 0===d)&&h.push(w(w({},n),{value:r,operator:"eq",relation:"or",isAdded:!0}))),-1<i.indexOf(d+"")&&1===t[d].length&&d!==r)for(a=0;a<h.length;a++)if(h[a].value===d&&h[a].isAdded){h.splice(a,1);break}}},n=0,i=h;n<i.length;n++)t(r=i[n])}function q(t,n,i,r,e){var i,u,o,s;if(n.field===i||(0,F.isNullOrUndefined)(i)){if(i=void 0,n.Vce)(i=n.Vce.slice())[0]=r;else{for(o=(u=t.getHierarchyNode(e,!0)).parent,s=[r];!o.isRoot;)s.push(o.getFieldValue(n.field)),o=o.parent;i=s}n.Vce=i}}function B(t){var n,i,r,e,e;if((0,F.isNullOrUndefined)(t))return t;for(n=[],i=0,r=t;i<r.length;i++)e=r[i],(e=w({},e)).getValue&&delete e.getValue,n.push(e);return n}function G(r,e){var t,u,o,t,u=function(n,i,r,t){return t.every(function(t){return t(n,i,r)})},o=function(){for(var t,n,i,t=[],n=[r[0]],i=1;i<r.length;i++)"or"===e[i]?(t.push(n),n=[r[i]]):n.push(r[i]);return 0<n.length&&t.push(n),t}();return function(n,i,r){return o.some(function(t){return u(n,i,r,t)})}}function V(t,r){var e;return t&&t.dataMap?(e=JSON.parse(JSON.stringify(t.dataMap)),function(t,n,i){var t=r(t,n,i);return void 0!==e[t]?e[t]:t}):r}function U(t,n,i,r,e){var u,o,s,r,f,c,a,h,v,l,d,p,j,y,b,w,u=[],o=!1,s=!1,r=r.map(function(t){var n=t.value;return n===m&&(o=!0),n===R&&(s=!0),t.value});for(o&&!s&&r.push(R),s&&!o&&r.push(m),f=0,c=r;f<c.length;f++)for(a=c[f],v=0,l=h=i&&i[a]||[];v<l.length;v++)u[d=l[v]]=!0;for(p=n,j=t.reduce(function(t,n){return t[n]=!0,t},{}),y=0,b=e;y<b.length;y++)!u[w=b[y]]||0<n&&j[w]||(t[p]=w,p++)}function H(t,n,i,r,e,u,o){var s,f,c,a,h,v,l,d,p,j,y,b,w,m,g,_,O,S,C,s=[],f=r.map(function(t,n){return n}),c=[];if(e&&e.length&&(a=!(f=[]),r.forEach(function(t,n){-1<u.indexOf(n)?(s.push(n),f.push(R)):(s.push(R),f.push(n)),t.isCross&&(a=!0)}),t=e[t],n=e[n],a)){for(h=[],v=[],l=0;l<r.length;l++)(r[l].isCross?(h[r[l].RBt]||(h[r[l].RBt]=[],c.push(h[r[l].RBt])),d=h[r[l].RBt]):c).push(l),t===l&&(t=c.length-1),n===l&&(n=c.length-1);for(p=0,j=u;p<j.length;p++)y=j[p],v.push(c.indexOf(y));s=[],f=[],c.forEach(function(t,n){-1<v.indexOf(n)?(s.push(n),f.push(R)):(s.push(R),f.push(n))}),i=1}if((0,F.swapArrayItems)(f,t,n,i),f=f.filter(function(t){return!(0,F.isNullOrUndefined)(t)}),e&&e.length){for(l=0;l<s.length;l++)void 0===s[l]&&(s[l]=f.shift());if(c&&c.length){for(b=[],w=0;w<s.length;w++)if(m=s[w],Array.isArray(c[m]))if("string"==typeof(g=o[w].cross)){for(_=[s[w]];w+1<o.length&&g===o[w+1].cross;)_=_.concat(s[w+1]),w++;for(O=c[_[0]].length,S=[],C=0;C<O;C++)for(l=0;l<_.length;l++)S.push(c[_[l]][C]);b=b.concat(S)}else b=b.concat(c[m]);else b.push(c[m]);s=b}}else s=f;return s}w=this&&this.__assign||function(){return(w=Object.assign||function(t){for(var n,i,r,e,i=1,r=arguments.length;i<r;i++)for(e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},Object.defineProperty(e,"__esModule",{value:!0}),e.ePt=e.hFt=e.mapGetValueFunc=e.aFt=e.removeExtraInfos=e.addFilterInfoForFieldValue=e.isRelation=e.isFormula=e.isFieldListFilterInfo=e.isFieldListFilter=e.isViewColumn=e.isTableDataReady=e.getColumnName=e.getGroupColumnWidth=e.applyDateTimePicker=e.array_find=e.generatePinnedColumnIndexMap=e.getSortInfos=e.multiSort=e.oFt=e.compareValue=e.GROUP_COLUMN_WIDTH=void 0,c=t("Common"),F=t("./dist/src/dataSource/utils.js"),s=["eq","neq","lt","lte","gt","gte"],f=["startswith","doesnotstartwith","endswith","contains"],a=["doesnotendwith","doesnotcontain"],m=null,R=void 0,e.GROUP_COLUMN_WIDTH=100,e.compareValue=n,e.oFt=i,e.multiSort=r,e.getSortInfos=u,e.generatePinnedColumnIndexMap=o,e.array_find=O,e.applyDateTimePicker=S,e.getGroupColumnWidth=C,e.getColumnName=M,e.isTableDataReady=x,e.isViewColumn=E,e.isFieldListFilter=P,e.isFieldListFilterInfo=T,e.isFormula=N,e.isRelation=k,e.addFilterInfoForFieldValue=L,e.removeExtraInfos=B,e.aFt=G,e.mapGetValueFunc=V,e.hFt=U,e.ePt=H},"./dist/src/view/view.entry.js":function(t,n,i){"use strict";var r,e,r=this&&this.__createBinding||(Object.create?function(t,n,i,r){void 0===r&&(r=i);var e=Object.getOwnPropertyDescriptor(n,i);e&&("get"in e?n.__esModule:!e.writable&&!e.configurable)||(e={enumerable:!0,get:function(){return n[i]}}),Object.defineProperty(t,r,e)}:function(t,n,i,r){t[r=void 0===r?i:r]=n[i]}),e=this&&this.__exportStar||function(t,n){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(n,i)||r(n,t,i)};Object.defineProperty(n,"__esModule",{value:!0}),e(i("./dist/src/view/view.js"),n),e(i("./dist/src/view/view-style.js"),n),e(i("./dist/src/view/view-event.js"),n),e(i("./dist/src/view/view-group.js"),n),e(i("./dist/src/view/view-sort.js"),n),e(i("./dist/src/view/view-filter.js"),n),e(i("./dist/src/view/view-cross.js"),n)},"./dist/src/view/view.js":function(t,n,i){"use strict";var b,v,w,o,l,r,m,e,h,d,u,s;function f(t){return{rule:{area:o.ViewArea.colHeader,direction:o.StateRuleDirection.column,state:t},style:{decoration:{icons:[{src:""}]}}}}function c(t){(0,w.isNullOrUndefined)(t.styleRules)&&(t.styleRules=(0,w.clone)(u,!0))}function a(t){return t instanceof Date&&!isNaN(t.valueOf())}function p(t){return e.Common.ct.Q0(t)}function j(t){var n=e.Common.ct.dJ(t);return n&&!a(n)&&(n=e.Common.ct.iPt(t)),a(n)?n:null}function y(t){var n,i,r,e,n=[],i=t.columns;if(i)for(r in i)i.hasOwnProperty(r)&&(e=i[r],n.push((0,w.clone)(e)));return n}function g(t){return 0===t?"":"_"+t}function _(u,a,t,o,i,s,f,c,n,r){var h,v,l,e,d,p,j,y,h={},v=[],l=!!t;if(a.forEach(function(t,n){var i,n,r,e,n,i=t.value;f&&!f[i]||(t.isCross?h[t.value]=o.getFieldByPosition(n).getValue(s):i&&!t.isGroup&&("string"==typeof i?(n=0<=i.indexOf("."),r="="===i[0],e=u.XOt&&(0,w.isNullOrUndefined)(u.XOt[i]),(!l||n||r||e)&&(n=c&&t.caption||i,h[n]=O(u,t,s))):"function"==typeof i&&v.push({name:i.name,caption:t.caption,value:i})))}),0<v.length&&(e=u.iBt(s),v.forEach(function(t){h[t.name]=t.value(e)})),l){for(p in d=o.getFieldValues(s,c,n))!d.hasOwnProperty(p)||n&&f&&!f[p]||(h[p]=d[p]);if(i&&r)for(j=function(f){for(var c,t,n,c=i[f].summaryFields,t=function(i){var t,n,t,r,e,u,o,s,t=c[i];if(t&&t.slice){for(n=g(f),t=t.caption+"_"+t.slice+n,r={},u=0,o=e=a.filter(function(t){var n=(0,m.getGroupOptionIndexesFrom)(t.value);return t.isGroup&&3===n.length&&+n[0]===f&&+n[1]===i});u<o.length;u++)r[(s=o[u]).caption]=d[s.value];h[t]=r}},n=0;n<c.length;n++)t(n)},y=0;y<i.length;y++)j(y)}return h}function O(t,n,i){return S(t._getValueByField(n.value,i),n)}function S(t,n){var n=n&&n.dataMap;return t=n?n[t]||t:t}function C(t,n,i){for(var r,e,r=0;r<n.length;r++)if((e=n[r]).value===i||e.caption===i)return t.columns[e.value]?e.value:(0,l.isViewColumn)(e)?{value:e.value,isGroup:e.isGroup,isCross:e.isCross}:{value:e.value};return i===t.uBt()?i:h}function F(n,t,i,r,e){var u,o,s,u=C(n,t,r);return e?(0,l.isViewColumn)(u)?(e.getValue=i.getFieldByName(u.value),function(t,n,i){return i.getValue.getValue(n)}):u.value?(e.getValue=n.XOt[u.value],(0,w.isNullOrUndefined)(e.getValue)&&(e.getValue={getValue:function(t){return n._getValueByField(u.value,t)}}),function(t,n,i){return i.getValue.getValue(n)}):(e.getValue=n._dataSource._data[u].data,function(t,n,i){return i.getValue[n]}):(o=String(u.value),s=String(u),u.value?function(t,n){return t._getValueByField(o,n)}:function(t,n){return t._dataSource._data[s].data[n]})}function R(t,n,i,r){void 0===i&&(i=!0),void 0===r&&(r={}),this.rPt=10,this.lFt=[],this.CLt=[],this.oPt=[],this.ZOt={},this.rb=!1,this.BLt={};var e=this;e.name=t,Object.defineProperty(e,"tableName",{get:function(){var t;return null==(t=e.gLt)?void 0:t.name}}),e.ILt=(0,w.clone)(n=n||[]),e.yLt=n.map(function(t){return"string"==typeof t?t={name:t,value:t}:t.name||"string"!=typeof t.value||(t.name=t.value),t.value&&"="===t.value[0]&&(t.readonly=!0),t}),e.aPt=i,e.autoSort=!0,e.autoFilter=!1,e.autoGroup=!0,e.UFt=!0,c(r),(e.LEt=r).styleRules||e.clearStyleRules()}b=this&&this.__assign||function(){return(b=Object.assign||function(t){for(var n,i,r,e,i=1,r=arguments.length;i<r;i++)for(e in n=arguments[i])Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e]);return t}).apply(this,arguments)},v=this&&this.__spreadArray||function(t,n,i){if(i||2===arguments.length)for(var r=0,e=n.length,u;r<e;r++)!u&&r in n||((u=u||Array.prototype.slice.call(n,0,r))[r]=n[r]);return t.concat(u||Array.prototype.slice.call(n))},Object.defineProperty(n,"__esModule",{value:!0}),n.View=n.rFt=n.ZFt=n.Jue=n.Kue=n.tse=void 0,w=i("./dist/src/dataSource/utils.js"),o=i("./dist/src/interfaces/interface.js"),l=i("./dist/src/view/view-util.js"),r=i("./dist/src/viewField/fieldManager.js"),m=i("./dist/src/viewField/groupManager.js"),e=i("Common"),h=null,d=void 0,u={pin:f(o.RowColumnStates.pin),primaryKey:f(o.RowColumnStates.primaryKey),readonly:f(o.RowColumnStates.readonly),required:f(o.RowColumnStates.required)},n.tse=y,n.Kue=g,n.Jue=_,n.ZFt=C,n.rFt=F,R.prototype.XLt=function(){var t,n=this.gLt;return(0,l.isTableDataReady)(n)},R.prototype.Ywt=function(t,n,i){var r=this.gLt;return r&&r.Ywt(t,n,i)},R.prototype.nMt=function(t,n,i){var n=this.RJ(n),i=this.uPt(i);return this.sPt(t,n,i)},R.prototype.sPt=function(t,n,i){return this._fe(t,n,(0,w.isNumber)(i)?(0,l.getColumnName)(this.yLt[i]):d)},R.prototype._fe=function(t,n,i){var r,e,t,r=this.gLt;if(r)return!(e=!1,w.isNullOrEmpty)(i)&&(0,w.isNullOrUndefined)(r.XOt[i])&&(e=!0,r.XOt[i]=this.lLt.getFieldByName(i)),t=r.kfe(t,n,i),e&&delete r.XOt[i],t},R.prototype.cPt=function(){var t=this,n=t.gLt;n&&(t.aPt&&t.yLt.length<=0&&(t.yLt=y(n)),t.fPt(),t.lPt())},R.prototype.PRt=function(t){var n=this;t?(n.gLt=t,n.JLt(),n.bLt()?n.XLt()&&(n.RFt(),n.cPt()):n.cPt(),n.XLt()&&(n.hPt(),n.dPt=!0),n.v7()):(n.wpt(),n.gLt=t)},R.prototype.fPt=function(){var t,t,n,t,i,r,e,u,o,s,f,c,a,h,n=null==(t=null==(t=this.gLt._dataSource.options)?void 0:t.schema)?void 0:t.columns;if(n)for(t=this.yLt,r=(i=this.isHierarchy())&&this.gLt._dataSource.options.schema.hierarchy.column,e=["caption","width","style","conditionalFormats","validator","isPrimaryKey","readonly","required","defaultValue","headerStyle","visible","headerFit","indexed","allowSort","allowFilterByValue","allowFilterByList","dataMap","lookup"],u=0,o=t;u<o.length;u++)if("string"==typeof(s=o[u]).value&&(f=n[s.value])){for(c=0,a=e;c<a.length;c++)(0,w.isNullOrUndefined)(s[h=a[c]])&&(s[h]=f[h]);s.dataType=f.dataType,"date"===f.dataType&&(0,l.applyDateTimePicker)(s),!i||s.value!==r&&"rowOrder"!==f.dataType||(s.readonly=!0),f.n7t&&"rowOrder"!==f.dataType&&(s.readonly=!1,delete f.n7t)}},R.prototype.lPt=function(){for(var t,n,i,r,e,t=this.LEt.defaultColumnWidth||60,n,i=0,r=this.yLt;i<r.length;i++)e=r[i],(0,w.isNullOrUndefined)(e.width)&&(e.width=t)},R.prototype.gFt=function(t){this.XFt()||(this.iRt=this.qFt(t))},R.prototype.qFt=function(t){var n,i,r,t,e,u,n=[],i=t||this.length(),r=this.lFt,t=r.length;for(0<t&&(n=r.slice(0)),e=t,u=0;u<i;u++)-1===r.indexOf(u)&&(n[e]=u,e++);return n},R.prototype.jRt=function(t){return d},R.prototype.RFt=function(){var t=this,n=t.gLt;return t.iRt||t.gFt(),t.lLt=new r.FieldManager(t.LEt,n),t.ELt(),t.yLt=t.lLt.prepareFields(t.yLt),t.YBt(),t.lLt},R.prototype.getLookup=function(t){return(0,r.getLookupBy)(this.gLt,t)},R.prototype.isLookupField=function(t){return(0,r.isLookupField)(this.gLt,t)},R.prototype.isLookupListField=function(t){return(0,r.isLookupListField)(this.gLt,t)},R.prototype.isLookupRelationField=function(t){return(0,r.isLookupRelationField)(this.gLt,t)},R.prototype.RJ=function(t){return this.iRt||this.gFt(),this.iRt[t]},R.prototype.FLt=function(t){return this.iRt||this.gFt(),this.iRt.indexOf(t)},R.prototype.length=function(){return this.gLt.length()},R.prototype.visibleLength=function(){return this.iRt||this.gFt(),this.iRt.length},R.prototype.getDirtyIndexes=function(){var n=this;return n.gLt.getDirtyIndexes().map(function(t){return n.FLt(t)})},R.prototype.isInserted=function(t){var n=this,t=n.RJ(t);return n.vPt(t)},R.prototype.vPt=function(t){return this.gLt.isInserted(t)},R.prototype.isUpdated=function(t){var n,t,t,n=this,t=n.RJ(t);return n.rb=!0,t=n.gLt.isUpdated(t),n.rb=!1,t},R.prototype.getErrorInfo=function(t){var n,t=this.RJ(t);return this.gLt.getErrorInfo(t)},R.prototype.insertItem=function(t,n,i,r){var e,u,e=this;if(!e.isHierarchy())return e.mPt(t,n,i,r);t<(u=e.visibleLength())?e.addHierarchyItemBefore(t,n,i,r):e.addHierarchyItemAfter(u-1,n,i,r)},R.prototype.mPt=function(n,t,i,r){var e,i,u,r,i,o,s,t,f,c,a,h,o,v,l,e=this,i=e.GLt(i,r),u=i.success,r=i.fail,i=e.visibleLength();return n=i<n?i:n,o=e.RJ(n),s=e.gPt(t),e.ULt(s),(0,w.isNullOrUndefined)(o)&&(e.Dit()?(o=e.length(),e.HLt(s,o)):o=n),t=e.gLt.uBt(),f=!(0,w.isNullOrUndefined)(t),c=e.isHierarchy(),a=o,h=n<i,f&&!c&&(v=o=void 0,l=!1,h?(o=e.RJ(n-1),v=a):(v=e.RJ(n-1),l=!0),s[t]=e.gLt.d7t(o,v,l)),(f||c)&&(a=e.Dit()?e.length():i),e.gLt.insertItem(a,s,function(t){e.zLt(a,s,h,n),u&&u(t)},r)},R.prototype.zLt=function(t,n,i,r){var e,i,u,o,r,i,e=this;i?(i=e.length()-1,e.cRt(i,n),u=e.autoFilter,(o=!(0,w.isNullOrUndefined)(e.NLt))&&(e.autoFilter=!0),(0,w.isNumber)(r)&&!e.tPt()?e.iRt.splice(r,0,i):e.iRt.push(i),e.tFt(d,!o),o&&(e.autoFilter=u)):(e.cRt(t,n),r=e.length(),(i=!e.autoFilter&&!!e.iRt)&&e.iRt.push(r-1),e.tFt(r,i))},R.prototype.gPt=function(t){var n,i,r,e,u,o,s,o,n={};if(this.isHierarchy())for(i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);for(e=0,u=r=this.yLt;e<u.length;e++)s=t[i=(o=u[e]).value instanceof Function?o.value.name:o.value],(0,w.isUndefined)(s)||("string"==typeof(o=o.value)?n[o]=s:o(n,s));return n},R.prototype.pPt=function(n,t,i){var r,r,e,u,e,o,t,s,f,c,e=this,u=e.lLt,e=e.gLt,o=u.getFieldByPosition(t),t=e.KRt(o.valueRelation,n);if(o.isOneToMany){if(!(t=t&&(0,w.isNumber)(o.getValueIndex(n)))&&(s=!1,e.JRt(o.valueRelation,n,((r={})[o.dimRelationKey]=o.getDimValue(),r),function(t){u.setCrossFieldInsertedIndex(o,n,t.index),s=!0},i),!s))return}else if(t){if(c=!1,e.QRt(o.dimRelationPath,n,o.getDimValue(),function(){c=!0},i),!c)return}else if(f=!1,e.JRt(o.valueRelation,n,((r={})[o.dimRelationKey]=o.getDimValue(),r),function(){f=!0},i),!f)return;return o.getRelationField(n)},R.prototype.updateItem=function(t,n,i,r,e){var u,o,u,s,f,o,u,c,o,a,u,o,o=e&&e.hasAddNewRowData,u=e&&e.currentModelIndex,s=this,f=o?u:s.RJ(t),o=s.eFt(f,n),u=o.colIndex,c;return o.isCross&&(o=s.lLt,(a=o.getFieldByPosition(u)).isOneToMany||0<(u=o.getFields(function(t){return t.initialOptionIndex===a.initialOptionIndex&&t.name!==a.name&&!(0,w.isNullOrUndefined)(t.getValueIndex(f))})).length&&(o=u[0].name,s.dRt(t,((u={})[o]=h,u),h,h,e))),s.dRt(t,n,i,r,e)},R.prototype.dRt=function(t,n,i,r,e){var u,e,o,i,s,r,f,i,c,a,h,u,e,t,n,i,u=e&&e.hasAddNewRowData,e=e&&e.currentModelIndex,o=this,i=o.GLt(i,r),s=i.success,r=i.fail,f=u?e:o.RJ(t),i=o.eFt(f,n),c=i.data,a=i.originValueOfField,h=i.field,u=i.colIndex,e=i.isCross,t=i.isValueFunction,n=c[h],i=h;if(e){if(o.vPt(f))return void r();if(i=o.pPt(f,u,r),(0,w.isNullOrUndefined)(i))return void r()}return t?(o.VLt(c,a,i,f),o.gLt.dRt(f,c,h,a,function(t){o.YLt(f,h,a,c[h]),s(t)},r)):(o.VLt(c,a,i,f),o.gLt.QRt(i,f,n,function(t){o.YLt(f,h,a,c[h]),s(t)},r))},R.prototype.VLt=function(t,n,i,r){var e=this;e.ULt(t),e.iFt(t,n,i,r)},R.prototype.YLt=function(t,n,i,r){var e=this;e.hRt(t,n,i,r),e.tFt(d,!0,n,d)},R.prototype.eFt=function(t,n){for(var t,i,r,e,u,o,s,f,c,a,h,v,l,d,p,j,y,t=this.getRowData(t,!0),i=b({},t),r,o=0,s=0,f=!1,c=!1,a=0,h=this.yLt;a<h.length;a++){if(d=n[l=(v=h[a]).value instanceof Function?v.value.name:v.value],!(0,w.isUndefined)(d))if("string"==typeof(p=v.value)){if(j=v.dataMap)for(y in j)d===j[y]&&(d=isNaN(y)?y:+y);e=i[p],i[p]=d,u=p,s=o,f=v.isCross}else c=!0,p(i,d);o++}return{data:i,originValueOfField:e,field:u,colIndex:s,isCross:f,isValueFunction:c}},R.prototype.efe=function(t,n,i){var r,e,r=this;for(e in t)t[e]!==n[e]&&r.VLt(t,n[e],e,i)},R.prototype.resetItem=function(t,n,i){var r=this,n=r.GLt(n,i),e=n.success,i=n.fail,u=r.RJ(t),o=this.getRowData(u,!0),s=r.bPt(u);if(!(0,w.isNullOrUndefined)(t)&&!(0,w.isNullOrUndefined)(u))return r.efe(s,o,u),r.gLt.resetItem(u,function(t){r.ZLt(u,o,s),e(t)},i);i()},R.prototype.ZLt=function(t,n,i){var r=this;r.vLt(t),r.pRt(t,n,i),r.tFt(d,!0,d,d)},R.prototype.saveItem=function(t,n,i){var r=this,n=r.GLt(n,i),e=n.success,i=n.fail,n=r.RJ(t);return r.gLt.saveItem(n,function(t){e(t)},i)},R.prototype.getRowData=function(t,n,i,r,e,u){var o,n,o=this,n=n?t:o.RJ(t);return o.nFt(n,i,r,e,u)},R.prototype.yPt=function(t){return this.isHierarchy()&&this.wPt(t)},R.prototype.wPt=function(t,n){var i=this,r=i.gLt.uBt(),e,r=i.isHierarchy()||!(0,w.isNullOrUndefined)(r),u=(0,w.isNullOrUndefined)(i.MFt),t=!(0<i.lFt.length)||i.lFt.length<t&&(!(0,w.isNumber)(n)||i.lFt.length<n);return r&&u&&t},R.prototype.MPt=function(){var t=this;return!!(0,w.isNullOrUndefined)(t.kLt)||!!t.kLt[0].ascending},R.prototype.CPt=function(t,n){var i,r,e,u,i=this,e=i.getHierarchyNode(t).parent;if(n){for(u=t+1;u<i.visibleLength();u++)if(i.getHierarchyNode(u).parent===e){r=u;break}}else for(u=t-1;0<=u;u--)if(i.getHierarchyNode(u).parent===e){r=u;break}return r},R.prototype.m7t=function(t,n){var i,r,e,u,u,o,s,f,c,a,h,r,i=this;if(t!==n&&i.wPt(t,n)){if(u=(e=t<n)?n+1:n-1,(r=i.isHierarchy())&&1===Math.abs(t-n)&&(n=i.CPt(t,e)),u=i.gLt.m7t(e,i.RJ(t),i.RJ(n),i.RJ(u))){if(o=i.iRt,f=1,c=[s=i.RJ(t)],r)for(c=[],h=(a=t)+(f=i.gLt.V7t(s));a<h;a++)c.push(i.RJ(a));e?(r=i.gLt.V7t(i.RJ(n)),o.splice.apply(o,v([n+r,0],c,!1)),o.splice(t,f)):(o.splice(t,f),o.splice.apply(o,v([n,0],c,!1))),i.wFt=d}return u}},R.prototype.moveUp=function(t){var n,i=1;0<t&&this.m7t(t,t-1)},R.prototype.moveDown=function(t){var n=this,i=1;t<n.visibleLength()-1&&n.m7t(t,t+1)},R.prototype.SPt=function(){for(var t,n,i,r,e,u,o,t=this,n=t.gLt._dataSource.options.schema.hierarchy.outlineColumn,i=t.yLt,r=-1,e=-1,u=0;u<i.length;u++){if(o=i[u],!(0,w.isNullOrEmpty)(o.outlineColumn)){r=u;break}-1!==e||o.value!==n&&((0,w.isNullOrUndefined)(n)||o.value!==n.value)||(e=u)}return-1!==r?{index:r,options:i[r].outlineColumn}:{index:e,options:n}},R.prototype.getHierarchyColumnOptions=function(){return this.SPt().options},R.prototype.getHierarchyColumnIndex=function(){return this.SPt().index},R.prototype.hasHierarchyColumn=function(t){var n=this,i=n.isHierarchy(),n=i&&n.getHierarchyColumnIndex();return(0,w.isNumber)(t)?i&&n===t:!(!i||-1===n)},R.prototype.isHierarchy=function(){return this.gLt.CEt()},R.prototype.getHierarchyNode=function(t,n){var i,n,i=this;if(i.isHierarchy())return n=n?t:i.RJ(t),i.gLt.SEt(n)},R.prototype.getHierarchyRootNode=function(){var t=this;if(t.isHierarchy())return t.gLt.f7t()},R.prototype.promoteHierarchyLevel=function(t){var n;this.isHierarchy()&&this.gLt.M7t(this.RJ(t))},R.prototype.demoteHierarchyLevel=function(t,n){var i=this;i.isHierarchy()&&i.gLt.S7t(i.RJ(t),n)},R.prototype.hasRowOrder=function(){var t;return!(0,w.isNullOrUndefined)(this.gLt.uBt())},R.prototype.hasHierarchyRowOrder=function(){return this.gLt.qX()},R.prototype.addHierarchyItemBefore=function(t,n,i,r){var e,u,e=this;e.yPt(t)&&(u=e.gLt.O7t(e.RJ(t),n),e.APt(n,u),e.mPt(t,n,i,r))},R.prototype.addHierarchyItemAfter=function(t,n,i,r){var e,u,o,e=this;if(e.yPt(t))return u=e.gLt.V7t(e.RJ(t)),o=e.gLt.L7t(e.RJ(t),n),e.APt(n,o),e.mPt(t+u,n,i,r),u},R.prototype.addHierarchyItemAbove=function(t,n,i,r){var e,u,e=this;e.yPt(t)&&(u=e.gLt.F7t(e.RJ(t),n),e.APt(n,u),e.mPt(t,n,i,r))},R.prototype.addHierarchyItemBelow=function(t,n,i,r){var e,u,o,e=this;if(e.yPt(t))return u=e.gLt.V7t(e.RJ(t)),o=e.gLt.G7t(e.RJ(t),n),e.APt(n,o),e.mPt(t+u,n,i,r),u},R.prototype.APt=function(t,n){var i,r,e,i,r=this.gLt.H7t(n);if(!(0,w.isNullOrUndefined)(r))for(e in r)r.hasOwnProperty(e)&&(t[e]=r[e])},R.prototype.h7t=function(t,n){if(this.isHierarchy())return this.gLt.h7t(t,n)},R.prototype.fetch=function(n){var i,r,t,t,i=this,r=i.gLt.QOt.tables,t=(0,w.keys)(r);if(0<t.length)return t=t.map(function(t){var t=r[t];return t&&t.fetch(n)}),Promise.all(t).then(function(t){i.JLt(),i.pLt()&&(i.RFt(),i.cPt()),i.dPt||i.hPt();var n=i;return(n.dp||n.vp)&&(n.dp&&n.dp(),n.vp)&&n.vp(),t})},R.prototype.iM=function(t){var n=this;n.Wce(),n.cFt(),t&&n.gFt(),n.hLt(),n.tFt(d,!0)},R.prototype.hPt=function(){for(var t,n,i,r,e,u,t,n=0,i=this.yLt;n<i.length;n++)(r=i[n]).cross||(e=r.lookup,(0,w.isArray)(e)?"string"==typeof r.value&&-1===r.value.indexOf(".")&&0<(e=(0,w.getUniqueArray)(e)).length&&((u=(u=r.style)||(r.style={})).cellType||(u.cellType={type:"combobox",items:e})):(0,w.isString)(e)&&e?this.IPt(r,e):(0,w.isObject)(e)&&this.IPt(r,e.name,e.columns))},R.prototype.IPt=function(t,n,i){var r,t,e,r,u,r,u,n,r,r=t.style,t=(t=(r=r||(t.style={})).cellButtons)||(r.cellButtons=[]),e=(e=r.dropDowns)||(r.dropDowns=[]),r=(0,l.array_find)(t,function(t){return"openMultiColumn"===t.command}),u=(0,l.array_find)(e,function(t){return"multiColumn"===t.type});r||u||(u=(r=this.xPt(n)).table,n=r.field,u&&n&&u!==this.gLt&&(r=u.columns)&&(t.push({imageType:"ellipsis",command:"openMultiColumn",useButtonStyle:!0}),e.push({type:"multiColumn",option:{dataSource:u.views[o.DEFAULT_VIEW_NAME]||u.addView(o.DEFAULT_VIEW_NAME),bindingInfos:this.NPt(r,i),key:n}})))},R.prototype.xPt=function(t){for(var n,i,r,e,u,o,r,e=0,u=this.gLt.QOt.relationships;e<u.length;e++)if((o=u[e]).sourceRelationshipName===t){n=o.targetTable,i=o.targetFieldName;break}return{table:n,field:i}},R.prototype.NPt=function(n,t){return t?t.map(function(t){return(0,w.isString)(t)?{name:t,width:"*"}:{name:t.value,width:(0,w.isNullOrUndefined)(t.width)?"*":t.width,displayName:t.caption,visible:t.visible}}):(0,w.keys)(n).map(function(t){var t=n[t];return{name:t.value,width:(0,w.isNullOrUndefined)(t.width)?"*":t.width,displayName:t.caption,visible:t.visible}})},R.prototype.oV=function(){for(var t,n,i,r,t=this,n=t.gLt.length(),i=[],r=0;r<n;r++)i.push(t.nFt(r));return i},R.prototype.ULt=function(t){for(var n,i,r,e,u,o,s,e,n,i=0,r=this.yLt;i<r.length;i++)if(u=(e=r[i]).dataMap,"string"==typeof(o=e.value)){if(u)for(s in u)t[o]===u[s]&&(t[o]=isNaN(s)?s:+s);t.hasOwnProperty(o)&&(e=this.gLt.bEt(o))&&e.relatedTable&&e.setValue&&e.setValue(t)}},R.prototype.kPt=function(t,n){var i,r,e,i=this.lFt;if(i&&0<i.length){for(r=0;r<n;r++)-1<(e=i.indexOf(t+r))&&i.splice(e,1);for(r=0;r<i.length;r++)i[r]>t&&(i[r]-=n)}},R.prototype.removeRowData=function(n,i,t,r){var e,t,u,r,t,o,e=this,t=e.GLt(t,r),u=t.success,r=t.fail,t=e.gLt,o=e.RJ(n);(0,w.isNullOrUndefined)(n)||(0,w.isNullOrUndefined)(o)||(0,w.isNullOrUndefined)(i)?r():t.remove(o,i,function(t){e.WLt(o,t.removedCount||i,n),u(t)},r)},R.prototype.WLt=function(t,n,i){var e,u,r,o,s,e=this;for(e.kPt(t,n),(0,w.isNumber)(i)||(i=e.FLt(t)),u=e.iRt.slice(i,i+n),r=function(t,n){var i,r,i=e.iRt[t],r=u.reduce(function(t,n){return n<i?t+1:t},0);0<r&&(e.iRt[t]-=r)},o=0,s=e.iRt.length;o<s;o++)r(o,s);e.iRt.splice(i,n),e.dLt(t,n),e.MRt(t,n),e.tFt(void 0,!0)},R.prototype.getChanges=function(){for(var t,n,i,r,e,t,n=this.gLt.getChanges(),i=0,r=n;i<r.length;i++)(e=r[i]).index=this.FLt(e.index);return n},R.prototype.isDataLengthChanged=function(){return this.gLt.isDataLengthChanged()},R.prototype.submitChanges=function(r){var e=this,t=e.GLt(),n=t.success,t=t.fail,i;return e.gLt.submitChanges(function(t,n,i){var t;r&&(t=e.FLt(t),r(t,n,i))}).then(function(){e.QLt(),n()}).catch(t)},R.prototype.QLt=function(){},R.prototype.cancelChanges=function(){var t,n,i,n,r,t=this,n=t.GLt(),i=n.success,n=n.fail,r=t.isDataLengthChanged();t.gLt.cancelChanges(function(){t.KLt(r),i()},n)},R.prototype.KLt=function(t){this.iM(t)},R.prototype.DPt=function(t,n){var i,r,e,t,u,i=this,r=i.TLt(t,n),e=i.ILt.map(function(t,n){return{index:n,option:t}}),t=i._Pt(t,n);if(e=t.map(function(t){return e[t]}),i.ILt=e.map(function(t){return t.option}),r)return r;u=[],e.forEach(function(t,n){(0,w.isNullOrUndefined)(t.option.cross)||t.index===n||u.push({oldIndex:t.index,newIndex:n})}),i.wLt(u)},R.prototype.EPt=function(){var i,t,r,i=this,t=i.CLt;return t&&0<t.length?(r=[],t.forEach(function(t,n){r.push(i.yLt[t].value)}),r):[]},R.prototype.jPt=function(t){var n,i=this.yLt;return(0,w.isNullOrUndefined)(t)?[]:t.map(function(n){return(0,w.findIndex)(i,function(t){return t.value===n})})},R.prototype.OPt=function(t,n,i){var r,e,t,n,u,o,s,f,c,a,a,h,v,r=this;if(r.yLt.forEach(function(t,n){t.RPt=n}),e=r.oPt,t=(0,l.ePt)(t,n,i,r.yLt,r.oPt,r.CLt,r.ILt),n=r.CLt.map(function(t){return r.yLt[t]}),r.yLt=t.map(function(t){return r.yLt[t]}),n&&n.length){for(u=[],o=r.yLt.length,s=-1,f=0,c=n;f<c.length;f++)a=c[f],a=r.yLt.indexOf(a),s=Math.max(a,s),u.push(a);for(h=0;h<o;h++)-1===u.indexOf(h)&&u.push(h);r.oPt=u,r.CLt=u.slice(0,n.length)}return v=r.yLt.reduce(function(t,n,i){return n.RPt!==i&&t.push({oldIndex:n.RPt,newIndex:i}),delete n.RPt,t},[]),r.yLt.forEach(function(t){for(var n,i,r,e,r,n=0,i=v;n<i.length;n++)if(e=(r=i[n]).oldIndex,r=r.newIndex,t._Ft===e){t._Ft=r;break}}),r.lLt&&r.lLt.moveFieldsByIndexes(v),v.map(function(t){return t.oldIndex=r.BPt(t.oldIndex,e),t.newIndex=r.BPt(t.newIndex),t})},R.prototype.SLt=function(t){var n,i,n,r,n=this,i=n.yLt,n=n.ILt,r=i[t];return r.isCross?r.RBt:(0,w.findIndex)(n,function(t){return t.value===r.value})},R.prototype.ALt=function(t){var n=this,i=n.CLt,r=n.ILt;return t=t||i.map(function(t){return n.SLt(t)}),(0,l.generatePinnedColumnIndexMap)(t,r.length)},R.prototype._Pt=function(t,n){var i,r,e,u,r,r,o;if(t!==n)return r=(i=this).CLt,e=i.ILt.map(function(t,n){return{index:n}}),u=r.map(function(t){return i.SLt(t)}),0<(r=(0,l.generatePinnedColumnIndexMap)(u,e.length)).length&&(t=r[t],n=r[n]),r=u.map(function(t){var t=e[t];return t.LPt=!0,t}),(0,w.swapArrayItems)(e,t,n,1),o=e.filter(function(t){return!t.LPt}),r.forEach(function(t,n){o.splice(u[n],0,t)}),o.map(function(t){return t.index})},R.prototype.getColumnInfos=function(i,r,e){for(var u,o,s,f,t,c,n,u=[],o=this.yLt,s=this.oPt,f=this.gLt,t=function(t){var t,n,t,t=!(0<s.length)||e||(0,w.isNullOrUndefined)(s[t])?t:s[t],n=o[t];if(f.jOt(n.value)&&(n.isPrimaryKey=!0),!i||!n.isGroup){if(r&&n.isCross&&(t=n.RBt,(n=c.ILt[t]).RBt=t,u.some(function(t){return t===n})))return"continue";u.push(n)}},c=this,n=0;n<o.length;n++)t(n);return u},R.prototype.ife=function(t){var n=this;return(0,l.getColumnName)((0,w.isNumber)(t)?n.getColumn(t):t)},R.prototype.FPt=function(t){var t=this.gLt.qRt(t);return!(0,w.isNullOrUndefined)(t)&&t!==this.gLt},R.prototype.setColumnInfos=function(t,n){this.yLt=t,this.PPt(),this.Pfe(),n&&this.cPt()},R.prototype.Pfe=function(){for(var t,n,i,r,e,u,o,t=this.ILt,n=0;n<t.length;n++)for(i=t[n],r=this.yLt,e=0;e<r.length;e++)if(u=r[e],i.value===u.value){for(o in u)u.hasOwnProperty(o)&&"_"!==o.charAt(0)&&(i[o]=u[o]);break}},R.prototype.PPt=function(){for(var t,n,i,r,e,u,o,s,t=this.ILt,n=t.length-1;0<=n;n--)"string"==typeof(i=t[n].value)&&"="===i[0]&&t.splice(n,1);for(r=this.yLt,e=n=0;n<r.length;)u=r[n],o=t[e],u.isGroup||u.isCross?n++:o&&o.cross?e++:(s=u.value)===(i=o&&o.value)?(n++,e++):"string"==typeof s&&"="===s[0]?(t.splice(e,0,u),n++,e++):n++},R.prototype.GPt=function(t){var n;return!!this.gLt.ZRt(t)},R.prototype.togglePinnedRows=function(t){var n,i,r,e,u,o,s,f,c,a,h,v,l,d,p,j,y;if((0,w.isNullOrUndefined)(t)||this.hasHierarchyColumn())return this.lFt&&this.lFt.length;for(n=this.lFt,i=this.iRt,r=t.length,e=[],u=[],o=n.length,s=0;s<r;s++)-1<(f=i[t[s]])&&(-1<(c=n.indexOf(f))?u.push(c):e.push(f));if(n.length-(h=u.length)+(a=e.length)>this.rPt)return-1;if(0<h)for(u.sort(),s=h-1;0<=s;s--)n.splice(u[s],1);for(s=0;s<a;s++)n.push(e[s]);if(0<h||0<a){for(v=[],l=i.length,0<(d=n.length)&&(v=n.slice(0)),f=d,s=0;s<l;s++)-1===n.indexOf(i[s])&&(v[f]=i[s],f++);if(!this.mFt()&&!this.tPt())for(s=0;s<h;s++)p=i[u[s]],j=v.indexOf(p),y=this.UPt(p,o,v),v.splice(j,1),v.splice(y=j<y?y-1:y,0,p),d<o&&o--;this.iRt=v,this.NFt(),this.Wce(),this.vFt()}return n.length},R.prototype.togglePinnedColumns=function(t){var n,i,r,e,u,o,s,f,c,a,h,v,n=this;if((0,w.isNullOrUndefined)(t))return this.CLt&&this.CLt.length;for(i=this.oPt,r=0<i.length,t=t.filter(function(t){var t=r?i[t]:t;return!n.yLt[t].isCross}),e=this.CLt,u=t.length,o=[],s=[],f=0;f<u;f++)-1<(c=r?i[t[f]]:t[f])&&(-1<(a=e.indexOf(c))?s.push(a):o.push(c));if(e.length-(v=s.length)+(h=o.length)>this.rPt)return-1;if(0<v)for(s.sort(),f=v-1;0<=f;f--)e.splice(s[f],1);for(f=0;f<h;f++)e.push(o[f]);return(0<h||0<v)&&(this.oPt=(0,l.generatePinnedColumnIndexMap)(e,this.yLt.length)),e.length},R.prototype.uPt=function(t){var n,i=this.oPt;return i&&0<i.length?i[t]:t},R.prototype.BPt=function(t,n){var i;return(n=n||this.oPt)&&0<n.length?n.indexOf(+t):+t},R.prototype.getRowDataAsync=function(i){var r=this;return r.fetch().then(function(t){var n=r.RJ(i);return r.nFt(n)})},R.prototype.UPt=function(t,n,i){for(var r=n;r<i.length;r++)if(i[r]>t)return r;return i.length},R.prototype.nFt=function(t,n,i,r,e){var u=this;return _(u.gLt,u.yLt,u.BFt,u.lLt,u.MFt,t,n,i,r,e)},R.prototype.ofe=function(t,n){return O(this.gLt,t,n)},R.prototype.bPt=function(o){var s,t,f,c,a,h,n,i,r,s=this,t=s.yLt,f={},c=[],a=!!s.BFt,h=s.gLt;if(t.forEach(function(t,n){var i,n,r,e,u,i=t.value;t.isCross?f[t.value]=s.lLt.getFieldByPosition(n).getOriginalValue(o):i&&!t.isGroup&&("string"==typeof i?(n=0<=i.indexOf("."),r="="===i[0],e=h.XOt&&(0,w.isNullOrUndefined)(h.XOt[i]),(!a||n||r||e)&&(f[i]=S(r?h._getValueByField(i,o):h.XRt(i,o),t))):"function"==typeof i&&c.push({name:i.name,caption:t.caption,value:i}))}),0<c.length&&(n=h.iBt(o),c.forEach(function(t){f[t.name]=t.value(n)})),a)for(r in i=this.lLt.CBt(o))i.hasOwnProperty(r)&&(f[r]=i[r]);return f},R.prototype.addColumn=function(t){"string"==typeof t?t={name:t,value:t}:t.name||"string"!=typeof t.value||(t.name=t.value),"="===t.value[0]&&(t.readonly=!0),this.yLt.push(t)},R.prototype.getColumn=function(t){var n=this.getColumnInfos();return(0,w.isNullOrUndefined)(t)?n:n[t]},R.prototype.removeColumn=function(t){for(var n,i,r,n=this.yLt,i=0;i<n.length;i++)if((r=n[i]).value===t){n.splice(i,1);break}},R.prototype.tFt=function(t,n,i,r){n||this.gFt(t);var n=this.NLt;n&&this.autoFilter&&this.filter(),this.NLt=n,this.vFt(),this.nPt(i),this.wFt=d,this.Dfe=d},R.prototype.excludeInsertedPinnedRows=function(){for(var t,n,i,r,t=this,n=t.lFt,i=[],r=0;r<n.length;r++)t.isInserted(r)||i.push(n[r]);return i},R.prototype.toJSON=function(){var i,t,r,n,e,i=this,t={};if(i._Lt&&(t={sortBefore:(0,l.removeExtraInfos)(i.DLt),sortAfter:(0,l.removeExtraInfos)(i._Lt)}),0===(r=i.ILt).length)0===i.yLt.length&&i.cPt(),r=i.ILt=i.yLt;else for(n=function(n){var t,t,t,t=r[n].cross;(0,w.isNullOrUndefined)(t)&&(t=i.yLt.filter(function(t){return t.value===r[n].value})[0])&&(r[n]=t),(t=r[n].validator)&&"date"===t.type&&(a(t.value1)&&(t.value1=p(t.value1)),a(t.value2))&&(t.value2=p(t.value2))},e=0;e<r.length;e++)n(e);return b(b({},t),{name:i.name,options:i.LEt,columns:i.ILt,indexMap:i.iRt,columnIndexMap:i.oPt,autoSort:i.autoSort,sortInfo:(0,l.removeExtraInfos)(i.kLt),autoFilter:i.autoFilter,filterInfo:(0,l.removeExtraInfos)(i.NLt),autoGroup:i.autoGroup,groupInfo:i.MFt,detailColumnsVisible:i.UFt,pinnedRows:i.excludeInsertedPinnedRows(),pinnedColumns:i.CLt})},R.prototype.fromJSON=function(t){var n,i,r,e,u,o,n=this;if(n.iRt=t.indexMap,i=t.columnIndexMap,r=n.yLt,i&&r&&0<i.length&&i.length<r.length)for(e=i.length;e<r.length;e++)i[e]=e;for(e=0;e<r.length;e++)(u=r[e].validator)&&"date"===u.type&&("string"==typeof u.value1&&(o=j(u.value1))&&(u.value1=o),"string"==typeof u.value2)&&(o=j(u.value2))&&(u.value2=o);n.oPt=i,n.autoSort=t.autoSort,n.kLt=t.sortInfo,n.DLt=t.sortInfo,t.sortAfter&&(n.DLt=t.sortBefore,n._Lt=t.sortAfter),n.autoFilter=t.autoFilter,n.NLt=t.filterInfo,n.autoGroup=t.autoGroup,n.MFt=t.groupInfo,n.UFt=t.detailColumnsVisible,n.lFt=t.pinnedRows,n.CLt=t.pinnedColumns},n.View=R},"./node_modules/fetch-jsonp/build/fetch-jsonp.js":function(t,n){var i,r,n,e,u,o;e=this,void 0!==(n="function"==typeof(i=u=function(t,n){"use strict";var i,r=5e3,e="callback",u=null;function h(){return"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random())}function v(n){try{delete window[n]}catch(t){window[n]=void 0}}function l(t){var t=document.getElementById(t);t&&document.getElementsByTagName("head")[0].removeChild(t)}function o(u){var o,s,f,c,a,o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=u,f=o.timeout||r,c=o.jsonpCallback||e,a=void 0;return new Promise(function(t,n){var i,r,e,i=o.jsonpCallbackFunction||h(),r=c+"_"+i;window[i]=function(n){t({ok:!0,json:function t(){return Promise.resolve(n)}}),a&&clearTimeout(a),l(r),v(i)},s+=-1===s.indexOf("?")?"?":"&",(e=document.createElement("script")).setAttribute("src",""+s+c+"="+i),o.charset&&e.setAttribute("charset",o.charset),e.id=r,document.getElementsByTagName("head")[0].appendChild(e),a=setTimeout(function(){n(new Error("JSONP request to "+u+" timed out")),v(i),l(r),window[i]=function(){v(i)}},f),e.onerror=function(){n(new Error("JSONP request to "+u+" failed")),v(i),l(r),a&&clearTimeout(a)}})}n.exports=o})?i.apply(n,r=[n,t]):i)&&(t.exports=n)},"./node_modules/whatwg-fetch/fetch.js":function(t,n,i){"use strict";var s,r,e,u,o,f;function c(t){return t&&DataView.prototype.isPrototypeOf(t)}function a(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function h(t){return t="string"!=typeof t?String(t):t}function v(n){var t={next:function(){var t=n.shift();return{done:void 0===t,value:t}}};return s.iterable&&(t[Symbol.iterator]=function(){return t}),t}function l(n){this.map={},n instanceof l?n.forEach(function(t,n){this.append(n,t)},this):Array.isArray(n)?n.forEach(function(t){this.append(t[0],t[1])},this):n&&Object.getOwnPropertyNames(n).forEach(function(t){this.append(t,n[t])},this)}function d(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(i){return new Promise(function(t,n){i.onload=function(){t(i.result)},i.onerror=function(){n(i.error)}})}function j(t){var n,i,n=new FileReader,i=p(n);return n.readAsArrayBuffer(t),i}function y(t){var n,i,n=new FileReader,i=p(n);return n.readAsText(t),i}function b(t){for(var n,i,r,n=new Uint8Array(t),i=new Array(n.length),r=0;r<n.length;r++)i[r]=String.fromCharCode(n[r]);return i.join("")}function w(t){var n;return t.slice?t.slice(0):((n=new Uint8Array(t.byteLength)).set(new Uint8Array(t)),n.buffer)}function m(){return this.bodyUsed=!1,this.HPt=function(t){(this.zPt=t)?"string"==typeof t?this.VPt=t:s.blob&&Blob.prototype.isPrototypeOf(t)?this.YPt=t:s.formData&&FormData.prototype.isPrototypeOf(t)?this.ZPt=t:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this.VPt=t.toString():s.arrayBuffer&&s.blob&&c(t)?(this.WPt=w(t.buffer),this.zPt=new Blob([this.WPt])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||e(t))?this.WPt=w(t):this.VPt=t=Object.prototype.toString.call(t):this.VPt="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this.YPt&&this.YPt.type?this.headers.set("content-type",this.YPt.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var t=d(this);if(t)return t;if(this.YPt)return Promise.resolve(this.YPt);if(this.WPt)return Promise.resolve(new Blob([this.WPt]));if(this.ZPt)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this.VPt]))},this.arrayBuffer=function(){return this.WPt?d(this)||Promise.resolve(this.WPt):this.blob().then(j)}),this.text=function(){var t=d(this);if(t)return t;if(this.YPt)return y(this.YPt);if(this.WPt)return Promise.resolve(b(this.WPt));if(this.ZPt)throw new Error("could not read FormData body as text");return Promise.resolve(this.VPt)},s.formData&&(this.formData=function(){return this.text().then(O)}),this.json=function(){return this.text().then(JSON.parse)},this}function g(t){var n=t.toUpperCase();return-1<u.indexOf(n)?n:t}function _(t,n){var i=(n=n||{}).body;if(t instanceof _){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,n.headers||(this.headers=new l(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t.zPt||(i=t.zPt,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=n.credentials||this.credentials||"same-origin",!n.headers&&this.headers||(this.headers=new l(n.headers)),this.method=g(n.method||this.method||"GET"),this.mode=n.mode||this.mode||null,this.signal=n.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this.HPt(i)}function O(t){var i=new FormData;return t.trim().split("&").forEach(function(t){var t,n,t;t&&(n=(t=t.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),i.append(decodeURIComponent(n),decodeURIComponent(t)))}),i}function S(t){var i,n,i=new l,n;return t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var t,n,t,t=t.split(":"),n=t.shift().trim();n&&(t=t.join(":").trim(),i.append(n,t))}),i}function C(t,n){n=n||{},this.type="default",this.status=void 0===n.status?200:n.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in n?n.statusText:"OK",this.headers=new l(n.headers),this.url=n.url||"",this.HPt(t)}i.r(n),i.d(n,{DOMException:function(){return f},Headers:function(){return l},Request:function(){return _},Response:function(){return C},fetch:function(){return F}}),(s={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self}).arrayBuffer&&(r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],e=ArrayBuffer.isView||function(t){return t&&-1<r.indexOf(Object.prototype.toString.call(t))}),l.prototype.append=function(t,n){t=a(t),n=h(n);var i=this.map[t];this.map[t]=i?i+", "+n:n},l.prototype.delete=function(t){delete this.map[a(t)]},l.prototype.get=function(t){return t=a(t),this.has(t)?this.map[t]:null},l.prototype.has=function(t){return this.map.hasOwnProperty(a(t))},l.prototype.set=function(t,n){this.map[a(t)]=h(n)},l.prototype.forEach=function(t,n){for(var i in this.map)this.map.hasOwnProperty(i)&&t.call(n,this.map[i],i,this)},l.prototype.keys=function(){var i=[];return this.forEach(function(t,n){i.push(n)}),v(i)},l.prototype.values=function(){var n=[];return this.forEach(function(t){n.push(t)}),v(n)},l.prototype.entries=function(){var i=[];return this.forEach(function(t,n){i.push([n,t])}),v(i)},s.iterable&&(l.prototype[Symbol.iterator]=l.prototype.entries),u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],_.prototype.clone=function(){return new _(this,{body:this.zPt})},m.call(_.prototype),m.call(C.prototype),C.prototype.clone=function(){return new C(this.zPt,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},C.error=function(){var t=new C(null,{status:0,statusText:""});return t.type="error",t},o=[301,302,303,307,308],C.redirect=function(t,n){if(-1===o.indexOf(n))throw new RangeError("Invalid status code");return new C(null,{status:n,headers:{location:t}})},f=self.DOMException;try{new f}catch(t){(f=function(t,n){this.message=t,this.name=n;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),f.prototype.constructor=f}function F(u,o){return new Promise(function(i,t){var n,r,n=new _(u,o);if(n.signal&&n.signal.aborted)return t(new f("Aborted","AbortError"));function e(){r.abort()}(r=new XMLHttpRequest).onload=function(){var t,n,t={status:r.status,statusText:r.statusText,headers:S(r.getAllResponseHeaders()||"")};t.url="responseURL"in r?r.responseURL:t.headers.get("X-Request-URL"),n="response"in r?r.response:r.responseText,i(new C(n,t))},r.onerror=function(){t(new TypeError("Network request failed"))},r.ontimeout=function(){t(new TypeError("Network request failed"))},r.onabort=function(){t(new f("Aborted","AbortError"))},r.open(n.method,n.url,!0),"include"===n.credentials?r.withCredentials=!0:"omit"===n.credentials&&(r.withCredentials=!1),"responseType"in r&&s.blob&&(r.responseType="blob"),n.headers.forEach(function(t,n){r.setRequestHeader(n,t)}),n.signal&&(n.signal.addEventListener("abort",e),r.onreadystatechange=function(){4===r.readyState&&n.signal.removeEventListener("abort",e)}),r.send(void 0===n.zPt?null:n.zPt)})}F.polyfill=!0,self.fetch||(self.fetch=F,self.Headers=l,self.Request=_,self.Response=C)},CalcEngine:function(t){"use strict";t.exports=i("@grapecity/js-calc")},Common:function(t){"use strict";t.exports=i("@grapecity/js-sheets-common")}},u={},s.d=function(t,n){for(var i in n)s.o(n,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},s.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o=s("./dist/src/dataManager.entry.js"),(r={}).Data=o,t.exports=r.Data},"./node_modules_local/@grapecity/js-data-manager/index.js":function(t,n,i){t.exports=i("./node_modules_local/@grapecity/js-data-manager/dist/gc.data.js")},"@grapecity/js-sheets-common":function(t){"use strict";t.exports=GC.Spread},"@grapecity/js-calc":function(t){"use strict";t.exports=GC.Spread.CalcEngine}},r={},t=e("./node_modules_local/@grapecity/js-data-manager/index.js"),(GC=void 0===GC?{}:GC).Data=t}();